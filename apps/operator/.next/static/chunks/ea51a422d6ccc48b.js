(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16755,(e,d,t)=>{d.exports=e.r(92966)},48599,e=>{"use strict";var d=e.i(29511),t=e.i(58138),l=e.i(16755);let r=["admin","operator","auditor"];function i({users:e}){let i=(0,l.useRouter)(),[a,o]=(0,t.useTransition)(),[s,n]=(0,t.useState)(null),[p,c]=(0,t.useState)(!1),[u,x]=(0,t.useState)(!1),[b,h]=(0,t.useState)(""),[g,y]=(0,t.useState)(""),[f,j]=(0,t.useState)("operator"),m=async(e,d)=>{n(null),c(!0);let t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)});if(c(!1),!t.ok){let e=await t.json().catch(()=>null);return n(e?.error||"Request failed"),!1}return o(()=>i.refresh()),!0},v=async(e,d)=>{await m("/api/operator/users/set-role",{email:e,role:d})},w=async e=>{confirm(`Delete ${e}?`)&&await m("/api/operator/users/delete",{email:e})},C=async e=>{e.preventDefault();let d=await m("/api/operator/users/add",{email:b,password:g,role:f});y(""),d&&(h(""),j("operator"),x(!1))};return(0,d.jsxs)("div",{style:{display:"grid",gap:12},children:[s&&(0,d.jsx)("div",{style:{color:"#fca5a5",fontSize:13},children:s}),(0,d.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:(0,d.jsx)("button",{type:"button",onClick:()=>x(e=>!e),disabled:p||a,style:{padding:"10px 14px",borderRadius:10,border:"1px solid #1f2937",background:"#2563eb",color:"white",fontWeight:600,cursor:p||a?"not-allowed":"pointer"},children:u?"Cancel":"Create User"})}),u&&(0,d.jsxs)("form",{onSubmit:C,style:{display:"grid",gap:10,padding:12,border:"1px solid #1f2937",borderRadius:10,background:"#0b1224"},children:[(0,d.jsxs)("div",{style:{display:"grid",gap:6},children:[(0,d.jsx)("label",{style:{fontSize:13,color:"#cbd5e1"},children:"Email"}),(0,d.jsx)("input",{type:"email",value:b,onChange:e=>h(e.target.value),required:!0,disabled:p||a,style:{padding:10,borderRadius:8,border:"1px solid #1f2937",background:"#040711",color:"#e5e7eb"}})]}),(0,d.jsxs)("div",{style:{display:"grid",gap:6},children:[(0,d.jsx)("label",{style:{fontSize:13,color:"#cbd5e1"},children:"Password"}),(0,d.jsx)("input",{type:"password",value:g,onChange:e=>y(e.target.value),required:!0,disabled:p||a,style:{padding:10,borderRadius:8,border:"1px solid #1f2937",background:"#040711",color:"#e5e7eb"}})]}),(0,d.jsxs)("div",{style:{display:"grid",gap:6},children:[(0,d.jsx)("label",{style:{fontSize:13,color:"#cbd5e1"},children:"Role"}),(0,d.jsx)("select",{value:f,onChange:e=>j(e.target.value),disabled:p||a,style:{padding:10,borderRadius:8,border:"1px solid #1f2937",background:"#040711",color:"#e5e7eb"},children:r.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})]}),(0,d.jsx)("div",{style:{display:"flex",gap:8,justifyContent:"flex-end"},children:(0,d.jsx)("button",{type:"submit",disabled:p||a,style:{padding:"10px 14px",borderRadius:10,border:"1px solid #1f2937",background:"#16a34a",color:"white",fontWeight:600,cursor:p||a?"not-allowed":"pointer"},children:"Create"})})]}),(0,d.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",background:"#0f172a",borderRadius:10,overflow:"hidden"},children:[(0,d.jsx)("thead",{style:{background:"#111827",color:"#cbd5e1",textAlign:"left"},children:(0,d.jsxs)("tr",{children:[(0,d.jsx)("th",{style:{padding:"10px 12px"},children:"Email"}),(0,d.jsx)("th",{style:{padding:"10px 12px"},children:"Role"}),(0,d.jsx)("th",{style:{padding:"10px 12px"},children:"Created"}),(0,d.jsx)("th",{style:{padding:"10px 12px",width:120},children:"Actions"})]})}),(0,d.jsx)("tbody",{children:e.map(e=>(0,d.jsxs)("tr",{style:{borderTop:"1px solid #1f2937"},children:[(0,d.jsx)("td",{style:{padding:"10px 12px",color:"#e5e7eb"},children:e.email}),(0,d.jsx)("td",{style:{padding:"10px 12px"},children:(0,d.jsx)("select",{defaultValue:e.role,disabled:a||p,onChange:d=>v(e.email,d.target.value),style:{padding:8,borderRadius:8,background:"#0b1224",color:"#e5e7eb",border:"1px solid #1f2937"},children:r.map(e=>(0,d.jsx)("option",{value:e,children:e},e))})}),(0,d.jsx)("td",{style:{padding:"10px 12px",color:"#cbd5e1",fontSize:13},children:new Date(e.createdAt).toLocaleString()}),(0,d.jsx)("td",{style:{padding:"10px 12px"},children:(0,d.jsx)("button",{type:"button",disabled:a||p,onClick:()=>w(e.email),style:{padding:"8px 10px",borderRadius:8,border:"1px solid #1f2937",background:"#b91c1c",color:"white",cursor:a?"not-allowed":"pointer",fontWeight:600},children:"Delete"})})]},e.email))})]})]})}e.s(["default",()=>i])}]);