(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,16929,e=>{"use strict";var i=e.i(29511),s=e.i(58138);let o={name:"Operator",tone:"teaching",focus:"stability",prefersBullets:!0,brandNotes:["Cinematic, calm, deterministic.","Explains risk and safeguards, never panics.","Treats every fix as a legacy milestone."],signatureLine:"— Operator, watching over your systems."};function t({sessionId:e,level:t}){var r;let n,l,d,[a,c]=(0,s.useState)(null),[p,g]=(0,s.useState)([]),[h,f]=(0,s.useState)(null),[y,u]=(0,s.useState)(null),[x,m]=(0,s.useState)(null),[j,b]=(0,s.useState)(null),[v,S]=(0,s.useState)(!0),[k,z]=(0,s.useState)(!0),[w,R]=(0,s.useState)(!0),[B,I]=(0,s.useState)(!0),[C,A]=(0,s.useState)(!0),[W,M]=(0,s.useState)(!0),[T,$]=(0,s.useState)(null),[O,P]=(0,s.useState)(null),[F,L]=(0,s.useState)(null),[E,N]=(0,s.useState)(null),[q,H]=(0,s.useState)(null),[_,D]=(0,s.useState)(null);(0,s.useEffect)(()=>{!async function(){S(!0);try{let e=await fetch("/api/intel/summary"),i=await e.json().catch(()=>null);c(i)}catch(e){$("Failed to load intelligence summary")}finally{S(!1)}}()},[]),(0,s.useEffect)(()=>{!async function(){z(!0);try{let e=await fetch("/api/intel/knowledge"),i=await e.json().catch(()=>null);i?.knowledge&&g(i.knowledge)}catch(e){P("Failed to load knowledge base")}finally{z(!1)}}()},[]),(0,s.useEffect)(()=>{!async function(){M(!0);try{let e=await fetch("/api/intel/knowledge-graph"),i=await e.json().catch(()=>null);i?.knowledgeBrain&&b(i.knowledgeBrain)}catch(e){D("Failed to load knowledge graph")}finally{M(!1)}}()},[]),(0,s.useEffect)(()=>{!async function(){R(!0);try{let e=await fetch("/api/intel/reflection"),i=await e.json().catch(()=>null);i&&f(i)}catch(e){L("Failed to load reflection")}finally{R(!1)}}()},[]),(0,s.useEffect)(()=>{!async function(){I(!0);try{let e=await fetch("/api/intel/prime"),i=await e.json().catch(()=>null);i&&u(i)}catch(e){N("Failed to load prime intelligence")}finally{I(!1)}}()},[]),(0,s.useEffect)(()=>{!async function(){A(!0);try{let e=await fetch("/api/intel/prime-narrative"),i=await e.json().catch(()=>null);i?.primeNarrative&&m(i.primeNarrative)}catch(e){H("Failed to load prime narrative")}finally{A(!1)}}()},[]);let J=a?.summary,Y=J?.topPatterns?.length?J.topPatterns:a?.patterns.slice(0,5)??[],K=a?.incidents.slice(0,10)??[],U=a?.voiceSummary,G=a?.playbooks??[],V=a?.stabilityIndex,Q=a?.earlyWarnings??[],X=a?.foresightPredictions??[],Z=a?.cognition??y?.cognition,ee=a?.autonomySimulations??y?.autonomy?.autonomySimulations??[],ei=a?.strategyScores??y?.autonomy?.strategyScores??[],es=a?.reliabilityForecast??y?.autonomy?.reliabilityForecast??y?.autonomy?.reliabilityForecast,eo=x??y?.primeNarrative??null,et=j?.insights??[],er=j?.summary??[],en=j?.recommendations??[],el=function(e){let{summary:i,patterns:s}=e,o=[];if(!i||0===i.totalIncidents)return o.push("No recurring patterns detected — the system is stable."),o.push("Keep guardrails steady and continue calm monitoring."),o;let t=s.length?[...s].sort((e,i)=>i.occurrences-e.occurrences).slice(0,2).map(e=>`${e.key} (${e.occurrences}x)`):[];t.length?o.push(`Top signals: ${t.join(", ")}.`):o.push("No recurring patterns detected — no hotspots at this time.");let r=function(e){if(e)return`Fix outcomes: ${e.fixSuccessCount} succeeded, ${e.fixFailureCount} failed, ${e.rollbackCount} rollbacks.`}(i);return r&&o.push(r),i.highRiskBlockedCount>0&&o.push(`High-risk blocks: ${i.highRiskBlockedCount} enforced.`),i.totalIncidents>=10&&0===i.fixFailureCount&&0===i.rollbackCount&&o.push("Trend: incident volume holding steady with clean recoveries."),o.slice(0,4)}({persona:o,summary:J,patterns:Y,voiceSummary:U}),ed=(r={title:"Operator coaching",body:el},n=[],l=o.prefersBullets?"• ":"› ",d=r.body.map(e=>e.trim()).filter(Boolean),r.title&&n.push(`${r.title}`),d.forEach(e=>{let i=e;"teaching"===o.tone?(e.toLowerCase().startsWith("this")||(i=`This suggests ${e.charAt(0).toLowerCase()}${e.slice(1)}`),i.endsWith(".")||(i=`${i}.`),i+=" You may want to confirm safeguards."):"reassuring"===o.tone?((i=e).endsWith(".")||(i=`${i}.`),i+=" No immediate risks detected; we're monitoring."):i=e.endsWith(".")?e:`${e}.`;let s=`${l}${i}`;n.push(s)}),o.signatureLine&&d.length>0&&n.push(o.signatureLine),n);return(0,i.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937",color:"#e5e7eb"},children:[(0,i.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Operator Intelligence"}),(0,i.jsxs)("p",{style:{margin:0,marginBottom:6,color:"#a5b4fc",fontSize:12},children:["Session ",e," · Mode ",t??"unspecified"]}),(0,i.jsx)("p",{style:{margin:0,marginBottom:12,color:"#7dd3fc",fontSize:12},children:"Live intelligence from your recent incidents, fixes, and rollbacks."}),v&&(0,i.jsx)("div",{style:{color:"#cbd5e1",fontSize:13},children:"Loading intelligence..."}),T&&(0,i.jsx)("div",{style:{color:"#fca5a5",fontSize:13},children:T}),!v&&!T&&J&&(0,i.jsxs)("div",{style:{display:"grid",gap:12},children:[V&&(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Stability Index"}),(0,i.jsxs)("div",{style:{display:"grid",gap:6,fontSize:13,color:"#cbd5e1"},children:[(0,i.jsxs)("div",{children:["Score: ",V.score," · Level: ",V.level]}),(0,i.jsxs)("div",{children:["Computed: ",V.computedAt]}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:V.factors.map((e,s)=>(0,i.jsx)("li",{children:e},s))})]})]}),Q.length>0&&(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Early warnings"}),(0,i.jsx)("div",{style:{display:"grid",gap:8,fontSize:13,color:"#cbd5e1"},children:Q.map(e=>(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsxs)("div",{style:{fontWeight:600},children:[e.title," · ",e.severity," · ",e.window]}),(0,i.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:e.rationale}),(0,i.jsx)("ul",{style:{margin:"6px 0 0 16px",padding:0},children:e.actions.map((e,s)=>(0,i.jsx)("li",{children:e},s))})]},e.id))})]}),X.length>0&&(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Foresight predictions"}),(0,i.jsx)("div",{style:{display:"grid",gap:8,fontSize:13,color:"#cbd5e1"},children:X.map(e=>(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsxs)("div",{style:{fontWeight:600},children:["Likelihood ",e.likelihood," · Impact ",e.impact," · Horizon ",e.horizon]}),(0,i.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:e.summary}),(0,i.jsx)("ul",{style:{margin:"6px 0 0 16px",padding:0},children:e.drivers.map((e,s)=>(0,i.jsx)("li",{children:e},s))})]},e.id))})]}),Z&&(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Prime cognition"}),(0,i.jsxs)("div",{style:{display:"grid",gap:6,fontSize:13,color:"#cbd5e1"},children:[(0,i.jsxs)("div",{children:["Stability: ",Z.stability.score]}),(0,i.jsxs)("div",{children:["Drift: ",Z.drift.status," · Score: ",Z.drift.driftScore]}),(0,i.jsxs)("div",{children:["Indicators: ",Z.drift.indicators.join("; ")]}),(0,i.jsx)("div",{style:{fontWeight:600,marginTop:4},children:"Confidences"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:Z.confidences.map((e,s)=>(0,i.jsxs)("li",{children:[e.target,": ",e.score," — ",e.rationale]},s))}),(0,i.jsx)("div",{style:{fontWeight:600,marginTop:4},children:"Rationales"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:Z.rationales.map((e,s)=>(0,i.jsxs)("li",{children:[e.summary," — ",e.factors.join("; ")]},s))}),(0,i.jsx)("div",{style:{fontWeight:600,marginTop:4},children:"Traces"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:Z.traces.map((e,s)=>(0,i.jsxs)("li",{children:[e.steps.join(" → ")," → ",e.conclusion]},s))})]})]}),(ee.length>0||ei.length>0||es)&&(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Prime autonomy"}),(0,i.jsxs)("div",{style:{display:"grid",gap:8,fontSize:13,color:"#cbd5e1"},children:[es&&(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsxs)("div",{style:{fontWeight:600},children:["Reliability forecast · ",es.horizon]}),(0,i.jsxs)("div",{children:["Score: ",es.score]}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:es.rationale.map((e,s)=>(0,i.jsx)("li",{children:e},s))})]}),ei.length>0&&(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Strategy scores"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:ei.map((e,s)=>(0,i.jsxs)("li",{children:[e.strategy,": ",e.score," — ",e.rationale]},s))})]}),ee.length>0&&(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Simulations"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:ee.map(e=>(0,i.jsxs)("li",{children:[e.description," — ",e.outcome," — risk ",e.risk,"; approvals ",e.approvalsNeeded??0]},e.id))})]})]})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Operator health snapshot"}),(0,i.jsxs)("div",{style:{display:"grid",gap:6,fontSize:13,color:"#cbd5e1"},children:[(0,i.jsxs)("div",{children:["Incidents: ",J.totalIncidents]}),(0,i.jsxs)("div",{children:["Fix success: ",J.fixSuccessCount," · Fix failure: ",J.fixFailureCount," · Rollbacks: ",J.rollbackCount]}),(0,i.jsxs)("div",{children:["High-risk blocked: ",J.highRiskBlockedCount," · Approvals required: ",J.approvalsRequiredCount??0]}),(0,i.jsxs)("div",{children:["Emails sent: ",J.emailsSentCount??0," · Emails failed: ",J.emailsFailedCount??0]})]})]}),U&&(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Briefing (voice-ready)"}),(0,i.jsxs)("div",{style:{display:"grid",gap:6,fontSize:13,color:"#cbd5e1"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:U.title}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:U.bullets.map((e,s)=>(0,i.jsx)("li",{children:e},s))}),U.recommendedActions&&U.recommendedActions.length>0&&(0,i.jsxs)("div",{children:["Recommended actions:",(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:U.recommendedActions.map((e,s)=>(0,i.jsx)("li",{children:e},s))})]})]})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Recurring patterns"}),(0,i.jsxs)("div",{style:{display:"grid",gap:6,fontSize:13,color:"#cbd5e1"},children:[(0,i.jsx)("div",{children:"Top recurring patterns:"}),(0,i.jsxs)("ul",{style:{margin:"6px 0 0 16px",padding:0},children:[0===Y.length&&(0,i.jsx)("li",{children:"No recurring patterns detected — no hotspots at this time."}),Y.map(e=>(0,i.jsxs)("li",{children:[e.type,": ",e.key," — ",e.occurrences," occurrences · last seen ",e.lastSeenAt,void 0!==e.successCount&&` \xb7 success: ${e.successCount}`,void 0!==e.failureCount&&` \xb7 failures: ${e.failureCount}`,void 0!==e.rollbackCount&&` \xb7 rollbacks: ${e.rollbackCount}`]},`${e.type}-${e.key}`))]})]})]}),G.length>0&&(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Playbooks"}),(0,i.jsx)("div",{style:{display:"grid",gap:8,fontSize:13,color:"#cbd5e1"},children:G.slice(0,4).map(e=>(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,i.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:e.description}),(0,i.jsx)("ul",{style:{margin:"6px 0 0 16px",padding:0},children:e.steps.slice(0,3).map(e=>(0,i.jsx)("li",{children:e.description},e.order))})]},e.id))})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Recent incidents"}),(0,i.jsxs)("div",{style:{display:"grid",gap:6,fontSize:13,color:"#cbd5e1"},children:[0===K.length&&(0,i.jsx)("div",{children:"No incidents recorded yet — the system is quiet."}),K.map(e=>(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:e.summary||e.actionType||"Incident"}),(0,i.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:e.timestamp}),e.source&&(0,i.jsxs)("div",{style:{fontSize:12,color:"#a5b4fc"},children:["Source: ",e.source]}),e.message&&(0,i.jsx)("div",{style:{fontSize:12,color:"#cbd5e1"},children:e.message})]},e.id))]})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Knowledge"}),k&&(0,i.jsx)("div",{style:{color:"#cbd5e1",fontSize:13},children:"Loading knowledge..."}),O&&(0,i.jsx)("div",{style:{color:"#fca5a5",fontSize:13},children:O}),!k&&!O&&(0,i.jsxs)("div",{style:{display:"grid",gap:6,fontSize:13,color:"#cbd5e1"},children:[(p.slice(0,5)??[]).map(e=>(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:e.title}),(0,i.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:e.summary}),(0,i.jsxs)("div",{style:{fontSize:12,color:"#a5b4fc"},children:["Source: ",e.source]})]},e.id)),0===p.length&&(0,i.jsx)("div",{children:"No knowledge articles yet — add context as you learn."})]})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Knowledge graph"}),W&&(0,i.jsx)("div",{style:{color:"#cbd5e1",fontSize:13},children:"Loading knowledge graph..."}),_&&(0,i.jsx)("div",{style:{color:"#fca5a5",fontSize:13},children:_}),!W&&!_&&j&&(0,i.jsxs)("div",{style:{display:"grid",gap:8,fontSize:13,color:"#cbd5e1"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Summary"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:er.map((e,s)=>(0,i.jsx)("li",{children:e},s))}),(0,i.jsx)("div",{style:{fontWeight:600},children:"Insights"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:et.map((e,s)=>(0,i.jsx)("li",{children:e},s))}),en.length>0&&(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Recommendations"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:en.map((e,s)=>(0,i.jsxs)("li",{children:[e.title,": ",e.summary," — ",e.actions.join("; ")]},s))})]})]})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Operator coaching"}),(0,i.jsx)("div",{style:{display:"grid",gap:4,fontSize:13,color:"#cbd5e1"},children:ed.map((e,s)=>(0,i.jsx)("div",{children:e},s))})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Reflection"}),w&&(0,i.jsx)("div",{style:{color:"#cbd5e1",fontSize:13},children:"Loading reflections..."}),F&&(0,i.jsx)("div",{style:{color:"#fca5a5",fontSize:13},children:F}),!w&&!F&&h&&(0,i.jsxs)("div",{style:{display:"grid",gap:8,fontSize:13,color:"#cbd5e1"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:"Daily"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:h.dailyReflection.highlights.map((e,s)=>(0,i.jsx)("li",{children:e},s))}),(0,i.jsx)("div",{style:{fontWeight:600},children:"Weekly"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:h.weeklyReflection.highlights.map((e,s)=>(0,i.jsx)("li",{children:e},s))}),(0,i.jsx)("div",{style:{fontWeight:600},children:"Subsystem"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:h.subsystemReflection.highlights.map((e,s)=>(0,i.jsx)("li",{children:e},s))})]})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Prime narrative"}),C&&(0,i.jsx)("div",{style:{color:"#cbd5e1",fontSize:13},children:"Loading prime narrative..."}),q&&(0,i.jsx)("div",{style:{color:"#fca5a5",fontSize:13},children:q}),!C&&!q&&eo&&(0,i.jsxs)("div",{style:{display:"grid",gap:8,fontSize:13,color:"#cbd5e1"},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:eo.headline}),(0,i.jsx)("div",{style:{fontWeight:600},children:"Weekly"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:eo.weekly.map((e,s)=>(0,i.jsx)("li",{children:e},s))}),(0,i.jsx)("div",{style:{fontWeight:600},children:"Monthly"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:eo.monthly.map((e,s)=>(0,i.jsx)("li",{children:e},s))}),(0,i.jsx)("div",{style:{fontWeight:600},children:"Feed"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:eo.feed.map((e,s)=>(0,i.jsx)("li",{children:e},s))}),(0,i.jsx)("div",{style:{fontWeight:600},children:"Briefing"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:eo.briefing.map((e,s)=>(0,i.jsx)("li",{children:e},s))})]})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Prime Intelligence"}),B&&(0,i.jsx)("div",{style:{color:"#cbd5e1",fontSize:13},children:"Loading Prime intelligence..."}),E&&(0,i.jsx)("div",{style:{color:"#fca5a5",fontSize:13},children:E}),!B&&!E&&y&&(0,i.jsxs)("div",{style:{display:"grid",gap:8,fontSize:13,color:"#cbd5e1"},children:[(0,i.jsxs)("div",{style:{fontWeight:600},children:["Global reliability score: ",y.globalReliabilityScore]}),(0,i.jsx)("div",{style:{fontWeight:600},children:y.primeBriefing.headline}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:y.primeBriefing.highlights.map((e,s)=>(0,i.jsx)("li",{children:e},s))}),(0,i.jsx)("div",{style:{fontWeight:600},children:"Prime insights"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:y.primeInsights.map(e=>(0,i.jsxs)("li",{children:[e.title,": ",e.narrative]},e.id))}),(0,i.jsx)("div",{style:{fontWeight:600},children:"Prime feed"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:y.primeInsightsFeed.map((e,s)=>(0,i.jsx)("li",{children:e},s))}),(0,i.jsx)("div",{style:{fontWeight:600},children:"Prime monthly"}),(0,i.jsx)("ul",{style:{margin:"4px 0 0 16px",padding:0},children:y.primeMonthlyDigest.map((e,s)=>(0,i.jsx)("li",{children:e},s))})]})]})]})]})}e.s(["default",()=>t],16929)},20734,e=>{"use strict";var i=e.i(29511),s=e.i(58138);function o({level:e,sessionId:o}){let t=o||"demo-session",r=`Memory is active for session ${t}. Responses reference recent history.`,[n,l]=(0,s.useState)([{from:"operator",text:"Hi! I'm your AI Operator. I keep session memory, retrieve site context, and guide onboarding."}]),[d,a]=(0,s.useState)(""),[c,p]=(0,s.useState)(!1),g=(0,s.useRef)(null);async function h(){if(!d.trim())return;let e={from:"user",text:d};l(i=>[...i,e]),a(""),p(!0);try{let e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:t,message:d})}),i=await e.json().catch(()=>void 0),s=i?.reply??"I'm here to help with onboarding, site info, and monitoring.";l(e=>[...e,{from:"operator",text:s}])}catch(e){console.error("Failed to send chat",e),l(e=>[...e,{from:"operator",text:"Sorry, I couldn't respond right now."}])}finally{p(!1)}}return(0,s.useEffect)(()=>{let e=g.current;e&&(e.scrollTop=e.scrollHeight)},[n,c]),(0,s.useEffect)(()=>{let e=e=>{let i=e.data;i&&("operator:diagnosis"===i.type&&l(e=>[...e,{from:"operator",text:"I've analyzed recent events and prepared fix proposals. Switch to Monitor mode to review."}]),"operator:fix-applied"===i.type&&l(e=>[...e,{from:"operator",text:`Fix ${i.proposalId} applied (risk: ${i.risk}). Snapshot ${i.snapshotId??"n/a"}.`}]),"operator:fix-failed"===i.type&&l(e=>[...e,{from:"operator",text:`Fix ${i.proposalId} failed; rollback ${i.rollbackId??"n/a"}. Reason: ${i.reason??"unknown"}.`}]),"operator:approval-required"===i.type&&l(e=>[...e,{from:"operator",text:`Approval required for fix ${i.proposalId} (risk: ${i.risk}). Review in Fix Review panel.`}]),"operator:rollback-executed"===i.type&&l(e=>[...e,{from:"operator",text:`Rollback ${i.rollbackId} executed. Snapshot ${i.snapshotId??"n/a"}.`}]),"operator:autonomy-state"===i.type&&l(e=>[...e,{from:"operator",text:`Autonomy state updated. Allowed actions: ${i.allowed.join("; ")}.`}]))};return window.addEventListener("message",e),()=>window.removeEventListener("message",e)},[]),(0,i.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937"},children:[(0,i.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Live Operator Chat"}),(0,i.jsx)("p",{style:{margin:0,marginBottom:4,color:"#a5b4fc",fontSize:12},children:"A"===e?"Mode A: observing signals only.":"B"===e?"Mode B: can propose fixes with your approval.":"C"===e?"Mode C: future guarded autonomy (not enabled here).":"Operator mode not specified."}),(0,i.jsx)("p",{style:{margin:0,marginBottom:10,color:"#7dd3fc",fontSize:12},children:r}),(0,i.jsxs)("div",{ref:g,style:{display:"grid",gap:8,color:"#cbd5e1",fontSize:14,maxHeight:240,overflowY:"auto",paddingRight:4},children:[n.map((e,s)=>(0,i.jsxs)("div",{style:{background:"operator"===e.from?"#0f172a":"#111827",padding:10,borderRadius:10},children:[(0,i.jsx)("strong",{style:{color:"#e0e7ff",marginRight:6},children:"operator"===e.from?"Operator:":"You:"}),(0,i.jsx)("span",{children:e.text})]},`${e.from}-${s}`)),c&&(0,i.jsx)("div",{style:{color:"#9ca3af",fontSize:12},children:"Operator is thinking…"})]}),(0,i.jsxs)("div",{style:{marginTop:12,display:"flex",gap:8},children:[(0,i.jsx)("input",{value:d,onChange:e=>a(e.target.value),placeholder:"Ask about onboarding or your site",style:{flex:1,borderRadius:10,border:"1px solid #1f2937",background:"#0f172a",color:"#e5e7eb",padding:"10px 12px"}}),(0,i.jsx)("button",{type:"button",onClick:h,disabled:c,style:{borderRadius:10,background:"linear-gradient(90deg, #4f7cff, #2ee6a6, #ffd166)",color:"#0b1224",fontWeight:700,padding:"10px 14px",border:"none",cursor:c?"not-allowed":"pointer",opacity:c?.7:1,minWidth:88},children:c?"Sending":"Send"})]})]})}function t(e){return"A"===e?["Observe only","Collect diagnostics"]:"B"===e?["Auto-apply low-risk fixes","Request approval for medium-risk","Block high-risk"]:"C"===e?["Guarded autonomy","Snapshot + verify + rollback","Still block restricted areas"]:["Mode unspecified; defaulting to safe observation."]}function r({sessionId:e,level:o}){let[r,n]=(0,s.useState)([]),[l,d]=(0,s.useState)([]),[a,c]=(0,s.useState)("");async function p(i){c(`Rolling back snapshot ${i}...`);try{let s=await fetch("/api/operator/rollback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({snapshotId:i,reason:"Manual rollback from AutonomyPanel"})}),o=await s.json().catch(()=>({}));c(o?.rollbackId?`Rollback ${o.rollbackId} executed.`:"Rollback request completed."),o?.rollbackId&&window.parent.postMessage({type:"operator:rollback-executed",sessionId:e,rollbackId:o.rollbackId,snapshotId:i,reason:"Manual rollback"},"*")}catch(e){console.error("Rollback failed",e),c("Rollback failed to execute.")}}return(0,s.useEffect)(()=>{!async function(){try{let e=await fetch("/api/operator/fix"),i=await e.json().catch(()=>({}));n(Array.isArray(i?.logs)?i.logs:[]),d(Array.isArray(i?.snapshots)?i.snapshots:[])}catch(e){console.error("Failed to load autonomy state",e)}}()},[]),(0,s.useEffect)(()=>{let i=t(o);window.parent.postMessage({type:"operator:autonomy-state",sessionId:e,level:o,allowed:i,recentLogs:r},"*")},[o,r,e]),(0,i.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937",color:"#e5e7eb"},children:[(0,i.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Autonomy Control"}),(0,i.jsxs)("p",{style:{margin:0,marginBottom:6,color:"#a5b4fc",fontSize:12},children:["Session ",e," · Mode ",o??"unspecified"]}),(0,i.jsx)("p",{style:{margin:0,marginBottom:12,color:"#7dd3fc",fontSize:12},children:"Guarded hybrid autonomy: snapshots first, verification always, rollback on failure."}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12,marginBottom:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Allowed actions"}),(0,i.jsx)("ul",{style:{margin:0,paddingLeft:16,color:"#e5e7eb",fontSize:13},children:t(o).map((e,s)=>(0,i.jsx)("li",{children:e},`allowed-${s}`))})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12,marginBottom:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Recent actions"}),0===r.length&&(0,i.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No audit logs yet."}),(0,i.jsx)("div",{style:{display:"grid",gap:8},children:r.map(e=>(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:e.actionType}),(0,i.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:e.timestamp}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#cbd5e1"},children:["Risk: ",e.risk]}),e.message&&(0,i.jsx)("div",{style:{fontSize:13,color:"#cbd5e1"},children:e.message}),e.snapshotId&&(0,i.jsxs)("div",{style:{fontSize:12,color:"#a5b4fc"},children:["Snapshot: ",e.snapshotId]}),e.rollbackId&&(0,i.jsxs)("div",{style:{fontSize:12,color:"#a5b4fc"},children:["Rollback: ",e.rollbackId]})]},e.id))})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Snapshots"}),0===l.length&&(0,i.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No snapshots captured yet."}),(0,i.jsx)("div",{style:{display:"grid",gap:8},children:l.map(e=>(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8,display:"grid",gap:4},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:e.id}),(0,i.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:e.timestamp}),(0,i.jsx)("div",{style:{fontSize:13,color:"#cbd5e1"},children:e.reason}),(0,i.jsxs)("div",{style:{fontSize:12,color:"#a5b4fc"},children:["Risk: ",e.riskLevel]}),(0,i.jsxs)("div",{style:{fontSize:12,color:"#cbd5e1"},children:["Files: ",e.affectedFiles.join(", ")||"n/a"]}),(0,i.jsx)("button",{type:"button",onClick:()=>p(e.id),style:{marginTop:4,borderRadius:8,border:"1px solid #f97316",background:"#7c2d12",color:"#ffedd5",padding:"6px 10px",cursor:"pointer",width:"fit-content"},children:"Roll back to snapshot"})]},e.id))})]}),a&&(0,i.jsx)("div",{style:{marginTop:12,fontSize:13,color:"#cbd5e1"},children:a})]})}let n={events:[{id:"evt-fix-1",timestamp:new Date().toISOString(),source:"api",severity:"error",kind:"error",message:"POST /api/forms returned 500"}]};function l({sessionId:e,level:o}){let[t,r]=(0,s.useState)([]),[l,d]=(0,s.useState)([]),[a,c]=(0,s.useState)({}),[p,g]=(0,s.useState)("");async function h(i,s){g(s?"Applying low/medium risk fix...":"Logging approval requirement...");try{let o=await fetch("/api/operator/fix",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({proposal:i,approved:s,rollbackPlan:a[`rollback-${i.diagnosisId}`]})}),t=await o.json().catch(()=>({}));g(t?.message||`Fix response: ${t?.status??"unknown"}`);let r=(e,i=!0,s)=>{window.parent.postMessage({type:"operator:email-status",category:e,sent:i,reason:s},"*")};if(t?.status==="applied"){let s={type:"operator:fix-applied",sessionId:e,proposalId:i.id,snapshotId:t?.snapshotId,risk:t?.risk??i.risk};window.parent.postMessage(s,"*"),r("fix-applied")}else if(t?.status==="pending-approval"){let s={type:"operator:approval-required",sessionId:e,proposalId:i.id,risk:t?.risk??i.risk};window.parent.postMessage(s,"*"),r("approval-required")}else if(t?.status==="rolled-back"||t?.status==="rejected"){let s={type:"operator:fix-failed",sessionId:e,proposalId:i.id,rollbackId:t?.rollbackId,snapshotId:t?.snapshotId,risk:t?.risk??i.risk,reason:t?.message};window.parent.postMessage(s,"*"),r(t?.status==="rejected"?"high-risk-blocked":"fix-failed")}}catch(e){console.error("Failed to process fix",e),g("Failed to process fix request.")}}return(0,s.useEffect)(()=>{!async function(){try{let e=await fetch("/api/monitoring/diagnose",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),i=await e.json().catch(()=>({})),s={};Array.isArray(i?.rollbacks)&&i.rollbacks.forEach(e=>{s[e.id]=e}),r(Array.isArray(i?.diagnoses)?i.diagnoses:[]),d(Array.isArray(i?.proposals)?i.proposals:[]),c(s)}catch(e){console.error("Failed to load fix proposals",e)}}()},[]),(0,i.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937",color:"#e5e7eb"},children:[(0,i.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Fix Review"}),(0,i.jsx)("p",{style:{margin:0,marginBottom:6,color:"#a5b4fc",fontSize:12},children:"A"===o?"Mode A: observation only; approvals required.":"B"===o?"Mode B: may auto-apply low-risk; approval for medium.":"C"===o?"Mode C: guarded autonomy (still logged).":"Mode unspecified."}),(0,i.jsxs)("p",{style:{margin:0,marginBottom:12,color:"#7dd3fc",fontSize:12},children:["Session ",e,": approve or decline proposed fixes. High-risk fixes are blocked."]}),(0,i.jsxs)("p",{style:{margin:0,marginBottom:12,color:"#94a3b8",fontSize:12},children:["Diagnoses: ",t.length]}),(0,i.jsxs)("div",{style:{display:"grid",gap:12,maxHeight:520,overflowY:"auto",paddingRight:4},children:[0===l.length&&(0,i.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No proposals available."}),l.map(e=>{let s=a[`rollback-${e.diagnosisId}`];return(0,i.jsxs)("div",{style:{background:"#0f172a",borderRadius:10,padding:12,display:"grid",gap:8},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:8,alignItems:"center"},children:[(0,i.jsxs)("div",{style:{fontWeight:700},children:["Proposal ",e.id]}),(0,i.jsxs)("div",{style:{fontSize:12,color:"#f9a8d4"},children:["Risk: ",e.risk]})]}),(0,i.jsx)("div",{style:{fontSize:13,color:"#cbd5e1"},children:e.expectedImpact}),(0,i.jsx)("ul",{style:{margin:0,paddingLeft:16,color:"#e5e7eb",fontSize:13},children:e.steps.map((s,o)=>(0,i.jsx)("li",{children:s.description},`${e.id}-step-${o}`))}),s&&(0,i.jsxs)("div",{style:{fontSize:12,color:"#a5b4fc"},children:["Rollback plan: ",s.steps.join(" → "),"; verify: ",s.verificationCriteria.join(", ")]}),(0,i.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,i.jsx)("button",{type:"button",onClick:()=>h(e,!0),style:{borderRadius:8,border:"1px solid #22c55e",background:"#064e3b",color:"#ecfdf3",padding:"8px 12px",cursor:"pointer"},children:"Approve & Apply"}),(0,i.jsx)("button",{type:"button",onClick:()=>h(e,!1),style:{borderRadius:8,border:"1px solid #fbbf24",background:"#78350f",color:"#fffbeb",padding:"8px 12px",cursor:"pointer"},children:"Request Approval"})]})]},e.id)})]}),p&&(0,i.jsx)("div",{style:{marginTop:12,fontSize:13,color:"#cbd5e1"},children:p})]})}let d=[{id:"evt-1",timestamp:new Date().toISOString(),source:"edge-worker",severity:"warning",kind:"latency",message:"Homepage TTFB elevated to 450ms",context:{path:"/"}},{id:"evt-2",timestamp:new Date().toISOString(),source:"api",severity:"error",kind:"error",message:"POST /api/contact returned 500 for user 123",context:{path:"/api/contact"}}];function a({sessionId:e,level:o}){let[t]=(0,s.useState)(d),[r,n]=(0,s.useState)([]),[l,a]=(0,s.useState)([]),[c,p]=(0,s.useState)([]);return(0,s.useEffect)(()=>{!async function(){try{let i=await fetch("/api/monitoring/diagnose",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:t})}),s=await i.json().catch(()=>({})),o=Array.isArray(s?.diagnoses)?s.diagnoses:[],r=Array.isArray(s?.proposals)?s.proposals:[],l=Array.isArray(s?.rollbacks)?s.rollbacks:[];n(o),a(r),p(l),window.parent.postMessage({type:"operator:diagnosis",sessionId:e,diagnoses:o,proposals:r},"*")}catch(e){console.error("Failed to load monitoring data",e)}}()},[t,e]),(0,i.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937",color:"#e5e7eb"},children:[(0,i.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Monitoring Dashboard"}),(0,i.jsx)("p",{style:{margin:0,marginBottom:6,color:"#a5b4fc",fontSize:12},children:"A"===o?"Mode A: observing only.":"B"===o?"Mode B: proposing fixes; requires your approval.":"C"===o?"Mode C: (future) guarded autonomy; disabled here.":"Mode unspecified."}),(0,i.jsxs)("p",{style:{margin:0,marginBottom:12,color:"#7dd3fc",fontSize:12},children:["Session ",e,": live diagnostics with proposed fixes and rollback plans. No autonomous execution."]}),(0,i.jsxs)("div",{style:{display:"grid",gap:12,maxHeight:520,overflowY:"auto",paddingRight:4},children:[(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Recent Events"}),(0,i.jsx)("div",{style:{display:"grid",gap:8},children:t.map(e=>(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:e.timestamp}),(0,i.jsxs)("div",{style:{fontWeight:600},children:[e.severity.toUpperCase()," · ",e.kind," · ",e.source]}),(0,i.jsx)("div",{style:{fontSize:14},children:e.message})]},e.id))})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Diagnoses"}),(0,i.jsxs)("div",{style:{display:"grid",gap:8},children:[0===r.length&&(0,i.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No diagnoses yet."}),r.map(e=>(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:e.summary}),(0,i.jsxs)("div",{style:{fontSize:12,color:"#9ca3af"},children:["Confidence: ",Math.round(100*e.confidence),"%"]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#cbd5e1"},children:["Evidence: ",e.evidence.join(" | ")]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#cbd5e1"},children:["Causes: ",e.suspectedCauses.join(", ")]})]},e.id))]})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Fix Proposals (Mode B)"}),(0,i.jsxs)("div",{style:{display:"grid",gap:8},children:[0===l.length&&(0,i.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No proposals yet."}),l.map(e=>(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsxs)("div",{style:{fontWeight:600},children:["Proposal ",e.id]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#cbd5e1"},children:["Impact: ",e.expectedImpact]}),(0,i.jsxs)("div",{style:{fontSize:13,color:"#cbd5e1"},children:["Risk: ",e.risk]}),(0,i.jsx)("ul",{style:{margin:"6px 0 0 16px",padding:0,color:"#e5e7eb",fontSize:13},children:e.steps.map((s,o)=>(0,i.jsx)("li",{children:s.description},`${e.id}-step-${o}`))}),(0,i.jsxs)("div",{style:{fontSize:12,color:"#9ca3af"},children:["Requires approval: ",e.requiresApproval?"Yes":"No"]})]},e.id))]})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Rollback Plans (Mode B/C)"}),(0,i.jsxs)("div",{style:{display:"grid",gap:8},children:[0===c.length&&(0,i.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No rollback plans yet."}),c.map(e=>(0,i.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,i.jsx)("div",{style:{fontWeight:600},children:e.id}),(0,i.jsx)("ol",{style:{margin:"6px 0 0 16px",padding:0,color:"#e5e7eb",fontSize:13},children:e.steps.map((s,o)=>(0,i.jsx)("li",{children:s},`${e.id}-step-${o}`))})]},e.id))]})]})]})]})}let c=["MAILCOW_SMTP_HOST","MAILCOW_SMTP_PORT","MAILCOW_SMTP_USER","MAILCOW_SMTP_PASS","MAILCOW_SMTP_FROM","MAILCOW_ALERT_RECIPIENTS"];function p({sessionId:e,level:s}){return(0,i.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937",color:"#e5e7eb"},children:[(0,i.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Email Settings"}),(0,i.jsxs)("p",{style:{margin:0,marginBottom:6,color:"#a5b4fc",fontSize:12},children:["Session ",e," · Mode ",s??"unspecified"]}),(0,i.jsx)("p",{style:{margin:0,marginBottom:12,color:"#7dd3fc",fontSize:12},children:"Configure Mailcow SMTP variables for notifications. No third-party SaaS is used."}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12,marginBottom:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Required environment variables"}),(0,i.jsx)("ul",{style:{margin:0,paddingLeft:16,color:"#e5e7eb",fontSize:13},children:c.map(e=>(0,i.jsx)("li",{children:e},e))})]}),(0,i.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,i.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Notes"}),(0,i.jsxs)("ul",{style:{margin:0,paddingLeft:16,color:"#e5e7eb",fontSize:13},children:[(0,i.jsx)("li",{children:"High-risk fixes are blocked and only send alert emails; they never auto-run."}),(0,i.jsx)("li",{children:"Approval-required fixes send an alert; execution still requires consent."}),(0,i.jsx)("li",{children:"Critical monitoring events and daily summaries send to alert recipients."})]})]})]})}var g=e.i(16929);function h({sessionId:e}){let[o,t]=(0,s.useState)(!1),[r,n]=(0,s.useState)(null),l=e||"demo-session";async function d(){t(!0);try{let e=await fetch("/api/video/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:l})}),i=await e.json().catch(()=>void 0);i?.url&&(n(i.url),window.open(i.url,"_blank"))}catch(e){console.error("Failed to join video session",e)}finally{t(!1)}}return(0,i.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937"},children:[(0,i.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Live Operator Video"}),(0,i.jsx)("div",{style:{overflow:"hidden",borderRadius:12,border:"1px solid #1f2937",background:"#0f172a",height:220},children:(0,i.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",padding:16,textAlign:"center"},children:r?"Opening your live session in a new tab…":"Join a live Operator session to collaborate over video."})}),(0,i.jsxs)("div",{style:{marginTop:12,display:"flex",gap:10},children:[(0,i.jsx)("button",{type:"button",onClick:d,disabled:o,style:{borderRadius:10,background:"linear-gradient(90deg, #4f7cff, #2ee6a6, #ffd166)",color:"#0b1224",fontWeight:700,padding:"10px 14px",border:"none",cursor:o?"not-allowed":"pointer",opacity:o?.7:1,minWidth:140},children:o?"Connecting…":"Join live session"}),(0,i.jsx)("div",{style:{color:"#94a3b8",fontSize:12,alignSelf:"center"},children:"Opens a secure room for your Operator and team. Placeholder link for now."})]})]})}function f({sessionId:e,mode:t,level:n}){return(0,s.useEffect)(()=>{window.parent.postMessage({type:"operator:handshake",sessionId:e,mode:t,level:n},"*")},[n,t,e]),(0,i.jsxs)("div",{style:{minHeight:"100vh",background:"#040711",color:"#e5e7eb",padding:"16px"},children:["video"===t&&(0,i.jsx)(h,{}),"chat"===t&&(0,i.jsx)(o,{level:n,sessionId:e}),"monitor"===t&&(0,i.jsx)(a,{sessionId:e,level:n}),"fix-review"===t&&(0,i.jsx)(l,{sessionId:e,level:n}),"autonomy"===t&&(0,i.jsx)(r,{sessionId:e,level:n}),"email-settings"===t&&(0,i.jsx)(p,{sessionId:e,level:n}),"intel"===t&&(0,i.jsx)(g.default,{sessionId:e,level:n})]})}e.s(["default",()=>f],20734)}]);