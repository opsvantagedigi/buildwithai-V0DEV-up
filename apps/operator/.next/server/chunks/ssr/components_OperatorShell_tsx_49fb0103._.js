module.exports=[91946,a=>{"use strict";var b=a.i(64781),c=a.i(89982);function d({level:a,sessionId:d}){let e=d||"demo-session",f=`Memory is active for session ${e}. Responses reference recent history.`,[g,h]=(0,c.useState)([{from:"operator",text:"Hi! I'm your AI Operator. I keep session memory, retrieve site context, and guide onboarding."}]),[i,j]=(0,c.useState)(""),[k,l]=(0,c.useState)(!1),m=(0,c.useRef)(null);async function n(){if(!i.trim())return;let a={from:"user",text:i};h(b=>[...b,a]),j(""),l(!0);try{let a=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:e,message:i})}),b=await a.json().catch(()=>void 0),c=b?.reply??"I'm here to help with onboarding, site info, and monitoring.";h(a=>[...a,{from:"operator",text:c}])}catch(a){console.error("Failed to send chat",a),h(a=>[...a,{from:"operator",text:"Sorry, I couldn't respond right now."}])}finally{l(!1)}}return(0,c.useEffect)(()=>{let a=m.current;a&&(a.scrollTop=a.scrollHeight)},[g,k]),(0,c.useEffect)(()=>{let a=a=>{let b=a.data;b&&("operator:diagnosis"===b.type&&h(a=>[...a,{from:"operator",text:"I've analyzed recent events and prepared fix proposals. Switch to Monitor mode to review."}]),"operator:fix-applied"===b.type&&h(a=>[...a,{from:"operator",text:`Fix ${b.proposalId} applied (risk: ${b.risk}). Snapshot ${b.snapshotId??"n/a"}.`}]),"operator:fix-failed"===b.type&&h(a=>[...a,{from:"operator",text:`Fix ${b.proposalId} failed; rollback ${b.rollbackId??"n/a"}. Reason: ${b.reason??"unknown"}.`}]),"operator:approval-required"===b.type&&h(a=>[...a,{from:"operator",text:`Approval required for fix ${b.proposalId} (risk: ${b.risk}). Review in Fix Review panel.`}]),"operator:rollback-executed"===b.type&&h(a=>[...a,{from:"operator",text:`Rollback ${b.rollbackId} executed. Snapshot ${b.snapshotId??"n/a"}.`}]),"operator:autonomy-state"===b.type&&h(a=>[...a,{from:"operator",text:`Autonomy state updated. Allowed actions: ${b.allowed.join("; ")}.`}]))};return window.addEventListener("message",a),()=>window.removeEventListener("message",a)},[]),(0,b.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937"},children:[(0,b.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Live Operator Chat"}),(0,b.jsx)("p",{style:{margin:0,marginBottom:4,color:"#a5b4fc",fontSize:12},children:"A"===a?"Mode A: observing signals only.":"B"===a?"Mode B: can propose fixes with your approval.":"C"===a?"Mode C: future guarded autonomy (not enabled here).":"Operator mode not specified."}),(0,b.jsx)("p",{style:{margin:0,marginBottom:10,color:"#7dd3fc",fontSize:12},children:f}),(0,b.jsxs)("div",{ref:m,style:{display:"grid",gap:8,color:"#cbd5e1",fontSize:14,maxHeight:240,overflowY:"auto",paddingRight:4},children:[g.map((a,c)=>(0,b.jsxs)("div",{style:{background:"operator"===a.from?"#0f172a":"#111827",padding:10,borderRadius:10},children:[(0,b.jsx)("strong",{style:{color:"#e0e7ff",marginRight:6},children:"operator"===a.from?"Operator:":"You:"}),(0,b.jsx)("span",{children:a.text})]},`${a.from}-${c}`)),k&&(0,b.jsx)("div",{style:{color:"#9ca3af",fontSize:12},children:"Operator is thinking…"})]}),(0,b.jsxs)("div",{style:{marginTop:12,display:"flex",gap:8},children:[(0,b.jsx)("input",{value:i,onChange:a=>j(a.target.value),placeholder:"Ask about onboarding or your site",style:{flex:1,borderRadius:10,border:"1px solid #1f2937",background:"#0f172a",color:"#e5e7eb",padding:"10px 12px"}}),(0,b.jsx)("button",{type:"button",onClick:n,disabled:k,style:{borderRadius:10,background:"linear-gradient(90deg, #4f7cff, #2ee6a6, #ffd166)",color:"#0b1224",fontWeight:700,padding:"10px 14px",border:"none",cursor:k?"not-allowed":"pointer",opacity:k?.7:1,minWidth:88},children:k?"Sending":"Send"})]})]})}function e(a){return"A"===a?["Observe only","Collect diagnostics"]:"B"===a?["Auto-apply low-risk fixes","Request approval for medium-risk","Block high-risk"]:"C"===a?["Guarded autonomy","Snapshot + verify + rollback","Still block restricted areas"]:["Mode unspecified; defaulting to safe observation."]}function f({sessionId:a,level:d}){let[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)("");async function l(b){k(`Rolling back snapshot ${b}...`);try{let c=await fetch("/api/operator/rollback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({snapshotId:b,reason:"Manual rollback from AutonomyPanel"})}),d=await c.json().catch(()=>({}));k(d?.rollbackId?`Rollback ${d.rollbackId} executed.`:"Rollback request completed."),d?.rollbackId&&window.parent.postMessage({type:"operator:rollback-executed",sessionId:a,rollbackId:d.rollbackId,snapshotId:b,reason:"Manual rollback"},"*")}catch(a){console.error("Rollback failed",a),k("Rollback failed to execute.")}}return(0,c.useEffect)(()=>{!async function(){try{let a=await fetch("/api/operator/fix"),b=await a.json().catch(()=>({}));g(Array.isArray(b?.logs)?b.logs:[]),i(Array.isArray(b?.snapshots)?b.snapshots:[])}catch(a){console.error("Failed to load autonomy state",a)}}()},[]),(0,c.useEffect)(()=>{let b=e(d);window.parent.postMessage({type:"operator:autonomy-state",sessionId:a,level:d,allowed:b,recentLogs:f},"*")},[d,f,a]),(0,b.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937",color:"#e5e7eb"},children:[(0,b.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Autonomy Control"}),(0,b.jsxs)("p",{style:{margin:0,marginBottom:6,color:"#a5b4fc",fontSize:12},children:["Session ",a," · Mode ",d??"unspecified"]}),(0,b.jsx)("p",{style:{margin:0,marginBottom:12,color:"#7dd3fc",fontSize:12},children:"Guarded hybrid autonomy: snapshots first, verification always, rollback on failure."}),(0,b.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12,marginBottom:12},children:[(0,b.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Allowed actions"}),(0,b.jsx)("ul",{style:{margin:0,paddingLeft:16,color:"#e5e7eb",fontSize:13},children:e(d).map((a,c)=>(0,b.jsx)("li",{children:a},`allowed-${c}`))})]}),(0,b.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12,marginBottom:12},children:[(0,b.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Recent actions"}),0===f.length&&(0,b.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No audit logs yet."}),(0,b.jsx)("div",{style:{display:"grid",gap:8},children:f.map(a=>(0,b.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,b.jsx)("div",{style:{fontWeight:600},children:a.actionType}),(0,b.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:a.timestamp}),(0,b.jsxs)("div",{style:{fontSize:13,color:"#cbd5e1"},children:["Risk: ",a.risk]}),a.message&&(0,b.jsx)("div",{style:{fontSize:13,color:"#cbd5e1"},children:a.message}),a.snapshotId&&(0,b.jsxs)("div",{style:{fontSize:12,color:"#a5b4fc"},children:["Snapshot: ",a.snapshotId]}),a.rollbackId&&(0,b.jsxs)("div",{style:{fontSize:12,color:"#a5b4fc"},children:["Rollback: ",a.rollbackId]})]},a.id))})]}),(0,b.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,b.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Snapshots"}),0===h.length&&(0,b.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No snapshots captured yet."}),(0,b.jsx)("div",{style:{display:"grid",gap:8},children:h.map(a=>(0,b.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8,display:"grid",gap:4},children:[(0,b.jsx)("div",{style:{fontWeight:600},children:a.id}),(0,b.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:a.timestamp}),(0,b.jsx)("div",{style:{fontSize:13,color:"#cbd5e1"},children:a.reason}),(0,b.jsxs)("div",{style:{fontSize:12,color:"#a5b4fc"},children:["Risk: ",a.riskLevel]}),(0,b.jsxs)("div",{style:{fontSize:12,color:"#cbd5e1"},children:["Files: ",a.affectedFiles.join(", ")||"n/a"]}),(0,b.jsx)("button",{type:"button",onClick:()=>l(a.id),style:{marginTop:4,borderRadius:8,border:"1px solid #f97316",background:"#7c2d12",color:"#ffedd5",padding:"6px 10px",cursor:"pointer",width:"fit-content"},children:"Roll back to snapshot"})]},a.id))})]}),j&&(0,b.jsx)("div",{style:{marginTop:12,fontSize:13,color:"#cbd5e1"},children:j})]})}let g={events:[{id:"evt-fix-1",timestamp:new Date().toISOString(),source:"api",severity:"error",kind:"error",message:"POST /api/forms returned 500"}]};function h({sessionId:a,level:d}){let[e,f]=(0,c.useState)([]),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)({}),[l,m]=(0,c.useState)("");async function n(b,c){m(c?"Applying low/medium risk fix...":"Logging approval requirement...");try{let d=await fetch("/api/operator/fix",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({proposal:b,approved:c,rollbackPlan:j[`rollback-${b.diagnosisId}`]})}),e=await d.json().catch(()=>({}));m(e?.message||`Fix response: ${e?.status??"unknown"}`);let f=(a,b=!0,c)=>{window.parent.postMessage({type:"operator:email-status",category:a,sent:b,reason:c},"*")};if(e?.status==="applied"){let c={type:"operator:fix-applied",sessionId:a,proposalId:b.id,snapshotId:e?.snapshotId,risk:e?.risk??b.risk};window.parent.postMessage(c,"*"),f("fix-applied")}else if(e?.status==="pending-approval"){let c={type:"operator:approval-required",sessionId:a,proposalId:b.id,risk:e?.risk??b.risk};window.parent.postMessage(c,"*"),f("approval-required")}else if(e?.status==="rolled-back"||e?.status==="rejected"){let c={type:"operator:fix-failed",sessionId:a,proposalId:b.id,rollbackId:e?.rollbackId,snapshotId:e?.snapshotId,risk:e?.risk??b.risk,reason:e?.message};window.parent.postMessage(c,"*"),f(e?.status==="rejected"?"high-risk-blocked":"fix-failed")}}catch(a){console.error("Failed to process fix",a),m("Failed to process fix request.")}}return(0,c.useEffect)(()=>{!async function(){try{let a=await fetch("/api/monitoring/diagnose",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),b=await a.json().catch(()=>({})),c={};Array.isArray(b?.rollbacks)&&b.rollbacks.forEach(a=>{c[a.id]=a}),f(Array.isArray(b?.diagnoses)?b.diagnoses:[]),i(Array.isArray(b?.proposals)?b.proposals:[]),k(c)}catch(a){console.error("Failed to load fix proposals",a)}}()},[]),(0,b.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937",color:"#e5e7eb"},children:[(0,b.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Fix Review"}),(0,b.jsx)("p",{style:{margin:0,marginBottom:6,color:"#a5b4fc",fontSize:12},children:"A"===d?"Mode A: observation only; approvals required.":"B"===d?"Mode B: may auto-apply low-risk; approval for medium.":"C"===d?"Mode C: guarded autonomy (still logged).":"Mode unspecified."}),(0,b.jsxs)("p",{style:{margin:0,marginBottom:12,color:"#7dd3fc",fontSize:12},children:["Session ",a,": approve or decline proposed fixes. High-risk fixes are blocked."]}),(0,b.jsxs)("p",{style:{margin:0,marginBottom:12,color:"#94a3b8",fontSize:12},children:["Diagnoses: ",e.length]}),(0,b.jsxs)("div",{style:{display:"grid",gap:12,maxHeight:520,overflowY:"auto",paddingRight:4},children:[0===h.length&&(0,b.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No proposals available."}),h.map(a=>{let c=j[`rollback-${a.diagnosisId}`];return(0,b.jsxs)("div",{style:{background:"#0f172a",borderRadius:10,padding:12,display:"grid",gap:8},children:[(0,b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:8,alignItems:"center"},children:[(0,b.jsxs)("div",{style:{fontWeight:700},children:["Proposal ",a.id]}),(0,b.jsxs)("div",{style:{fontSize:12,color:"#f9a8d4"},children:["Risk: ",a.risk]})]}),(0,b.jsx)("div",{style:{fontSize:13,color:"#cbd5e1"},children:a.expectedImpact}),(0,b.jsx)("ul",{style:{margin:0,paddingLeft:16,color:"#e5e7eb",fontSize:13},children:a.steps.map((c,d)=>(0,b.jsx)("li",{children:c.description},`${a.id}-step-${d}`))}),c&&(0,b.jsxs)("div",{style:{fontSize:12,color:"#a5b4fc"},children:["Rollback plan: ",c.steps.join(" → "),"; verify: ",c.verificationCriteria.join(", ")]}),(0,b.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,b.jsx)("button",{type:"button",onClick:()=>n(a,!0),style:{borderRadius:8,border:"1px solid #22c55e",background:"#064e3b",color:"#ecfdf3",padding:"8px 12px",cursor:"pointer"},children:"Approve & Apply"}),(0,b.jsx)("button",{type:"button",onClick:()=>n(a,!1),style:{borderRadius:8,border:"1px solid #fbbf24",background:"#78350f",color:"#fffbeb",padding:"8px 12px",cursor:"pointer"},children:"Request Approval"})]})]},a.id)})]}),l&&(0,b.jsx)("div",{style:{marginTop:12,fontSize:13,color:"#cbd5e1"},children:l})]})}let i=[{id:"evt-1",timestamp:new Date().toISOString(),source:"edge-worker",severity:"warning",kind:"latency",message:"Homepage TTFB elevated to 450ms",context:{path:"/"}},{id:"evt-2",timestamp:new Date().toISOString(),source:"api",severity:"error",kind:"error",message:"POST /api/contact returned 500 for user 123",context:{path:"/api/contact"}}];function j({sessionId:a,level:d}){let[e]=(0,c.useState)(i),[f,g]=(0,c.useState)([]),[h,j]=(0,c.useState)([]),[k,l]=(0,c.useState)([]);return(0,c.useEffect)(()=>{!async function(){try{let b=await fetch("/api/monitoring/diagnose",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({events:e})}),c=await b.json().catch(()=>({})),d=Array.isArray(c?.diagnoses)?c.diagnoses:[],f=Array.isArray(c?.proposals)?c.proposals:[],h=Array.isArray(c?.rollbacks)?c.rollbacks:[];g(d),j(f),l(h),window.parent.postMessage({type:"operator:diagnosis",sessionId:a,diagnoses:d,proposals:f},"*")}catch(a){console.error("Failed to load monitoring data",a)}}()},[e,a]),(0,b.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937",color:"#e5e7eb"},children:[(0,b.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Monitoring Dashboard"}),(0,b.jsx)("p",{style:{margin:0,marginBottom:6,color:"#a5b4fc",fontSize:12},children:"A"===d?"Mode A: observing only.":"B"===d?"Mode B: proposing fixes; requires your approval.":"C"===d?"Mode C: (future) guarded autonomy; disabled here.":"Mode unspecified."}),(0,b.jsxs)("p",{style:{margin:0,marginBottom:12,color:"#7dd3fc",fontSize:12},children:["Session ",a,": live diagnostics with proposed fixes and rollback plans. No autonomous execution."]}),(0,b.jsxs)("div",{style:{display:"grid",gap:12,maxHeight:520,overflowY:"auto",paddingRight:4},children:[(0,b.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,b.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Recent Events"}),(0,b.jsx)("div",{style:{display:"grid",gap:8},children:e.map(a=>(0,b.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,b.jsx)("div",{style:{fontSize:12,color:"#9ca3af"},children:a.timestamp}),(0,b.jsxs)("div",{style:{fontWeight:600},children:[a.severity.toUpperCase()," · ",a.kind," · ",a.source]}),(0,b.jsx)("div",{style:{fontSize:14},children:a.message})]},a.id))})]}),(0,b.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,b.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Diagnoses"}),(0,b.jsxs)("div",{style:{display:"grid",gap:8},children:[0===f.length&&(0,b.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No diagnoses yet."}),f.map(a=>(0,b.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,b.jsx)("div",{style:{fontWeight:600},children:a.summary}),(0,b.jsxs)("div",{style:{fontSize:12,color:"#9ca3af"},children:["Confidence: ",Math.round(100*a.confidence),"%"]}),(0,b.jsxs)("div",{style:{fontSize:13,color:"#cbd5e1"},children:["Evidence: ",a.evidence.join(" | ")]}),(0,b.jsxs)("div",{style:{fontSize:13,color:"#cbd5e1"},children:["Causes: ",a.suspectedCauses.join(", ")]})]},a.id))]})]}),(0,b.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,b.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Fix Proposals (Mode B)"}),(0,b.jsxs)("div",{style:{display:"grid",gap:8},children:[0===h.length&&(0,b.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No proposals yet."}),h.map(a=>(0,b.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,b.jsxs)("div",{style:{fontWeight:600},children:["Proposal ",a.id]}),(0,b.jsxs)("div",{style:{fontSize:13,color:"#cbd5e1"},children:["Impact: ",a.expectedImpact]}),(0,b.jsxs)("div",{style:{fontSize:13,color:"#cbd5e1"},children:["Risk: ",a.risk]}),(0,b.jsx)("ul",{style:{margin:"6px 0 0 16px",padding:0,color:"#e5e7eb",fontSize:13},children:a.steps.map((c,d)=>(0,b.jsx)("li",{children:c.description},`${a.id}-step-${d}`))}),(0,b.jsxs)("div",{style:{fontSize:12,color:"#9ca3af"},children:["Requires approval: ",a.requiresApproval?"Yes":"No"]})]},a.id))]})]}),(0,b.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,b.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Rollback Plans (Mode B/C)"}),(0,b.jsxs)("div",{style:{display:"grid",gap:8},children:[0===k.length&&(0,b.jsx)("div",{style:{color:"#94a3b8",fontSize:13},children:"No rollback plans yet."}),k.map(a=>(0,b.jsxs)("div",{style:{background:"#111827",padding:8,borderRadius:8},children:[(0,b.jsx)("div",{style:{fontWeight:600},children:a.id}),(0,b.jsx)("ol",{style:{margin:"6px 0 0 16px",padding:0,color:"#e5e7eb",fontSize:13},children:a.steps.map((c,d)=>(0,b.jsx)("li",{children:c},`${a.id}-step-${d}`))})]},a.id))]})]})]})]})}let k=["MAILCOW_SMTP_HOST","MAILCOW_SMTP_PORT","MAILCOW_SMTP_USER","MAILCOW_SMTP_PASS","MAILCOW_SMTP_FROM","MAILCOW_ALERT_RECIPIENTS"];function l({sessionId:a,level:c}){return(0,b.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937",color:"#e5e7eb"},children:[(0,b.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Email Settings"}),(0,b.jsxs)("p",{style:{margin:0,marginBottom:6,color:"#a5b4fc",fontSize:12},children:["Session ",a," · Mode ",c??"unspecified"]}),(0,b.jsx)("p",{style:{margin:0,marginBottom:12,color:"#7dd3fc",fontSize:12},children:"Configure Mailcow SMTP variables for notifications. No third-party SaaS is used."}),(0,b.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12,marginBottom:12},children:[(0,b.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Required environment variables"}),(0,b.jsx)("ul",{style:{margin:0,paddingLeft:16,color:"#e5e7eb",fontSize:13},children:k.map(a=>(0,b.jsx)("li",{children:a},a))})]}),(0,b.jsxs)("section",{style:{background:"#0f172a",borderRadius:10,padding:12},children:[(0,b.jsx)("h3",{style:{margin:0,marginBottom:8,fontSize:14,color:"#c7d2fe"},children:"Notes"}),(0,b.jsxs)("ul",{style:{margin:0,paddingLeft:16,color:"#e5e7eb",fontSize:13},children:[(0,b.jsx)("li",{children:"High-risk fixes are blocked and only send alert emails; they never auto-run."}),(0,b.jsx)("li",{children:"Approval-required fixes send an alert; execution still requires consent."}),(0,b.jsx)("li",{children:"Critical monitoring events and daily summaries send to alert recipients."})]})]})]})}var m=a.i(38674);function n({sessionId:a}){let[d,e]=(0,c.useState)(!1),[f,g]=(0,c.useState)(null),h=a||"demo-session";async function i(){e(!0);try{let a=await fetch("/api/video/session",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:h})}),b=await a.json().catch(()=>void 0);b?.url&&(g(b.url),window.open(b.url,"_blank"))}catch(a){console.error("Failed to join video session",a)}finally{e(!1)}}return(0,b.jsxs)("div",{style:{background:"#0b1224",borderRadius:12,padding:16,border:"1px solid #1f2937"},children:[(0,b.jsx)("h2",{style:{margin:0,marginBottom:8,fontSize:18},children:"Live Operator Video"}),(0,b.jsx)("div",{style:{overflow:"hidden",borderRadius:12,border:"1px solid #1f2937",background:"#0f172a",height:220},children:(0,b.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",color:"#94a3b8",padding:16,textAlign:"center"},children:f?"Opening your live session in a new tab…":"Join a live Operator session to collaborate over video."})}),(0,b.jsxs)("div",{style:{marginTop:12,display:"flex",gap:10},children:[(0,b.jsx)("button",{type:"button",onClick:i,disabled:d,style:{borderRadius:10,background:"linear-gradient(90deg, #4f7cff, #2ee6a6, #ffd166)",color:"#0b1224",fontWeight:700,padding:"10px 14px",border:"none",cursor:d?"not-allowed":"pointer",opacity:d?.7:1,minWidth:140},children:d?"Connecting…":"Join live session"}),(0,b.jsx)("div",{style:{color:"#94a3b8",fontSize:12,alignSelf:"center"},children:"Opens a secure room for your Operator and team. Placeholder link for now."})]})]})}function o({sessionId:a,mode:e,level:g}){return(0,c.useEffect)(()=>{window.parent.postMessage({type:"operator:handshake",sessionId:a,mode:e,level:g},"*")},[g,e,a]),(0,b.jsxs)("div",{style:{minHeight:"100vh",background:"#040711",color:"#e5e7eb",padding:"16px"},children:["video"===e&&(0,b.jsx)(n,{}),"chat"===e&&(0,b.jsx)(d,{level:g,sessionId:a}),"monitor"===e&&(0,b.jsx)(j,{sessionId:a,level:g}),"fix-review"===e&&(0,b.jsx)(h,{sessionId:a,level:g}),"autonomy"===e&&(0,b.jsx)(f,{sessionId:a,level:g}),"email-settings"===e&&(0,b.jsx)(l,{sessionId:a,level:g}),"intel"===e&&(0,b.jsx)(m.default,{sessionId:a,level:g})]})}a.s(["default",()=>o],91946)}];

//# sourceMappingURL=components_OperatorShell_tsx_49fb0103._.js.map