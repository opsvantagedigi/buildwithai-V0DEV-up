(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,64820,(e,t,s)=>{},48391,(e,t,s)=>{var a=e.i(37826);e.r(64820);var n=e.r(75441),r=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(n);function i(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function l(e,t,s){return t&&i(e.prototype,t),s&&i(e,s),e}var o=void 0!==a.default&&a.default.env&&!0,c=function(e){return"[object String]"===Object.prototype.toString.call(e)},d=function(){function e(e){var t=void 0===e?{}:e,s=t.name,a=void 0===s?"stylesheet":s,n=t.optimizeForSpeed,r=void 0===n?o:n;u(c(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",u("boolean"==typeof r,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=r,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var i="undefined"!=typeof window&&document.querySelector('meta[property="csp-nonce"]');this._nonce=i?i.getAttribute("content"):null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){u("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),u(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;if(u(!this._injected,"sheet already injected"),this._injected=!0,"undefined"!=typeof window&&this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(o||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){if(u(c(e),"`insertRule` accepts only strings"),"undefined"==typeof window)return"number"!=typeof t&&(t=this._serverSheet.cssRules.length),this._serverSheet.insertRule(e,t),this._rulesCount++;if(this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return o||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var a=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,a))}return this._rulesCount++},t.replaceRule=function(e,t){if(this._optimizeForSpeed||"undefined"==typeof window){var s="undefined"!=typeof window?this.getSheet():this._serverSheet;if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(a){o||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var a=this._tags[e];u(a,"old rule at index `"+e+"` not found"),a.textContent=t}return e},t.deleteRule=function(e){if("undefined"==typeof window)return void this._serverSheet.deleteRule(e);if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];u(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},t.flush=function(){this._injected=!1,this._rulesCount=0,"undefined"!=typeof window?(this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]):this._serverSheet.cssRules=[]},t.cssRules=function(){var e=this;return"undefined"==typeof window?this._serverSheet.cssRules:this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},t.makeStyleTag=function(e,t,s){t&&u(c(t),"makeStyleTag accepts only strings as second parameter");var a=document.createElement("style");this._nonce&&a.setAttribute("nonce",this._nonce),a.type="text/css",a.setAttribute("data-"+e,""),t&&a.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return s?n.insertBefore(a,s):n.appendChild(a),a},l(e,[{key:"length",get:function(){return this._rulesCount}}]),e}();function u(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var h=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},p=function(e){return e.replace(/\/style/gi,"\\/style")},f={};function x(e,t){if(!t)return"jsx-"+e;var s=String(t),a=e+s;return f[a]||(f[a]="jsx-"+h(e+"-"+s)),f[a]}function m(e,t){var s=/__jsx-style-dynamic-selector/g;"undefined"==typeof window&&(t=p(t));var a=e+t;return f[a]||(f[a]=t.replace(s,e)),f[a]}function y(e,t){return void 0===t&&(t={}),e.map(function(e){var s=e[0],a=e[1];return r.default.createElement("style",{id:"__"+s,key:"__"+s,nonce:t.nonce?t.nonce:void 0,dangerouslySetInnerHTML:{__html:a}})})}var g=function(){function e(e){var t=void 0===e?{}:e,s=t.styleSheet,a=void 0===s?null:s,n=t.optimizeForSpeed,r=void 0!==n&&n;this._sheet=a||new d({name:"styled-jsx",optimizeForSpeed:r}),this._sheet.inject(),a&&"boolean"==typeof r&&(this._sheet.setOptimizeForSpeed(r),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),"undefined"==typeof window||this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),a=s.styleId,n=s.rules;if(a in this._instancesCounts){this._instancesCounts[a]+=1;return}var r=n.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[a]=r,this._instancesCounts[a]=1},t.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(v(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var a=this._fromServer&&this._fromServer[s];a?(a.parentNode.removeChild(a),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){return y(this.cssRules(),e)},t.getIdAndRules=function(e){var t=e.children,s=e.dynamic,a=e.id;if(s){var n=x(a,s);return{styleId:n,rules:Array.isArray(t)?t.map(function(e){return m(n,e)}):[m(n,t)]}}return{styleId:x(a),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}();function v(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}var b=n.createContext(null);function j(){return new g}function S(e){var t=e.registry,s=e.children,a=n.useContext(b),i=n.useState(function(){return a||t||j()})[0];return r.default.createElement(b.Provider,{value:i},s)}function _(){return n.useContext(b)}b.displayName="StyleSheetContext";var w=r.default.useInsertionEffect||r.default.useLayoutEffect,N="undefined"!=typeof window?j():void 0;function R(e){var t=N||_();return t&&("undefined"==typeof window?t.add(e):w(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)])),null}R.dynamic=function(e){return e.map(function(e){return x(e[0],e[1])}).join(" ")},s.StyleRegistry=S,s.createStyleRegistry=j,s.style=R,s.useStyleRegistry=_},59411,(e,t,s)=>{t.exports=e.r(48391).style},97144,e=>{"use strict";var t=e.i(18151),s=e.i(59411);function a({title:e,kicker:a,subtitle:n}){return(0,t.jsxs)("header",{className:"jsx-9dbff8ec5a1b2133 max-w-6xl mx-auto px-6 section-py-32",children:[a&&(0,t.jsx)("p",{className:"jsx-9dbff8ec5a1b2133 text-sm text-sky-400 font-semibold",children:a}),(0,t.jsx)("h1",{className:"jsx-9dbff8ec5a1b2133 mt-4 text-5xl sm:text-6xl font-extrabold leading-tight gradient-text fade-up",children:e}),n&&(0,t.jsx)("p",{style:{animationDelay:"120ms"},className:"jsx-9dbff8ec5a1b2133 mt-6 text-lg text-[rgba(255,255,255,0.85)] max-w-3xl fade-up",children:n}),(0,t.jsx)(s.default,{id:"9dbff8ec5a1b2133",children:"@keyframes fadeUp{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}.fade-up.jsx-9dbff8ec5a1b2133{opacity:0;animation:.6s forwards fadeUp}"})]})}e.s(["default",()=>a])},18353,e=>{"use strict";var t=e.i(18151);function s({children:e,href:s="/builder"}){return(0,t.jsx)("section",{className:"section-py-32 bg-[var(--color-base)] text-white",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-6 text-center",children:(0,t.jsxs)("div",{className:"mx-auto max-w-3xl card p-8",children:[(0,t.jsx)("h3",{className:"text-2xl font-bold gradient-text",children:"Ready to build with AI?"}),(0,t.jsx)("p",{className:"mt-3 text-sm text-[rgba(255,255,255,0.85)]",children:"Start a free trial and launch a production-ready site in minutes."}),(0,t.jsx)("div",{className:"mt-6",children:(0,t.jsx)("a",{href:s,className:"inline-block bg-white text-black px-6 py-3 rounded-md font-semibold shadow-lg transition transform hover:scale-105 hover:drop-shadow-[0_0_20px_rgba(11,179,138,0.6)]",children:e??"Get Started Free"})})]})})})}e.s(["default",()=>s])},35196,e=>{"use strict";var t=e.i(18151);function s({items:e}){return(0,t.jsxs)("section",{className:"max-w-4xl mx-auto px-6 section-py-32",children:[(0,t.jsx)("h3",{className:"text-xl font-bold gradient-text",children:"Frequently asked questions"}),(0,t.jsx)("div",{className:"mt-6 space-y-4",children:e.map(e=>(0,t.jsxs)("details",{className:"card p-4 rounded-lg",children:[(0,t.jsx)("summary",{className:"font-medium gradient-text",children:e.q}),(0,t.jsx)("div",{className:"mt-2 text-sm text-[rgba(255,255,255,0.85)]",children:e.a})]},e.q))})]})}e.s(["default",()=>s])},63933,e=>{"use strict";var t=e.i(18151),s=e.i(59411);function a({items:e}){return(0,t.jsxs)("section",{className:"jsx-850f5a269e7b08e7 max-w-6xl mx-auto px-6 section-py-32",children:[(0,t.jsx)("div",{className:"jsx-850f5a269e7b08e7 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 grid-gap-8",children:e.map((e,s)=>(0,t.jsxs)("article",{style:{animation:"fadeUp 600ms ease forwards",animationDelay:`${80*s}ms`,opacity:0},className:"jsx-850f5a269e7b08e7 card p-6 rounded-lg transition-transform duration-300 hover:scale-105 hover:shadow-[0_10px_30px_rgba(11,179,138,0.12)]",children:[(0,t.jsx)("h3",{className:"jsx-850f5a269e7b08e7 font-semibold text-lg gradient-text",children:e.title}),(0,t.jsx)("p",{className:"jsx-850f5a269e7b08e7 mt-2 text-sm text-[rgba(255,255,255,0.85)]",children:e.desc})]},e.title))}),(0,t.jsx)(s.default,{id:"850f5a269e7b08e7",children:"@keyframes fadeUp{0%{opacity:0;transform:translateY(12px)}to{opacity:1;transform:translateY(0)}}"})]})}e.s(["default",()=>a])},91146,__turbopack_context__=>{"use strict";var __TURBOPACK__imported__module__18151__=__turbopack_context__.i(18151),__TURBOPACK__imported__module__75441__=__turbopack_context__.i(75441),__TURBOPACK__imported__module__18151__1=__TURBOPACK__imported__module__18151__,__TURBOPACK__imported__module__18151__2=__TURBOPACK__imported__module__18151__,__TURBOPACK__imported__module__97144__=__turbopack_context__.i(97144),__TURBOPACK__imported__module__63933__=__turbopack_context__.i(63933),__TURBOPACK__imported__module__18353__=__turbopack_context__.i(18353),__TURBOPACK__imported__module__35196__=__turbopack_context__.i(35196),__TURBOPACK__imported__module__18151__3=__TURBOPACK__imported__module__18151__;function SocialProof({logos:e=[]}){return(0,__TURBOPACK__imported__module__18151__3.jsx)("section",{className:"section-py-32",children:(0,__TURBOPACK__imported__module__18151__3.jsxs)("div",{className:"max-w-6xl mx-auto px-6",children:[(0,__TURBOPACK__imported__module__18151__3.jsx)("h3",{className:"text-lg font-medium gradient-text",children:"Trusted by teams and creators"}),(0,__TURBOPACK__imported__module__18151__3.jsx)("div",{className:"mt-6 flex flex-wrap items-center gap-6",children:0===e.length?(0,__TURBOPACK__imported__module__18151__3.jsx)("p",{className:"text-sm text-[rgba(255,255,255,0.85)]",children:"Join thousands of builders using BUILD WITH AI."}):e.map((e,t)=>(0,__TURBOPACK__imported__module__18151__3.jsx)("img",{src:e,alt:`logo-${t}`,className:"h-8 opacity-80"},t))})]})})}function BlockRenderer({block:e}){let{type:t,data:s}=e;return"hero"===t?(0,__TURBOPACK__imported__module__18151__2.jsx)(__TURBOPACK__imported__module__97144__.default,{...s||{}}):"features"===t?(0,__TURBOPACK__imported__module__18151__2.jsx)(__TURBOPACK__imported__module__63933__.default,{items:s?.features||[]}):"cta"===t?(0,__TURBOPACK__imported__module__18151__2.jsx)(__TURBOPACK__imported__module__18353__.default,{...s||{}}):"faq"===t?(0,__TURBOPACK__imported__module__18151__2.jsx)(__TURBOPACK__imported__module__35196__.default,{items:s?.items||[]}):"social-proof"===t?(0,__TURBOPACK__imported__module__18151__2.jsx)(SocialProof,{...s||{}}):"text"===t?(0,__TURBOPACK__imported__module__18151__2.jsx)("div",{className:"prose",dangerouslySetInnerHTML:{__html:s?.html||"<p>Text block</p>"}}):(0,__TURBOPACK__imported__module__18151__2.jsxs)("div",{className:"text-sm text-slate-500",children:["Unknown block type: ",t]})}var __TURBOPACK__imported__module__18151__4=__TURBOPACK__imported__module__18151__;function PageNavigator(){return(0,__TURBOPACK__imported__module__18151__4.jsxs)("div",{className:"flex items-center justify-between",children:[(0,__TURBOPACK__imported__module__18151__4.jsx)("div",{className:"text-sm text-slate-600",children:"Page: Home"}),(0,__TURBOPACK__imported__module__18151__4.jsxs)("div",{className:"flex gap-2",children:[(0,__TURBOPACK__imported__module__18151__4.jsx)("button",{className:"gds-btn",children:"Add page"}),(0,__TURBOPACK__imported__module__18151__4.jsx)("button",{className:"gds-btn",children:"Rename"})]})]})}function Canvas({blocks:e=[],className:t="",selectedBlockId:s,onSelectBlock:a}){return(0,__TURBOPACK__imported__module__18151__1.jsxs)("div",{className:`bg-white rounded-lg shadow p-6 ${t}`,children:[(0,__TURBOPACK__imported__module__18151__1.jsx)("div",{className:"mb-4",children:(0,__TURBOPACK__imported__module__18151__1.jsx)(PageNavigator,{})}),(0,__TURBOPACK__imported__module__18151__1.jsxs)("div",{className:"space-y-6",children:[0===e.length&&(0,__TURBOPACK__imported__module__18151__1.jsx)("div",{className:"text-sm text-slate-500",children:"Empty page — add a block."}),e.map(e=>{let t=e.id===s;return(0,__TURBOPACK__imported__module__18151__1.jsxs)("div",{className:["border rounded p-3 cursor-pointer transition-colors",t?"border-slate-900 ring-2 ring-slate-900/40":"border-slate-200 hover:border-slate-300"].join(" "),onClick:()=>a?.(e.id),children:[(0,__TURBOPACK__imported__module__18151__1.jsxs)("div",{className:[t?"bg-slate-900 text-white":"bg-slate-200 text-slate-700","absolute -mt-6 ml-3 text-[10px] px-1.5 py-0.5 rounded uppercase tracking-wide"].join(" "),children:[e.type,t?" • selected":""]}),(0,__TURBOPACK__imported__module__18151__1.jsx)(BlockRenderer,{block:e})]},e.id)})]})]})}var __TURBOPACK__imported__module__18151__5=__TURBOPACK__imported__module__18151__;function Sidebar({blocks:e,selectedBlockId:t,onAddBlock:s,onRemoveBlock:a,onSelectBlock:n}){let r=[{type:"hero",label:"Hero"},{type:"features",label:"Features"},{type:"testimonials",label:"Testimonials"},{type:"faq",label:"FAQ"},{type:"cta",label:"Call to Action"}];return(0,__TURBOPACK__imported__module__18151__5.jsxs)("aside",{className:"w-72 border-r bg-slate-50 p-4 flex flex-col gap-4",children:[(0,__TURBOPACK__imported__module__18151__5.jsxs)("div",{children:[(0,__TURBOPACK__imported__module__18151__5.jsx)("h2",{className:"text-sm font-semibold mb-2",children:"Add sections"}),(0,__TURBOPACK__imported__module__18151__5.jsx)("div",{className:"grid grid-cols-1 gap-2",children:r.map(e=>(0,__TURBOPACK__imported__module__18151__5.jsx)("button",{className:"border rounded px-3 py-2 text-xs text-left bg-white hover:bg-slate-100",onClick:()=>s(e.type),children:e.label},e.type))})]}),(0,__TURBOPACK__imported__module__18151__5.jsxs)("div",{className:"flex-1",children:[(0,__TURBOPACK__imported__module__18151__5.jsx)("h2",{className:"text-sm font-semibold mb-2",children:"Sections"}),0===e.length?(0,__TURBOPACK__imported__module__18151__5.jsx)("p",{className:"text-xs text-slate-400",children:"No sections yet. Add a hero or features to start."}):(0,__TURBOPACK__imported__module__18151__5.jsx)("ul",{className:"space-y-1",children:e.map((e,s)=>{let r=e.id===t;return(0,__TURBOPACK__imported__module__18151__5.jsxs)("li",{className:["flex items-center justify-between text-xs border rounded px-2 py-1 cursor-pointer",r?"bg-slate-900 text-white border-slate-900":"bg-white hover:bg-slate-100 border-slate-200"].join(" "),onClick:()=>n?.(e.id),children:[(0,__TURBOPACK__imported__module__18151__5.jsxs)("span",{className:"truncate",children:[s+1,". ",e.type,r&&" • editing"]}),(0,__TURBOPACK__imported__module__18151__5.jsx)("button",{className:"text-[10px] "+(r?"text-slate-200":"text-red-500"),onClick:t=>{t.stopPropagation(),a(e.id)},children:"Remove"})]},e.id)})})]})]})}var __TURBOPACK__imported__module__18151__6=__TURBOPACK__imported__module__18151__,__TURBOPACK__imported__module__75441__1=__TURBOPACK__imported__module__75441__,__TURBOPACK__imported__module__18151__7=__TURBOPACK__imported__module__18151__,__TURBOPACK__imported__module__75441__2=__TURBOPACK__imported__module__75441__;function ImageField({label:e,value:t,onChange:s}){let a=(0,__TURBOPACK__imported__module__75441__2.useRef)(null);function n(e){let t=e.target.files?.[0];if(!t)return s(null);let a=new FileReader;a.onload=()=>{s(a.result)},a.readAsDataURL(t)}return(0,__TURBOPACK__imported__module__18151__7.jsxs)("div",{className:"space-y-1",children:[(0,__TURBOPACK__imported__module__18151__7.jsx)("label",{className:"block text-xs font-medium text-slate-600",children:e}),t&&(0,__TURBOPACK__imported__module__18151__7.jsx)("img",{src:t,alt:"Preview",className:"w-full h-auto rounded border mb-2"}),(0,__TURBOPACK__imported__module__18151__7.jsx)("input",{ref:a,type:"file",accept:"image/*",className:"text-xs",onChange:n})]})}var __TURBOPACK__imported__module__18151__8=__TURBOPACK__imported__module__18151__;function TextField({label:e,value:t,onChange:s}){return(0,__TURBOPACK__imported__module__18151__8.jsxs)("label",{className:"block text-xs font-medium text-slate-600",children:[e,(0,__TURBOPACK__imported__module__18151__8.jsx)("input",{className:"mt-1 w-full border rounded px-2 py-1 text-sm",value:t??"",onChange:e=>s(e.target.value)})]})}var __TURBOPACK__imported__module__18151__9=__TURBOPACK__imported__module__18151__;function FeatureListEditor({items:e,onChange:t}){function s(s,a,n){let r=[...e];r[s]={...r[s],[a]:n},t(r)}function a(){t([...e,{title:"",description:""}])}function n(s){t(e.filter((e,t)=>t!==s))}return(0,__TURBOPACK__imported__module__18151__9.jsxs)("div",{className:"space-y-3",children:[(0,__TURBOPACK__imported__module__18151__9.jsx)("h3",{className:"text-xs font-semibold text-slate-600",children:"Features"}),e.map((e,t)=>(0,__TURBOPACK__imported__module__18151__9.jsxs)("div",{className:"border rounded p-3 bg-slate-50 space-y-2 relative",children:[(0,__TURBOPACK__imported__module__18151__9.jsx)("button",{className:"absolute top-2 right-2 text-red-500 text-xs",onClick:()=>n(t),children:"✕"}),(0,__TURBOPACK__imported__module__18151__9.jsx)("input",{className:"w-full border rounded px-2 py-1 text-xs",placeholder:"Feature title",value:e.title,onChange:e=>s(t,"title",e.target.value)}),(0,__TURBOPACK__imported__module__18151__9.jsx)("textarea",{className:"w-full border rounded px-2 py-1 text-xs",placeholder:"Feature description",value:e.description,onChange:e=>s(t,"description",e.target.value)})]},t)),(0,__TURBOPACK__imported__module__18151__9.jsx)("button",{className:"px-2 py-1 text-xs bg-slate-200 rounded hover:bg-slate-300",onClick:a,children:"+ Add Feature"})]})}var __TURBOPACK__imported__module__18151__10=__TURBOPACK__imported__module__18151__;function FAQEditor({items:e,onChange:t}){function s(s,a,n){let r=[...e];r[s]={...r[s],[a]:n},t(r)}function a(){t([...e,{question:"",answer:""}])}function n(s){t(e.filter((e,t)=>t!==s))}return(0,__TURBOPACK__imported__module__18151__10.jsxs)("div",{className:"space-y-3",children:[(0,__TURBOPACK__imported__module__18151__10.jsx)("h3",{className:"text-xs font-semibold text-slate-600",children:"FAQ Items"}),e.map((e,t)=>(0,__TURBOPACK__imported__module__18151__10.jsxs)("div",{className:"border rounded p-3 bg-slate-50 space-y-2 relative",children:[(0,__TURBOPACK__imported__module__18151__10.jsx)("button",{className:"absolute top-2 right-2 text-red-500 text-xs",onClick:()=>n(t),children:"✕"}),(0,__TURBOPACK__imported__module__18151__10.jsx)("input",{className:"w-full border rounded px-2 py-1 text-xs",placeholder:"Question",value:e.question,onChange:e=>s(t,"question",e.target.value)}),(0,__TURBOPACK__imported__module__18151__10.jsx)("textarea",{className:"w-full border rounded px-2 py-1 text-xs",placeholder:"Answer",value:e.answer,onChange:e=>s(t,"answer",e.target.value)})]},t)),(0,__TURBOPACK__imported__module__18151__10.jsx)("button",{className:"px-2 py-1 text-xs bg-slate-200 rounded hover:bg-slate-300",onClick:a,children:"+ Add FAQ Item"})]})}var __TURBOPACK__imported__module__18151__11=__TURBOPACK__imported__module__18151__;function TestimonialEditor({testimonials:e,onChange:t}){function s(s,a,n){let r=[...e];r[s]={...r[s],[a]:n},t(r)}function a(){t([...e,{name:"",quote:"",avatar:""}])}function n(s){t(e.filter((e,t)=>t!==s))}return(0,__TURBOPACK__imported__module__18151__11.jsxs)("div",{className:"space-y-3",children:[(0,__TURBOPACK__imported__module__18151__11.jsx)("h3",{className:"text-xs font-semibold text-slate-600",children:"Testimonials"}),e.map((e,t)=>(0,__TURBOPACK__imported__module__18151__11.jsxs)("div",{className:"border rounded p-3 bg-slate-50 space-y-2 relative",children:[(0,__TURBOPACK__imported__module__18151__11.jsx)("button",{className:"absolute top-2 right-2 text-red-500 text-xs",onClick:()=>n(t),children:"✕"}),(0,__TURBOPACK__imported__module__18151__11.jsx)("input",{className:"w-full border rounded px-2 py-1 text-xs",placeholder:"Name",value:e.name,onChange:e=>s(t,"name",e.target.value)}),(0,__TURBOPACK__imported__module__18151__11.jsx)("textarea",{className:"w-full border rounded px-2 py-1 text-xs",placeholder:"Quote",value:e.quote,onChange:e=>s(t,"quote",e.target.value)}),(0,__TURBOPACK__imported__module__18151__11.jsx)("input",{className:"w-full border rounded px-2 py-1 text-xs",placeholder:"Avatar URL",value:e.avatar,onChange:e=>s(t,"avatar",e.target.value)})]},t)),(0,__TURBOPACK__imported__module__18151__11.jsx)("button",{className:"px-2 py-1 text-xs bg-slate-200 rounded hover:bg-slate-300",onClick:a,children:"+ Add Testimonial"})]})}var __TURBOPACK__imported__module__18151__12=__TURBOPACK__imported__module__18151__;function ToneSelector({value:e,onChange:t}){let s=["professional","friendly","bold","playful","luxury"];return(0,__TURBOPACK__imported__module__18151__12.jsxs)("div",{className:"space-y-1",children:[(0,__TURBOPACK__imported__module__18151__12.jsx)("label",{className:"block text-xs font-medium text-slate-600",children:"Tone / Style"}),(0,__TURBOPACK__imported__module__18151__12.jsxs)("select",{className:"w-full border rounded px-2 py-1 text-sm",value:e??"",onChange:e=>t(e.target.value),children:[(0,__TURBOPACK__imported__module__18151__12.jsx)("option",{value:"",children:"Default"}),s.map(e=>(0,__TURBOPACK__imported__module__18151__12.jsx)("option",{value:e,children:e},e))]})]})}var __TURBOPACK__imported__module__18151__13=__TURBOPACK__imported__module__18151__,__TURBOPACK__imported__module__75441__3=__TURBOPACK__imported__module__75441__;function AIRewriteButton({text:e,onRewrite:t}){let[s,a]=(0,__TURBOPACK__imported__module__75441__3.useState)(!1);async function n(){if(e){a(!0);try{let s=await fetch("/api/ai/content",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slot:"rewrite",context:{text:e}})}),a=await s.json();a?.text&&t(a.text)}catch(e){console.error("[AI_REWRITE_ERROR]",e)}finally{a(!1)}}}return(0,__TURBOPACK__imported__module__18151__13.jsx)("button",{onClick:n,disabled:s,className:"text-xs px-2 py-1 bg-slate-200 rounded hover:bg-slate-300",children:s?"Rewriting…":"Rewrite with AI"})}function BlockEditorSidebar({block:e,onChange:t,onRegenerate:s,onMoveUp:a,onMoveDown:n,onDelete:r}){if(!e)return(0,__TURBOPACK__imported__module__18151__6.jsx)("aside",{className:"w-96 border-l bg-slate-50 p-6 text-sm text-slate-500",children:"Select a section to edit its content."});let[i,l]=(0,__TURBOPACK__imported__module__75441__1.useState)(e.data??{});function o(e,s){let a={...i,[e]:s};l(a),t(a)}function c(){if(!e)return null;switch(e.type){case"hero":return(0,__TURBOPACK__imported__module__18151__6.jsxs)("div",{className:"space-y-4",children:[(0,__TURBOPACK__imported__module__18151__6.jsx)(TextField,{label:"Heading",value:i.heading,onChange:e=>o("heading",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(AIRewriteButton,{text:i.heading,onRewrite:e=>o("heading",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(TextField,{label:"Subheading",value:i.subheading,onChange:e=>o("subheading",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(AIRewriteButton,{text:i.subheading,onRewrite:e=>o("subheading",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(TextField,{label:"Primary CTA",value:i.primaryCta,onChange:e=>o("primaryCta",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(TextField,{label:"Secondary CTA",value:i.secondaryCta,onChange:e=>o("secondaryCta",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(ImageField,{label:"Hero Image",value:i.image,onChange:e=>o("image",e)})]});case"features":return(0,__TURBOPACK__imported__module__18151__6.jsxs)("div",{className:"space-y-4",children:[(0,__TURBOPACK__imported__module__18151__6.jsx)(TextField,{label:"Title",value:i.title,onChange:e=>o("title",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(AIRewriteButton,{text:i.title,onRewrite:e=>o("title",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(TextField,{label:"Subtitle",value:i.subtitle,onChange:e=>o("subtitle",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(AIRewriteButton,{text:i.subtitle,onRewrite:e=>o("subtitle",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(FeatureListEditor,{items:i.items??[],onChange:e=>o("items",e)})]});case"faq":return(0,__TURBOPACK__imported__module__18151__6.jsx)(FAQEditor,{items:i.items??[],onChange:e=>o("items",e)});case"testimonials":return(0,__TURBOPACK__imported__module__18151__6.jsx)(TestimonialEditor,{testimonials:i.testimonials??[],onChange:e=>o("testimonials",e)});case"cta":return(0,__TURBOPACK__imported__module__18151__6.jsxs)("div",{className:"space-y-4",children:[(0,__TURBOPACK__imported__module__18151__6.jsx)(TextField,{label:"Heading",value:i.heading,onChange:e=>o("heading",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(AIRewriteButton,{text:i.heading,onRewrite:e=>o("heading",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(TextField,{label:"Subheading",value:i.subheading,onChange:e=>o("subheading",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(AIRewriteButton,{text:i.subheading,onRewrite:e=>o("subheading",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(TextField,{label:"Primary CTA",value:i.primaryCta,onChange:e=>o("primaryCta",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)(TextField,{label:"Secondary CTA",value:i.secondaryCta,onChange:e=>o("secondaryCta",e)})]});default:return(0,__TURBOPACK__imported__module__18151__6.jsxs)("p",{className:"text-xs text-slate-500",children:["No editor available for block type: ",e.type]})}}return(0,__TURBOPACK__imported__module__18151__6.jsxs)("aside",{className:"w-96 border-l bg-white p-6 overflow-y-auto",children:[(0,__TURBOPACK__imported__module__18151__6.jsx)("h2",{className:"text-lg font-semibold mb-4",children:"Edit Section"}),(0,__TURBOPACK__imported__module__18151__6.jsx)("div",{className:"space-y-6",children:c()}),(0,__TURBOPACK__imported__module__18151__6.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,__TURBOPACK__imported__module__18151__6.jsx)(ToneSelector,{value:i.tone,onChange:e=>o("tone",e)}),(0,__TURBOPACK__imported__module__18151__6.jsx)("button",{onClick:async()=>{try{let s=await fetch("/api/ai/section/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({section:{id:e.id,type:e.type,data:i},context:{tone:i.tone}})}),a=await s.json();if(a?.section?.data){let e={...i,...a.section.data};l(e),t(e)}}catch(e){console.error("[AI_REGENERATE_ERROR]",e)}},className:"w-full px-4 py-2 rounded bg-slate-900 text-white text-sm",children:"Regenerate with AI"}),(0,__TURBOPACK__imported__module__18151__6.jsxs)("div",{className:"flex items-center justify-between text-xs text-slate-600",children:[(0,__TURBOPACK__imported__module__18151__6.jsx)("button",{onClick:a,className:"hover:text-slate-900",children:"↑ Move Up"}),(0,__TURBOPACK__imported__module__18151__6.jsx)("button",{onClick:n,className:"hover:text-slate-900",children:"↓ Move Down"}),(0,__TURBOPACK__imported__module__18151__6.jsx)("button",{onClick:()=>{t({__duplicate__:!0,...i})},className:"hover:text-slate-900",children:"Duplicate"}),(0,__TURBOPACK__imported__module__18151__6.jsx)("button",{onClick:r,className:"text-red-500 hover:text-red-700",children:"Delete"})]})]})]})}var __TURBOPACK__imported__module__37826__=__turbopack_context__.i(37826);let kvClient=null,WRITE_ENABLED=!1,READ_ONLY_ONLY=!1,NO_WRITE_FALLBACK=!1;try{__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_URL||(__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_URL=__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_URL||__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_URL),__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_TOKEN||(__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_TOKEN=__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_WRITE_TOKEN||__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_TOKEN||__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_READ_ONLY_TOKEN||__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_TOKEN),WRITE_ENABLED=!!(__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_WRITE_TOKEN||__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_TOKEN),READ_ONLY_ONLY=!!__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_READ_ONLY_TOKEN&&!WRITE_ENABLED,NO_WRITE_FALLBACK="true"===__TURBOPACK__imported__module__37826__.default.env.NO_WRITE_FALLBACK||READ_ONLY_ONLY;let earlyUpstashUrl=__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_URL,earlyUpstashToken=__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_TOKEN;if(earlyUpstashUrl&&earlyUpstashToken){let base=earlyUpstashUrl.replace(/\/$/,"");kvClient={async get(e){try{let t=await fetch(`${base}/get/${encodeURIComponent(e)}`,{headers:{Authorization:`Bearer ${earlyUpstashToken}`}});if(!t.ok)return null;return(await t.json()).result??null}catch(e){return console.error("[KV] early REST get() failed:",e),null}},async set(e,t){if(NO_WRITE_FALLBACK)return{skippedReadOnly:!0};try{return await fetch(`${base}/set/${encodeURIComponent(e)}`,{method:"POST",headers:{Authorization:`Bearer ${earlyUpstashToken}`,"Content-Type":"application/json"},body:JSON.stringify({value:"string"==typeof t?t:JSON.stringify(t)})}),!0}catch(e){return console.error("[KV] early REST set() failed:",e),null}},async expire(e,t){if(NO_WRITE_FALLBACK)return null;try{return await fetch(`${base}/expire/${encodeURIComponent(e)}`,{method:"POST",headers:{Authorization:`Bearer ${earlyUpstashToken}`,"Content-Type":"application/json"},body:JSON.stringify({ttl:t})}),!0}catch(e){return console.error("[KV] early REST expire() failed:",e),null}}}}let moduleName="@vercel/kv",kvModule=eval("require")(moduleName),candidate=kvModule?.kv??kvModule?.default??kvModule;if("function"==typeof candidate){let factory=candidate,makeLazy=e=>{let t=null,s=!1,a=async()=>{if(t||s)return t;s=!0;try{let s=__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_URL||__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_URL,a=__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_TOKEN||__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_TOKEN;(t=await e({url:s,token:a}))&&"function"==typeof t.get&&"function"==typeof t.set||(t=null)}catch(e){t=null}return t};return{async get(e){let t=await a();if(!t)throw Error("kv_not_initialized");return t.get(e)},async set(e,t){let s=await a();if(!s)throw Error("kv_not_initialized");return s.set(e,t)},async expire(e,t){let s=await a();if(!s)throw Error("kv_not_initialized");return"function"==typeof s.expire?s.expire(e,t):null}}};try{candidate=makeLazy(factory)}catch(err){}}if(candidate&&"function"==typeof candidate.get&&"function"==typeof candidate.set)kvClient=candidate;else throw console.warn("[KV] Falling back to Upstash REST wrapper: invalid client shape",Object.keys(kvModule||{})),Error("invalid_kv_client_shape")}catch(e){let upstashUrl=__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_URL,upstashToken=__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_TOKEN;if(upstashUrl&&upstashToken){let base=upstashUrl.replace(/\/$/,"");kvClient={async get(e){try{let t=await fetch(`${base}/get/${encodeURIComponent(e)}`,{headers:{Authorization:`Bearer ${upstashToken}`}});if(!t.ok)return null;return(await t.json()).result??null}catch(e){return console.error("[KV] get() failed:",e),null}},async set(e,t){if(NO_WRITE_FALLBACK)return{skippedReadOnly:!0};try{return await fetch(`${base}/set/${encodeURIComponent(e)}`,{method:"POST",headers:{Authorization:`Bearer ${upstashToken}`,"Content-Type":"application/json"},body:JSON.stringify({value:"string"==typeof t?t:JSON.stringify(t)})}),!0}catch(e){return console.error("[KV] set() failed:",e),null}},async expire(e,t){if(NO_WRITE_FALLBACK)return null;try{return await fetch(`${base}/expire/${encodeURIComponent(e)}`,{method:"POST",headers:{Authorization:`Bearer ${upstashToken}`,"Content-Type":"application/json"},body:JSON.stringify({ttl:t})}),!0}catch(e){return console.error("[KV] expire() failed:",e),null}}}}else kvClient=null}let RDAP_TTL_SECONDS=300;async function kvGetRdap(e){if(!kvClient)return null;try{let t=`rdap:${e.toLowerCase()}`;return await kvClient.get(t)??null}catch(e){return null}}async function kvSetRdap(e,t){if(!kvClient)return null;if(NO_WRITE_FALLBACK)return{skippedReadOnly:!0};try{let s=`rdap:${e.toLowerCase()}`,a=await kvClient.set(s,t);try{"function"==typeof kvClient.expire&&await kvClient.expire(s,RDAP_TTL_SECONDS)}catch(e){}return a}catch(e){return null}}let kv={async get(e){if(!kvClient)return null;try{let t=await kvClient.get(e);if(null==t)return null;let s=t;if("string"==typeof t)try{s=JSON.parse(t)}catch(e){s=t}if(s&&"object"==typeof s&&"value"in s){let e=s.value;if("string"==typeof e)try{return JSON.parse(e)}catch(e){}return e}return s}catch(t){console.error("[KV] get() failed:",t);try{if(__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_URL&&__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_TOKEN){let t=(__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_URL||"").replace(/\/$/,""),s=__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_TOKEN,a=`${t}/get/${encodeURIComponent(e)}`;console.log("[KV] attempting Upstash REST fallback GET",a);let n=await fetch(a,{headers:{Authorization:`Bearer ${s}`}});if(console.log("[KV] upstash REST fallback status",n.status),!n.ok)return null;let r=await n.json();return console.log("[KV] upstash REST fallback body keys",Object.keys(r||{})),r.result??null}}catch(e){console.error("[KV] upstash REST fallback failed:",e)}return null}},async set(e,t,s){if(!kvClient)return null;if(NO_WRITE_FALLBACK)return{skippedReadOnly:!0};try{let a=await kvClient.set(e,t);if(s?.ex&&"function"==typeof kvClient.expire)try{await kvClient.expire(e,Math.ceil(s.ex))}catch(e){}return a}catch(e){return console.error("[KV] set() failed:",e),null}}},__TURBOPACK__default__export__={};function getKvStatus(){return{writeEnabled:WRITE_ENABLED,readOnlyOnly:READ_ONLY_ONLY,noWriteFallback:NO_WRITE_FALLBACK,kvClientPresent:!!kvClient,kvUrl:__TURBOPACK__imported__module__37826__.default.env.KV_REST_API_URL||__TURBOPACK__imported__module__37826__.default.env.UPSTASH_REDIS_REST_URL||null}}async function debugKvRoundTrip(){let e="debug:kv:test",t={ok:!0,ts:Date.now()};console.log("[KV] Writing test key:",e);let s=await kv.set(e,JSON.stringify(t));console.log("[KV] Write result:",s);let a=await kv.get(e);return console.log("[KV] Read result:",a),{writeResult:s,readResult:a}}let KEY_PREFIX="buildwithai:site:";async function loadSiteState(e){let t=`${KEY_PREFIX}${e}`,s=await kv.get(t);if(!s)return null;let a=s;if("string"==typeof s)try{a=JSON.parse(s)}catch{return null}return a&&"object"==typeof a&&a.metadata&&a.pages?(a.metadata={id:a.metadata.id??e,name:a.metadata.name??"",description:a.metadata.description??"",createdAt:a.metadata.createdAt??Date.now(),updatedAt:a.metadata.updatedAt??Date.now(),version:a.metadata.version??1},Array.isArray(a.pages)||(a.pages=[]),a):null}let KEY_PREFIX1="buildwithai:site:";async function saveSiteState(e,t){let s=`${KEY_PREFIX1}${e}`,a=t.metadata??{id:e,createdAt:Date.now(),updatedAt:Date.now(),version:1},n={...a,updatedAt:Date.now(),version:(a.version??0)+1},r=JSON.stringify({...t,metadata:n});await kv.set(s,r)}async function saveSite(e,t){return saveSiteState(e,t)}let SITE_REGISTRY_PREFIX="buildwithai:sites",SITE_REGISTRY_INDEX="buildwithai:sites:index";async function registerSite(e,t){let s=`${SITE_REGISTRY_PREFIX}:${e}`,a=await kv.get(s);if(a)return a;let n={id:e,name:t,createdAt:Date.now(),updatedAt:Date.now()};await kv.set(s,n);try{let t=await kv.get(SITE_REGISTRY_INDEX),s=Array.isArray(t)?Array.from(new Set([...t,e])):[e];await kv.set(SITE_REGISTRY_INDEX,s)}catch(e){}return n}async function updateSiteTimestamp(e){let t=`${SITE_REGISTRY_PREFIX}:${e}`,s=await kv.get(t);s&&(s.updatedAt=Date.now(),await kv.set(t,s))}async function listSites(){let e=await kv.get(SITE_REGISTRY_INDEX),t=[];if(!Array.isArray(e)||0===e.length)return t;for(let s of e){let e=`${SITE_REGISTRY_PREFIX}:${s}`,a=await kv.get(e);a&&t.push(a)}return t.sort((e,t)=>t.updatedAt-e.updatedAt)}async function getSite(e){let t=await loadSiteState(e);return t?{id:e,name:t.metadata?.name??"Untitled",createdAt:t.metadata?.createdAt??Date.now(),updatedAt:t.metadata?.updatedAt??Date.now()}:null}function BuilderCanvas({params:e}){let t=e.id,[s,a]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[n,r]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[i,l]=(0,__TURBOPACK__imported__module__75441__.useState)(!1),[o,c]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[d,u]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[h,p]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[f,x]=(0,__TURBOPACK__imported__module__75441__.useState)(!1),[m,y]=(0,__TURBOPACK__imported__module__75441__.useState)(!1),[g,v]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[b,j]=(0,__TURBOPACK__imported__module__75441__.useState)(!1),[S,_]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[w,N]=(0,__TURBOPACK__imported__module__75441__.useState)(!1),[R,T]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[k,C]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[A,E]=(0,__TURBOPACK__imported__module__75441__.useState)(!1),[I,O]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[P,U]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[$,K]=(0,__TURBOPACK__imported__module__75441__.useState)({}),[F,D]=(0,__TURBOPACK__imported__module__75441__.useState)(null),[V,z]=(0,__TURBOPACK__imported__module__75441__.useState)({});async function L(){if(s){l(!0),u(null);try{let e=await fetch("/api/publish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:t})});if(!e.ok){let t=await e.json().catch(()=>({}));u(t?.error??`Publish failed with status ${e.status}`),l(!1);return}let s=await e.json();s?.publish&&c(s.publish),s?.history&&p(s.history)}catch(e){u(e?.message??"Unexpected error during publish")}finally{l(!1)}}}async function H(){j(!0),_(null);try{let e=await fetch("/api/publish/preview",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:t})}),s=await e.json();s?.previewUrl&&_(s.previewUrl)}catch(e){console.error("Preview error",e)}finally{j(!1)}}async function B(){N(!0),T(null),C(null);try{let e=await fetch("/api/publish/staging",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:t})}),s=await e.json();if(!e.ok){C(s?.error??"Staging deploy failed"),N(!1);return}s?.stagingUrl&&T(s.stagingUrl)}catch(e){C(e?.message??"Unexpected staging error")}finally{N(!1)}}async function J(){let e=await fetch(`/api/publish/history?siteId=${t}`);if(!e.ok)return;let s=await e.json();s?.history&&p(s.history)}async function q(e){y(!0),v(null);try{let s=await fetch("/api/publish/rollback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({siteId:t,version:e})});if(!s.ok){let e=await s.json().catch(()=>({}));v(e?.error??`Restore failed with status ${s.status}`),y(!1);return}window.location.reload()}catch(e){v(e?.message??"Unexpected restore error")}finally{y(!1)}}async function W(e){if(void 0!==$[e])return;let s=await fetch(`/api/publish/changelog?siteId=${t}&version=${e}`);if(!s.ok)return void K(t=>({...t,[e]:null}));let a=await s.json();K(t=>({...t,[e]:a?.changelog??null}))}async function M(e){if(void 0!==V[e])return;let s=await fetch(`/api/publish/release-notes?siteId=${t}&version=${e}`);if(!s.ok)return void z(t=>({...t,[e]:null}));let a=await s.json();z(t=>({...t,[e]:a?.releaseNotes??null}))}(0,__TURBOPACK__imported__module__75441__.useEffect)(()=>{!async function(){let e=await loadSiteState(t);if(e)return a(e);let s=localStorage.getItem(`buildwithai:site:${t}`);if(s)try{let e=JSON.parse(s),n={metadata:{id:t,name:e?.metadata?.name??"Untitled",createdAt:e?.metadata?.createdAt??Date.now(),updatedAt:e?.metadata?.updatedAt??Date.now(),version:e?.metadata?.version??1},pages:e.pages??[{id:"page-1",title:"Home",slug:"/",blocks:[]}],activePageId:e.activePageId??"page-1"};a(n),await saveSiteState(t,n)}catch(e){}}()},[t]),(0,__TURBOPACK__imported__module__75441__.useEffect)(()=>{!async function(){let e=await getSite(t);O(e),e?.name&&(await registerSite(t,e.name),await updateSiteTimestamp(t))}()},[t]),(0,__TURBOPACK__imported__module__75441__.useEffect)(()=>{if(!s?.metadata)return;let e=setTimeout(()=>{saveSiteState(t,s)},500);return()=>clearTimeout(e)},[s,t]);let Y=s?.pages.find(e=>e.id===s.activePageId)??s?.pages[0],Q=Y?.blocks??[];function G(e){Y&&a(t=>({...t,pages:t.pages.map(t=>t.id===Y.id?{...t,blocks:[...t.blocks,{id:crypto.randomUUID(),type:e,data:{}}]}:t)}))}function X(e,t,s){a(a=>({...a,pages:a.pages.map(a=>a.id===e?{...a,blocks:a.blocks.map(e=>e.id===t?{...e,data:s}:e)}:a)}))}function Z(e){Y&&(a(t=>({...t,pages:t.pages.map(t=>t.id===Y.id?{...t,blocks:t.blocks.filter(t=>t.id!==e)}:t)})),n===e&&r(null))}function ee(e,t,s){a(a=>{let n=a.pages.map(a=>{if(a.id!==e)return a;let n=a.blocks.findIndex(e=>e.id===t);if(-1===n)return a;let r=[...a.blocks];if("up"===s&&n>0){let e=r[n-1];r[n-1]=r[n],r[n]=e}if("down"===s&&n<r.length-1){let e=r[n+1];r[n+1]=r[n],r[n]=e}return{...a,blocks:r}});return{...a,pages:n}})}function et(e,t){a(s=>{let a=s.pages.map(s=>{if(s.id!==e)return s;let a={...t,id:crypto.randomUUID()};return{...s,blocks:[...s.blocks,a]}});return{...s,pages:a}})}function es(e,t){a(s=>{let a=s.pages.map(s=>s.id===e?{...s,blocks:s.blocks.filter(e=>e.id!==t)}:s);return{...s,pages:a}}),n===t&&r(null)}return(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"flex h-screen",children:[(0,__TURBOPACK__imported__module__18151__.jsx)(Sidebar,{blocks:Q,selectedBlockId:n,onAddBlock:G,onRemoveBlock:Z,onSelectBlock:e=>r(e)}),(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"flex-1 p-6 overflow-auto flex flex-col gap-4",children:[(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"min-w-0",children:[(0,__TURBOPACK__imported__module__18151__.jsxs)("h1",{className:"text-xl font-semibold truncate",children:["Editing: ",Y?.title??"Untitled page"]}),o?.lastPublishedAt&&(0,__TURBOPACK__imported__module__18151__.jsxs)("p",{className:"text-xs text-slate-500 mt-1",children:["Last published: "," ",new Date(o.lastPublishedAt).toLocaleString(),o.lastPublishedVersion?` • Version ${o.lastPublishedVersion}`:""]})]}),(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"flex flex-col items-end gap-1",children:[(0,__TURBOPACK__imported__module__18151__.jsx)("button",{type:"button",className:"px-3 py-1 text-xs rounded bg-purple-700 hover:bg-purple-600 disabled:opacity-50",disabled:w,onClick:B,children:w?"Staging…":"Staging"}),(0,__TURBOPACK__imported__module__18151__.jsx)("button",{type:"button",className:"px-3 py-1 text-xs rounded bg-slate-700 hover:bg-slate-600 disabled:opacity-50",disabled:b,onClick:H,children:b?"Previewing…":"Preview"}),(0,__TURBOPACK__imported__module__18151__.jsx)("button",{type:"button",className:"inline-flex items-center rounded-full bg-slate-900 text-white text-xs px-4 py-1.5 disabled:opacity-60",onClick:L,disabled:i||!s,children:i?"Publishing…":"Publish"}),(0,__TURBOPACK__imported__module__18151__.jsx)("a",{href:`/site/${t}/changelog`,className:"text-xs underline text-blue-300",children:"View Changelog"}),(0,__TURBOPACK__imported__module__18151__.jsx)("a",{href:`/site/${t}/settings`,className:"text-xs underline text-purple-300",children:"Settings"}),(0,__TURBOPACK__imported__module__18151__.jsx)("button",{type:"button",className:"text-[10px] text-slate-400 underline",onClick:()=>{x(!f),h||J()},children:f?"Hide history":"View history"}),d&&(0,__TURBOPACK__imported__module__18151__.jsx)("p",{className:"text-[10px] text-red-500 max-w-xs text-right",children:d})]})]}),S&&(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"mt-2 text-xs text-slate-300",children:["Preview ready: "," ",(0,__TURBOPACK__imported__module__18151__.jsx)("a",{href:S,target:"_blank",className:"underline text-slate-200",children:S})]}),R&&(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"mt-2 text-xs text-purple-300",children:["Staging ready: "," ",(0,__TURBOPACK__imported__module__18151__.jsx)("a",{href:R,target:"_blank",className:"underline text-purple-200",children:R})]}),k&&(0,__TURBOPACK__imported__module__18151__.jsx)("div",{className:"mt-2 text-xs text-red-400",children:k}),f&&h&&(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"mt-4 border border-slate-800 rounded-lg p-3 bg-slate-900/40",children:[(0,__TURBOPACK__imported__module__18151__.jsx)("h2",{className:"text-sm font-semibold mb-2",children:"Publish History"}),(0,__TURBOPACK__imported__module__18151__.jsx)("ul",{className:"space-y-2 text-xs",children:h.map((e,t)=>(0,__TURBOPACK__imported__module__18151__.jsxs)("li",{className:"border-b border-slate-800 pb-1",children:[(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"flex items-center justify-between",children:[(0,__TURBOPACK__imported__module__18151__.jsxs)("span",{children:["Version ",e.version," — "," ",new Date(e.timestamp).toLocaleString(),e.rollback?" (rollback)":""]}),(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"flex items-center gap-3",children:[e.url&&(0,__TURBOPACK__imported__module__18151__.jsx)("a",{href:e.url,target:"_blank",className:"text-slate-400 underline",children:"View"}),(0,__TURBOPACK__imported__module__18151__.jsx)("button",{type:"button",className:"text-slate-300 underline disabled:opacity-50",disabled:m,onClick:()=>q(e.version),children:"Restore"}),(0,__TURBOPACK__imported__module__18151__.jsx)("button",{type:"button",className:"text-slate-400 text-[10px] underline",onClick:()=>{let t=P===e.version?null:e.version;U(t),null!==t&&W(t)},children:P===e.version?"Hide changelog":"View changelog"}),(0,__TURBOPACK__imported__module__18151__.jsx)("button",{type:"button",className:"text-slate-400 text-[10px] underline",onClick:()=>{let t=F===e.version?null:e.version;D(t),null!==t&&M(t)},children:F===e.version?"Hide release notes":"View release notes"})]})]}),P===e.version&&(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"mt-1 text-[11px] text-slate-300 whitespace-pre-line",children:[void 0===$[e.version]&&(0,__TURBOPACK__imported__module__18151__.jsx)("span",{className:"text-slate-500",children:"Loading changelog…"}),null===$[e.version]&&(0,__TURBOPACK__imported__module__18151__.jsx)("span",{className:"text-slate-500",children:"No changelog available for this version."}),$[e.version]&&$[e.version]]}),F===e.version&&(0,__TURBOPACK__imported__module__18151__.jsxs)("div",{className:"mt-1 text-[11px] text-slate-300 whitespace-pre-line",children:[void 0===V[e.version]&&(0,__TURBOPACK__imported__module__18151__.jsx)("span",{className:"text-slate-500",children:"Loading release notes…"}),null===V[e.version]&&(0,__TURBOPACK__imported__module__18151__.jsx)("span",{className:"text-slate-500",children:"No release notes available for this version."}),V[e.version]&&V[e.version]]})]},t))})]}),(0,__TURBOPACK__imported__module__18151__.jsx)(Canvas,{blocks:Q,selectedBlockId:n,onSelectBlock:e=>r(e)})]}),(0,__TURBOPACK__imported__module__18151__.jsx)(BlockEditorSidebar,{block:Q.find(e=>e.id===n)??null,onChange:e=>{if(n&&Y){if(e.__duplicate__){let e=Q.find(e=>e.id===n);e&&et(Y.id,e);return}X(Y.id,n,e)}},onRegenerate:()=>{},onMoveUp:()=>{n&&Y&&ee(Y.id,n,"up")},onMoveDown:()=>{n&&Y&&ee(Y.id,n,"down")},onDelete:()=>{n&&Y&&es(Y.id,n)}})]})}__turbopack_context__.s(["default",()=>BuilderCanvas],91146)}]);