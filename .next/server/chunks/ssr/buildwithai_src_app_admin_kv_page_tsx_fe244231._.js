module.exports=[31892,a=>{"use strict";var b=a.i(18442),c=a.i(63803);function d(){let[a,d]=(0,c.useState)(null),[e,f]=(0,c.useState)(!1),[g,h]=(0,c.useState)("example.com, openai.com"),[i,j]=(0,c.useState)(null),[k,l]=(0,c.useState)(!1);async function m(){f(!0);try{let a=await fetch("/api/kv/health"),b=await a.json();d(b)}catch(a){d({success:!1,kv:"error",error:"Failed to load health"})}finally{f(!1)}}async function n(){l(!0),j(null);try{let a=g.split(",").map(a=>a.trim()).filter(Boolean),b=await fetch("/api/kv/warm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({domains:a})}),c=await b.json();j(Object.keys(c.results||{}).map(a=>({domain:a,ok:"cached"===c.results[a],error:"string"==typeof c.results[a]&&c.results[a].startsWith("error:")?c.results[a]:void 0})))}catch(a){j([{domain:"unknown",ok:!1,error:"Warm request failed"}])}finally{l(!1)}}return(0,c.useEffect)(()=>{m()},[]),(0,b.jsxs)("main",{className:"mx-auto max-w-3xl px-4 py-10 space-y-8",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold",children:"KV & RDAP Admin"}),(0,b.jsxs)("div",{className:"text-sm text-gray-600",children:["This admin UI is protected — include ",(0,b.jsx)("code",{children:"?token=YOUR_TOKEN"})," in the URL or set an ",(0,b.jsx)("code",{children:"x-admin-token"})," header. Set ",(0,b.jsx)("code",{children:"ADMIN_DASHBOARD_TOKEN"})," in your deployment environment."]}),(0,b.jsxs)("section",{className:"rounded-lg border p-4 bg-white space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"font-semibold",children:"KV Health"}),(0,b.jsx)("button",{onClick:m,disabled:e,className:"text-sm px-3 py-1 rounded bg-gray-900 text-white disabled:opacity-50",children:e?"Checking...":"Refresh"})]}),a&&(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Status:"})," ",a.success?"Healthy":"Unhealthy"," (",a.kv,")"]}),a.ts&&(0,b.jsxs)("p",{children:[(0,b.jsx)("span",{className:"font-medium",children:"Last check:"})," ",new Date(a.ts).toLocaleString()]}),a.error&&(0,b.jsxs)("p",{className:"text-red-600 text-xs mt-1",children:["Error: ",a.error]})]}),!a&&!e&&(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"No health data loaded yet."})]}),(0,b.jsxs)("section",{className:"rounded-lg border p-4 bg-white space-y-3",children:[(0,b.jsx)("h2",{className:"font-semibold",children:"Warm KV with domains"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:"Enter a comma‑separated list of domains to pre‑fetch RDAP + KV."}),(0,b.jsx)("textarea",{className:"w-full border rounded p-2 text-sm",rows:3,value:g,onChange:a=>h(a.target.value)}),(0,b.jsx)("button",{onClick:n,disabled:k,className:"text-sm px-3 py-1 rounded bg-blue-600 text-white disabled:opacity-50",children:k?"Warming...":"Run warm job"}),i&&(0,b.jsxs)("div",{className:"mt-3 text-sm",children:[(0,b.jsx)("h3",{className:"font-medium mb-1",children:"Results"}),(0,b.jsx)("ul",{className:"space-y-1",children:i.map((a,c)=>(0,b.jsxs)("li",{children:[(0,b.jsx)("span",{className:"font-mono",children:a.domain})," ",a.ok?(0,b.jsx)("span",{className:"text-green-700 text-xs",children:"OK"}):(0,b.jsxs)("span",{className:"text-red-700 text-xs",children:["FAILED ",a.error?`- ${a.error}`:""]})]},c))})]})]})]})}a.s(["default",()=>d])}];

//# sourceMappingURL=buildwithai_src_app_admin_kv_page_tsx_fe244231._.js.map