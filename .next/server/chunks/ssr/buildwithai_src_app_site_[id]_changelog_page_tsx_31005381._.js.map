{"version":3,"sources":["../../../../../buildwithai/src/app/site/%5Bid%5D/changelog/page.tsx","../../../../../buildwithai/src/components/VersionCard.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { VersionCard } from \"@/components/VersionCard\";\r\n\r\nexport default function ChangelogPage({\r\n  params,\r\n}: {\r\n  params: { id: string };\r\n}) {\r\n  const siteId = params.id;\r\n  const [versions, setVersions] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    async function load() {\r\n      const res = await fetch(`/api/sites/${siteId}/changelog`);\r\n      const data = await res.json();\r\n      setVersions(data?.versions ?? []);\r\n      setLoading(false);\r\n    }\r\n    load();\r\n  }, [siteId]);\r\n\r\n  return (\r\n    <div className=\"p-6 text-slate-200 space-y-4\">\r\n      <h1 className=\"text-xl font-semibold\">Changelog</h1>\r\n\r\n      {loading && <div className=\"text-slate-400\">Loadingâ€¦</div>}\r\n\r\n      {!loading && versions.length === 0 && (\r\n        <div className=\"text-slate-400\">No versions published yet.</div>\r\n      )}\r\n\r\n      {!loading && versions.length > 0 && (\r\n        <div className=\"space-y-4\">\r\n          {versions\r\n            .sort((a, b) => b.version - a.version)\r\n            .map((snapshot) => (\r\n              <VersionCard key={snapshot.version} snapshot={snapshot} />\r\n            ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","\"use client\";\r\n\r\ntype VersionSnapshot = {\r\n  version: number;\r\n  timestamp: number;\r\n  state: any;\r\n  changelog: string | null;\r\n  releaseNotes: string | null;\r\n};\r\n\r\nexport function VersionCard({ snapshot }: { snapshot: VersionSnapshot }) {\r\n  return (\r\n    <div className=\"border border-slate-700 rounded p-4 space-y-2 text-slate-200\">\r\n      <div className=\"flex justify-between\">\r\n        <div className=\"font-semibold\">Version {snapshot.version}</div>\r\n        <div className=\"text-xs text-slate-400\">\r\n          {new Date(snapshot.timestamp).toLocaleString()}\r\n        </div>\r\n      </div>\r\n\r\n      {snapshot.changelog && (\r\n        <div>\r\n          <div className=\"text-sm font-medium mb-1\">Changelog</div>\r\n          <pre className=\"text-xs whitespace-pre-wrap bg-slate-900 p-2 rounded border border-slate-800\">\r\n            {snapshot.changelog}\r\n          </pre>\r\n        </div>\r\n      )}\r\n\r\n      {snapshot.releaseNotes && (\r\n        <div>\r\n          <div className=\"text-sm font-medium mb-1\">Release Notes</div>\r\n          <pre className=\"text-xs whitespace-pre-wrap bg-slate-900 p-2 rounded border border-slate-800\">\r\n            {snapshot.releaseNotes}\r\n          </pre>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"wDAEA,EAAA,EAAA,CAAA,CAAA,OCQO,SAAS,EAAY,UAAE,CAAQ,CAAiC,EACrE,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yEACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,0BAAgB,WAAS,EAAS,OAAO,IACxD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,kCACZ,IAAI,KAAK,EAAS,SAAS,EAAE,cAAc,QAI/C,EAAS,SAAS,EACjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oCAA2B,cAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wFACZ,EAAS,SAAS,MAKxB,EAAS,YAAY,EACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oCAA2B,kBAC1C,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wFACZ,EAAS,YAAY,QAMlC,CDlCe,SAAS,EAAc,CACpC,QAAM,CAGP,EACC,IAAM,EAAS,EAAO,EAAE,CAClB,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAQ,EAAE,EAC5C,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAYvC,MAVA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,MAOR,AANA,eAAe,EACb,IAAM,EAAM,MAAM,MAAM,CAAC,WAAW,EAAE,EAAO,UAAU,CAAC,EAClD,EAAO,MAAM,EAAI,IAAI,GAC3B,EAAY,GAAM,UAAY,EAAE,EAChC,GAAW,EACb,GAEF,EAAG,CAAC,EAAO,EAGT,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yCACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,iCAAwB,cAErC,GAAW,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BAAiB,aAE3C,CAAC,GAA+B,IAApB,EAAS,MAAM,EAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,0BAAiB,+BAGjC,CAAC,GAAW,EAAS,MAAM,CAAG,GAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EACE,IAAI,CAAC,CAAC,EAAG,IAAM,EAAE,OAAO,CAAG,EAAE,OAAO,EACpC,GAAG,CAAC,AAAC,GACJ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAmC,SAAU,GAA5B,EAAS,OAAO,OAMhD"}