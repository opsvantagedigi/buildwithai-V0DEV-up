{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/marketing/Hero.tsx"],"sourcesContent":["\"use client\";\r\nimport React from 'react'\r\n\r\ntype Props = {\r\n  title: string\r\n  kicker?: string\r\n  subtitle?: string\r\n}\r\n\r\nexport default function Hero({ title, kicker, subtitle }: Props) {\r\n  return (\r\n    <header className=\"max-w-6xl mx-auto px-6 section-py-32\">\r\n      {kicker && <p className=\"text-sm text-sky-400 font-semibold\">{kicker}</p>}\r\n      <h1 className=\"mt-4 text-5xl sm:text-6xl font-extrabold leading-tight gradient-text fade-up\">{title}</h1>\r\n      {subtitle && <p className=\"mt-6 text-lg text-[rgba(255,255,255,0.85)] max-w-3xl fade-up\" style={{animationDelay: '120ms'}}>{subtitle}</p>}\r\n\r\n      <style jsx>{`\r\n        @keyframes fadeUp { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }\r\n        .fade-up { opacity: 0; animation: fadeUp 600ms ease forwards; }\r\n      `}</style>\r\n    </header>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;;AASe,SAAS,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,QAAQ,EAAS;IAC7D,qBACE,6PAAC;kDAAiB;;YACf,wBAAU,6PAAC;0DAAY;0BAAsC;;;;;;0BAC9D,6PAAC;0DAAa;0BAAgF;;;;;;YAC7F,0BAAY,6PAAC;gBAA2E,OAAO;oBAAC,gBAAgB;gBAAO;0DAA9F;0BAAkG;;;;;;;;;;;;;;;;AAQlI"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/marketing/FeatureGrid.tsx"],"sourcesContent":["\"use client\";\r\nimport React from 'react'\r\n\r\ntype Feature = { title: string; desc: string }\r\n\r\nexport default function FeatureGrid({ items }: { items: Feature[] }) {\r\n  return (\r\n    <section className=\"max-w-6xl mx-auto px-6 section-py-32\">\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 grid-gap-8\">\r\n        {items.map((f, idx) => (\r\n          <article key={f.title} className={`card p-6 rounded-lg transition-transform duration-300 hover:scale-105 hover:shadow-[0_10px_30px_rgba(11,179,138,0.12)]`} style={{animation: `fadeUp 600ms ease forwards`, animationDelay: `${idx * 80}ms`, opacity: 0}}>\r\n            <h3 className=\"font-semibold text-lg gradient-text\">{f.title}</h3>\r\n            <p className=\"mt-2 text-sm text-[rgba(255,255,255,0.85)]\">{f.desc}</p>\r\n          </article>\r\n        ))}\r\n      </div>\r\n\r\n      <style jsx>{`\r\n        @keyframes fadeUp { from { opacity: 0; transform: translateY(12px); } to { opacity: 1; transform: translateY(0); } }\r\n      `}</style>\r\n    </section>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;;AAKe,SAAS,YAAY,EAAE,KAAK,EAAwB;IACjE,qBACE,6PAAC;kDAAkB;;0BACjB,6PAAC;0DAAc;0BACZ,MAAM,GAAG,CAAC,CAAC,GAAG,oBACb,6PAAC;wBAA2J,OAAO;4BAAC,WAAW,CAAC,0BAA0B,CAAC;4BAAE,gBAAgB,GAAG,MAAM,GAAG,EAAE,CAAC;4BAAE,SAAS;wBAAC;kEAAtN,CAAC,sHAAsH,CAAC;;0CACxJ,6PAAC;0EAAa;0CAAuC,EAAE,KAAK;;;;;;0CAC5D,6PAAC;0EAAY;0CAA8C,EAAE,IAAI;;;;;;;uBAFrD,EAAE,KAAK;;;;;;;;;;;;;;;;;;;;AAY/B"}},
    {"offset": {"line": 124, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/marketing/CTA.tsx"],"sourcesContent":["\"use client\";\r\nimport React from 'react'\r\n\r\nexport default function CTA({ children, href = '/builder' }: { children?: React.ReactNode; href?: string }) {\r\n  return (\r\n    <section className=\"section-py-32 bg-[var(--color-base)] text-white\">\r\n      <div className=\"max-w-6xl mx-auto px-6 text-center\">\r\n        <div className=\"mx-auto max-w-3xl card p-8\">\r\n          <h3 className=\"text-2xl font-bold gradient-text\">Ready to build with AI?</h3>\r\n          <p className=\"mt-3 text-sm text-[rgba(255,255,255,0.85)]\">Start a free trial and launch a production-ready site in minutes.</p>\r\n          <div className=\"mt-6\">\r\n            <a href={href} className=\"inline-block bg-white text-black px-6 py-3 rounded-md font-semibold shadow-lg transition transform hover:scale-105 hover:drop-shadow-[0_0_20px_rgba(11,179,138,0.6)]\">{children ?? 'Get Started Free'}</a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAGe,SAAS,IAAI,EAAE,QAAQ,EAAE,OAAO,UAAU,EAAiD;IACxG,qBACE,6PAAC;QAAQ,WAAU;kBACjB,cAAA,6PAAC;YAAI,WAAU;sBACb,cAAA,6PAAC;gBAAI,WAAU;;kCACb,6PAAC;wBAAG,WAAU;kCAAmC;;;;;;kCACjD,6PAAC;wBAAE,WAAU;kCAA6C;;;;;;kCAC1D,6PAAC;wBAAI,WAAU;kCACb,cAAA,6PAAC;4BAAE,MAAM;4BAAM,WAAU;sCAAwK,YAAY;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMzN"}},
    {"offset": {"line": 192, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/marketing/FAQ.tsx"],"sourcesContent":["\"use client\";\r\nimport React from 'react'\r\n\r\ntype Item = { q: string; a: string }\r\n\r\nexport default function FAQ({ items }: { items: Item[] }) {\r\n  return (\r\n    <section className=\"max-w-4xl mx-auto px-6 section-py-32\">\r\n      <h3 className=\"text-xl font-bold gradient-text\">Frequently asked questions</h3>\r\n      <div className=\"mt-6 space-y-4\">\r\n        {items.map((it) => (\r\n          <details key={it.q} className=\"card p-4 rounded-lg\">\r\n            <summary className=\"font-medium gradient-text\">{it.q}</summary>\r\n            <div className=\"mt-2 text-sm text-[rgba(255,255,255,0.85)]\">{it.a}</div>\r\n          </details>\r\n        ))}\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAKe,SAAS,IAAI,EAAE,KAAK,EAAqB;IACtD,qBACE,6PAAC;QAAQ,WAAU;;0BACjB,6PAAC;gBAAG,WAAU;0BAAkC;;;;;;0BAChD,6PAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC,mBACV,6PAAC;wBAAmB,WAAU;;0CAC5B,6PAAC;gCAAQ,WAAU;0CAA6B,GAAG,CAAC;;;;;;0CACpD,6PAAC;gCAAI,WAAU;0CAA8C,GAAG,CAAC;;;;;;;uBAFrD,GAAG,CAAC;;;;;;;;;;;;;;;;AAQ5B"}},
    {"offset": {"line": 254, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/marketing/SocialProof.tsx"],"sourcesContent":["\"use client\";\r\nimport React from 'react'\r\n\r\nexport default function SocialProof({ logos = [] }: { logos?: string[] }) {\r\n  return (\r\n    <section className=\"section-py-32\">\r\n      <div className=\"max-w-6xl mx-auto px-6\">\r\n        <h3 className=\"text-lg font-medium gradient-text\">Trusted by teams and creators</h3>\r\n        <div className=\"mt-6 flex flex-wrap items-center gap-6\">\r\n          {logos.length === 0 ? (\r\n            <p className=\"text-sm text-[rgba(255,255,255,0.85)]\">Join thousands of builders using BUILD WITH AI.</p>\r\n          ) : (\r\n            logos.map((l, i) => (\r\n              <img key={i} src={l} alt={`logo-${i}`} className=\"h-8 opacity-80\" />\r\n            ))\r\n          )}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAGe,SAAS,YAAY,EAAE,QAAQ,EAAE,EAAwB;IACtE,qBACE,6PAAC;QAAQ,WAAU;kBACjB,cAAA,6PAAC;YAAI,WAAU;;8BACb,6PAAC;oBAAG,WAAU;8BAAoC;;;;;;8BAClD,6PAAC;oBAAI,WAAU;8BACZ,MAAM,MAAM,KAAK,kBAChB,6PAAC;wBAAE,WAAU;kCAAwC;;;;;+BAErD,MAAM,GAAG,CAAC,CAAC,GAAG,kBACZ,6PAAC;4BAAY,KAAK;4BAAG,KAAK,CAAC,KAAK,EAAE,GAAG;4BAAE,WAAU;2BAAvC;;;;;;;;;;;;;;;;;;;;;AAOxB"}},
    {"offset": {"line": 314, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/BlockRenderer.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport Hero from \"@/components/marketing/Hero\";\r\nimport FeatureGrid from \"@/components/marketing/FeatureGrid\";\r\nimport CTA from \"@/components/marketing/CTA\";\r\nimport FAQ from \"@/components/marketing/FAQ\";\r\nimport SocialProof from \"@/components/marketing/SocialProof\";\r\n\r\ntype Block = { id: string; type: string; data: any };\r\n\r\nexport default function BlockRenderer({ block }: { block: Block }) {\r\n  const { type, data } = block;\r\n\r\n  if (type === \"hero\") return <Hero {...(data || {})} />;\r\n  if (type === \"features\") return <FeatureGrid items={(data?.features) || []} />;\r\n  if (type === \"cta\") return <CTA {...(data || {})} />;\r\n  if (type === \"faq\") return <FAQ items={(data?.items) || []} />;\r\n  if (type === \"social-proof\") return <SocialProof {...(data || {})} />;\r\n\r\n  if (type === \"text\") return <div className=\"prose\" dangerouslySetInnerHTML={{ __html: data?.html || \"<p>Text block</p>\" }} />;\r\n\r\n  return <div className=\"text-sm text-slate-500\">Unknown block type: {type}</div>;\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;AAPA;;;;;;;AAWe,SAAS,cAAc,EAAE,KAAK,EAAoB;IAC/D,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG;IAEvB,IAAI,SAAS,QAAQ,qBAAO,6PAAC,iKAAI;QAAE,GAAI,QAAQ,CAAC,CAAC;;;;;;IACjD,IAAI,SAAS,YAAY,qBAAO,6PAAC,wKAAW;QAAC,OAAO,AAAC,MAAM,YAAa,EAAE;;;;;;IAC1E,IAAI,SAAS,OAAO,qBAAO,6PAAC,gKAAG;QAAE,GAAI,QAAQ,CAAC,CAAC;;;;;;IAC/C,IAAI,SAAS,OAAO,qBAAO,6PAAC,gKAAG;QAAC,OAAO,AAAC,MAAM,SAAU,EAAE;;;;;;IAC1D,IAAI,SAAS,gBAAgB,qBAAO,6PAAC,wKAAW;QAAE,GAAI,QAAQ,CAAC,CAAC;;;;;;IAEhE,IAAI,SAAS,QAAQ,qBAAO,6PAAC;QAAI,WAAU;QAAQ,yBAAyB;YAAE,QAAQ,MAAM,QAAQ;QAAoB;;;;;;IAExH,qBAAO,6PAAC;QAAI,WAAU;;YAAyB;YAAqB;;;;;;;AACtE"}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/PageNavigator.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\nexport default function PageNavigator() {\r\n  return (\r\n    <div className=\"flex items-center justify-between\">\r\n      <div className=\"text-sm text-slate-600\">Page: Home</div>\r\n      <div className=\"flex gap-2\">\r\n        <button className=\"gds-btn\">Add page</button>\r\n        <button className=\"gds-btn\">Rename</button>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAIe,SAAS;IACtB,qBACE,6PAAC;QAAI,WAAU;;0BACb,6PAAC;gBAAI,WAAU;0BAAyB;;;;;;0BACxC,6PAAC;gBAAI,WAAU;;kCACb,6PAAC;wBAAO,WAAU;kCAAU;;;;;;kCAC5B,6PAAC;wBAAO,WAAU;kCAAU;;;;;;;;;;;;;;;;;;AAIpC"}},
    {"offset": {"line": 449, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/Canvas.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport BlockRenderer from \"./BlockRenderer\";\r\nimport PageNavigator from \"./PageNavigator\";\r\n\r\ntype Block = { id: string; type: string; data: any };\r\ntype Props = { blocks: Block[]; className?: string; selectedBlockId?: string | null; onSelectBlock?: (id: string) => void };\r\n\r\nexport default function Canvas({ blocks = [], className = \"\", selectedBlockId, onSelectBlock }: Props) {\r\n  return (\r\n    <div className={`bg-white rounded-lg shadow p-6 ${className}`}>\r\n      <div className=\"mb-4\">\r\n        <PageNavigator />\r\n      </div>\r\n\r\n      <div className=\"space-y-6\">\r\n        {blocks.length === 0 && (\r\n          <div className=\"text-sm text-slate-500\">Empty page — add a block.</div>\r\n        )}\r\n        {blocks.map((b) => {\r\n          const isSelected = b.id === selectedBlockId;\r\n          return (\r\n            <div\r\n              key={b.id}\r\n              className={[\r\n                \"border rounded p-3 cursor-pointer transition-colors\",\r\n                isSelected ? \"border-slate-900 ring-2 ring-slate-900/40\" : \"border-slate-200 hover:border-slate-300\",\r\n              ].join(\" \")}\r\n              onClick={() => onSelectBlock?.(b.id)}\r\n            >\r\n              <div className={[(isSelected ? \"bg-slate-900 text-white\" : \"bg-slate-200 text-slate-700\"), \"absolute -mt-6 ml-3 text-[10px] px-1.5 py-0.5 rounded uppercase tracking-wide\"].join(\" \")}>{b.type}{isSelected ? \" • selected\" : \"\"}</div>\r\n              <BlockRenderer block={b} />\r\n            </div>\r\n          );\r\n        })}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAGA;AACA;AAJA;;;;AASe,SAAS,OAAO,EAAE,SAAS,EAAE,EAAE,YAAY,EAAE,EAAE,eAAe,EAAE,aAAa,EAAS;IACnG,qBACE,6PAAC;QAAI,WAAW,CAAC,+BAA+B,EAAE,WAAW;;0BAC3D,6PAAC;gBAAI,WAAU;0BACb,cAAA,6PAAC,wKAAa;;;;;;;;;;0BAGhB,6PAAC;gBAAI,WAAU;;oBACZ,OAAO,MAAM,KAAK,mBACjB,6PAAC;wBAAI,WAAU;kCAAyB;;;;;;oBAEzC,OAAO,GAAG,CAAC,CAAC;wBACX,MAAM,aAAa,EAAE,EAAE,KAAK;wBAC5B,qBACE,6PAAC;4BAEC,WAAW;gCACT;gCACA,aAAa,8CAA8C;6BAC5D,CAAC,IAAI,CAAC;4BACP,SAAS,IAAM,gBAAgB,EAAE,EAAE;;8CAEnC,6PAAC;oCAAI,WAAW;wCAAE,aAAa,4BAA4B;wCAAgC;qCAAgF,CAAC,IAAI,CAAC;;wCAAO,EAAE,IAAI;wCAAE,aAAa,gBAAgB;;;;;;;8CAC7N,6PAAC,wKAAa;oCAAC,OAAO;;;;;;;2BARjB,EAAE,EAAE;;;;;oBAWf;;;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 541, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\nimport type { BuilderBlock } from \"@/types/builder\";\r\n\r\ntype Props = {\r\n  blocks: BuilderBlock[];\r\n  selectedBlockId?: string | null;\r\n  onAddBlock: (type: string) => void;\r\n  onRemoveBlock: (id: string) => void;\r\n  onSelectBlock?: (id: string) => void;\r\n};\r\n\r\nexport function Sidebar({\r\n  blocks,\r\n  selectedBlockId,\r\n  onAddBlock,\r\n  onRemoveBlock,\r\n  onSelectBlock,\r\n}: Props) {\r\n  const blockTypes = [\r\n    { type: \"hero\", label: \"Hero\" },\r\n    { type: \"features\", label: \"Features\" },\r\n    { type: \"testimonials\", label: \"Testimonials\" },\r\n    { type: \"faq\", label: \"FAQ\" },\r\n    { type: \"cta\", label: \"Call to Action\" },\r\n  ];\r\n\r\n  return (\r\n    <aside className=\"w-72 border-r bg-slate-50 p-4 flex flex-col gap-4\">\r\n      <div>\r\n        <h2 className=\"text-sm font-semibold mb-2\">Add sections</h2>\r\n        <div className=\"grid grid-cols-1 gap-2\">\r\n          {blockTypes.map((bt) => (\r\n            <button\r\n              key={bt.type}\r\n              className=\"border rounded px-3 py-2 text-xs text-left bg-white hover:bg-slate-100\"\r\n              onClick={() => onAddBlock(bt.type)}\r\n            >\r\n              {bt.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex-1\">\r\n        <h2 className=\"text-sm font-semibold mb-2\">Sections</h2>\r\n        {blocks.length === 0 ? (\r\n          <p className=\"text-xs text-slate-400\">No sections yet. Add a hero or features to start.</p>\r\n        ) : (\r\n          <ul className=\"space-y-1\">\r\n            {blocks.map((block, index) => {\r\n              const isSelected = block.id === selectedBlockId;\r\n              return (\r\n                <li\r\n                  key={block.id}\r\n                  className={[\r\n                    \"flex items-center justify-between text-xs border rounded px-2 py-1 cursor-pointer\",\r\n                    isSelected\r\n                      ? \"bg-slate-900 text-white border-slate-900\"\r\n                      : \"bg-white hover:bg-slate-100 border-slate-200\",\r\n                  ].join(\" \")}\r\n                  onClick={() => onSelectBlock?.(block.id)}\r\n                >\r\n                  <span className=\"truncate\">\r\n                    {index + 1}. {block.type}\r\n                    {isSelected && \" • editing\"}\r\n                  </span>\r\n                  <button\r\n                    className={\"text-[10px] \" + (isSelected ? \"text-slate-200\" : \"text-red-500\")}\r\n                    onClick={(e) => {\r\n                      e.stopPropagation();\r\n                      onRemoveBlock(block.id);\r\n                    }}\r\n                  >\r\n                    Remove\r\n                  </button>\r\n                </li>\r\n              );\r\n            })}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAaO,SAAS,QAAQ,EACtB,MAAM,EACN,eAAe,EACf,UAAU,EACV,aAAa,EACb,aAAa,EACP;IACN,MAAM,aAAa;QACjB;YAAE,MAAM;YAAQ,OAAO;QAAO;QAC9B;YAAE,MAAM;YAAY,OAAO;QAAW;QACtC;YAAE,MAAM;YAAgB,OAAO;QAAe;QAC9C;YAAE,MAAM;YAAO,OAAO;QAAM;QAC5B;YAAE,MAAM;YAAO,OAAO;QAAiB;KACxC;IAED,qBACE,6PAAC;QAAM,WAAU;;0BACf,6PAAC;;kCACC,6PAAC;wBAAG,WAAU;kCAA6B;;;;;;kCAC3C,6PAAC;wBAAI,WAAU;kCACZ,WAAW,GAAG,CAAC,CAAC,mBACf,6PAAC;gCAEC,WAAU;gCACV,SAAS,IAAM,WAAW,GAAG,IAAI;0CAEhC,GAAG,KAAK;+BAJJ,GAAG,IAAI;;;;;;;;;;;;;;;;0BAUpB,6PAAC;gBAAI,WAAU;;kCACb,6PAAC;wBAAG,WAAU;kCAA6B;;;;;;oBAC1C,OAAO,MAAM,KAAK,kBACjB,6PAAC;wBAAE,WAAU;kCAAyB;;;;;6CAEtC,6PAAC;wBAAG,WAAU;kCACX,OAAO,GAAG,CAAC,CAAC,OAAO;4BAClB,MAAM,aAAa,MAAM,EAAE,KAAK;4BAChC,qBACE,6PAAC;gCAEC,WAAW;oCACT;oCACA,aACI,6CACA;iCACL,CAAC,IAAI,CAAC;gCACP,SAAS,IAAM,gBAAgB,MAAM,EAAE;;kDAEvC,6PAAC;wCAAK,WAAU;;4CACb,QAAQ;4CAAE;4CAAG,MAAM,IAAI;4CACvB,cAAc;;;;;;;kDAEjB,6PAAC;wCACC,WAAW,iBAAiB,CAAC,aAAa,mBAAmB,cAAc;wCAC3E,SAAS,CAAC;4CACR,EAAE,eAAe;4CACjB,cAAc,MAAM,EAAE;wCACxB;kDACD;;;;;;;+BAnBI,MAAM,EAAE;;;;;wBAwBnB;;;;;;;;;;;;;;;;;;AAMZ"}},
    {"offset": {"line": 689, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/editors/ImageField.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useRef } from \"react\";\r\n\r\ntype Props = {\r\n  label: string;\r\n  value?: string;\r\n  onChange: (value: string | null) => void;\r\n};\r\n\r\nexport function ImageField({ label, value, onChange }: Props) {\r\n  const inputRef = useRef<HTMLInputElement | null>(null);\r\n\r\n  function handleFile(e: React.ChangeEvent<HTMLInputElement>) {\r\n    const file = e.target.files?.[0];\r\n    if (!file) return onChange(null);\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = () => {\r\n      onChange(reader.result as string);\r\n    };\r\n    reader.readAsDataURL(file);\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      <label className=\"block text-xs font-medium text-slate-600\">{label}</label>\r\n\r\n      {value && (\r\n        <img\r\n          src={value}\r\n          alt=\"Preview\"\r\n          className=\"w-full h-auto rounded border mb-2\"\r\n        />\r\n      )}\r\n\r\n      <input\r\n        ref={inputRef}\r\n        type=\"file\"\r\n        accept=\"image/*\"\r\n        className=\"text-xs\"\r\n        onChange={handleFile}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAUO,SAAS,WAAW,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAS;IAC1D,MAAM,WAAW,IAAA,8NAAM,EAA0B;IAEjD,SAAS,WAAW,CAAsC;QACxD,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,CAAC,MAAM,OAAO,SAAS;QAE3B,MAAM,SAAS,IAAI;QACnB,OAAO,MAAM,GAAG;YACd,SAAS,OAAO,MAAM;QACxB;QACA,OAAO,aAAa,CAAC;IACvB;IAEA,qBACE,6PAAC;QAAI,WAAU;;0BACb,6PAAC;gBAAM,WAAU;0BAA4C;;;;;;YAE5D,uBACC,6PAAC;gBACC,KAAK;gBACL,KAAI;gBACJ,WAAU;;;;;;0BAId,6PAAC;gBACC,KAAK;gBACL,MAAK;gBACL,QAAO;gBACP,WAAU;gBACV,UAAU;;;;;;;;;;;;AAIlB"}},
    {"offset": {"line": 751, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/editors/TextField.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\ntype Props = {\r\n  label: string;\r\n  value?: string;\r\n  onChange: (value: string) => void;\r\n};\r\n\r\nexport function TextField({ label, value, onChange }: Props) {\r\n  return (\r\n    <label className=\"block text-xs font-medium text-slate-600\">\r\n      {label}\r\n      <input\r\n        className=\"mt-1 w-full border rounded px-2 py-1 text-sm\"\r\n        value={value ?? \"\"}\r\n        onChange={(e) => onChange(e.target.value)}\r\n      />\r\n    </label>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAUO,SAAS,UAAU,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAS;IACzD,qBACE,6PAAC;QAAM,WAAU;;YACd;0BACD,6PAAC;gBACC,WAAU;gBACV,OAAO,SAAS;gBAChB,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;AAIhD"}},
    {"offset": {"line": 783, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/editors/FeatureListEditor.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\ntype FeatureItem = {\r\n  title: string;\r\n  description: string;\r\n};\r\n\r\ntype Props = {\r\n  items: FeatureItem[];\r\n  onChange: (items: FeatureItem[]) => void;\r\n};\r\n\r\nexport function FeatureListEditor({ items, onChange }: Props) {\r\n  function updateItem(index: number, key: keyof FeatureItem, value: string) {\r\n    const updated = [...items];\r\n    updated[index] = { ...updated[index], [key]: value };\r\n    onChange(updated);\r\n  }\r\n\r\n  function addItem() {\r\n    onChange([...items, { title: \"\", description: \"\" }]);\r\n  }\r\n\r\n  function removeItem(index: number) {\r\n    onChange(items.filter((_, i) => i !== index));\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <h3 className=\"text-xs font-semibold text-slate-600\">Features</h3>\r\n\r\n      {items.map((item, index) => (\r\n        <div\r\n          key={index}\r\n          className=\"border rounded p-3 bg-slate-50 space-y-2 relative\"\r\n        >\r\n          <button\r\n            className=\"absolute top-2 right-2 text-red-500 text-xs\"\r\n            onClick={() => removeItem(index)}\r\n          >\r\n            ✕\r\n          </button>\r\n\r\n          <input\r\n            className=\"w-full border rounded px-2 py-1 text-xs\"\r\n            placeholder=\"Feature title\"\r\n            value={item.title}\r\n            onChange={(e) => updateItem(index, \"title\", e.target.value)}\r\n          />\r\n\r\n          <textarea\r\n            className=\"w-full border rounded px-2 py-1 text-xs\"\r\n            placeholder=\"Feature description\"\r\n            value={item.description}\r\n            onChange={(e) => updateItem(index, \"description\", e.target.value)}\r\n          />\r\n        </div>\r\n      ))}\r\n\r\n      <button\r\n        className=\"px-2 py-1 text-xs bg-slate-200 rounded hover:bg-slate-300\"\r\n        onClick={addItem}\r\n      >\r\n        + Add Feature\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAcO,SAAS,kBAAkB,EAAE,KAAK,EAAE,QAAQ,EAAS;IAC1D,SAAS,WAAW,KAAa,EAAE,GAAsB,EAAE,KAAa;QACtE,MAAM,UAAU;eAAI;SAAM;QAC1B,OAAO,CAAC,MAAM,GAAG;YAAE,GAAG,OAAO,CAAC,MAAM;YAAE,CAAC,IAAI,EAAE;QAAM;QACnD,SAAS;IACX;IAEA,SAAS;QACP,SAAS;eAAI;YAAO;gBAAE,OAAO;gBAAI,aAAa;YAAG;SAAE;IACrD;IAEA,SAAS,WAAW,KAAa;QAC/B,SAAS,MAAM,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;IACxC;IAEA,qBACE,6PAAC;QAAI,WAAU;;0BACb,6PAAC;gBAAG,WAAU;0BAAuC;;;;;;YAEpD,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,6PAAC;oBAEC,WAAU;;sCAEV,6PAAC;4BACC,WAAU;4BACV,SAAS,IAAM,WAAW;sCAC3B;;;;;;sCAID,6PAAC;4BACC,WAAU;4BACV,aAAY;4BACZ,OAAO,KAAK,KAAK;4BACjB,UAAU,CAAC,IAAM,WAAW,OAAO,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;sCAG5D,6PAAC;4BACC,WAAU;4BACV,aAAY;4BACZ,OAAO,KAAK,WAAW;4BACvB,UAAU,CAAC,IAAM,WAAW,OAAO,eAAe,EAAE,MAAM,CAAC,KAAK;;;;;;;mBArB7D;;;;;0BA0BT,6PAAC;gBACC,WAAU;gBACV,SAAS;0BACV;;;;;;;;;;;;AAKP"}},
    {"offset": {"line": 882, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/editors/FAQEditor.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\ntype FAQItem = {\r\n  question: string;\r\n  answer: string;\r\n};\r\n\r\ntype Props = {\r\n  items: FAQItem[];\r\n  onChange: (items: FAQItem[]) => void;\r\n};\r\n\r\nexport function FAQEditor({ items, onChange }: Props) {\r\n  function updateItem(index: number, key: keyof FAQItem, value: string) {\r\n    const updated = [...items];\r\n    updated[index] = { ...updated[index], [key]: value };\r\n    onChange(updated);\r\n  }\r\n\r\n  function addItem() {\r\n    onChange([...items, { question: \"\", answer: \"\" }]);\r\n  }\r\n\r\n  function removeItem(index: number) {\r\n    onChange(items.filter((_, i) => i !== index));\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <h3 className=\"text-xs font-semibold text-slate-600\">FAQ Items</h3>\r\n\r\n      {items.map((item, index) => (\r\n        <div\r\n          key={index}\r\n          className=\"border rounded p-3 bg-slate-50 space-y-2 relative\"\r\n        >\r\n          <button\r\n            className=\"absolute top-2 right-2 text-red-500 text-xs\"\r\n            onClick={() => removeItem(index)}\r\n          >\r\n            ✕\r\n          </button>\r\n\r\n          <input\r\n            className=\"w-full border rounded px-2 py-1 text-xs\"\r\n            placeholder=\"Question\"\r\n            value={item.question}\r\n            onChange={(e) => updateItem(index, \"question\", e.target.value)}\r\n          />\r\n\r\n          <textarea\r\n            className=\"w-full border rounded px-2 py-1 text-xs\"\r\n            placeholder=\"Answer\"\r\n            value={item.answer}\r\n            onChange={(e) => updateItem(index, \"answer\", e.target.value)}\r\n          />\r\n        </div>\r\n      ))}\r\n\r\n      <button\r\n        className=\"px-2 py-1 text-xs bg-slate-200 rounded hover:bg-slate-300\"\r\n        onClick={addItem}\r\n      >\r\n        + Add FAQ Item\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAcO,SAAS,UAAU,EAAE,KAAK,EAAE,QAAQ,EAAS;IAClD,SAAS,WAAW,KAAa,EAAE,GAAkB,EAAE,KAAa;QAClE,MAAM,UAAU;eAAI;SAAM;QAC1B,OAAO,CAAC,MAAM,GAAG;YAAE,GAAG,OAAO,CAAC,MAAM;YAAE,CAAC,IAAI,EAAE;QAAM;QACnD,SAAS;IACX;IAEA,SAAS;QACP,SAAS;eAAI;YAAO;gBAAE,UAAU;gBAAI,QAAQ;YAAG;SAAE;IACnD;IAEA,SAAS,WAAW,KAAa;QAC/B,SAAS,MAAM,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;IACxC;IAEA,qBACE,6PAAC;QAAI,WAAU;;0BACb,6PAAC;gBAAG,WAAU;0BAAuC;;;;;;YAEpD,MAAM,GAAG,CAAC,CAAC,MAAM,sBAChB,6PAAC;oBAEC,WAAU;;sCAEV,6PAAC;4BACC,WAAU;4BACV,SAAS,IAAM,WAAW;sCAC3B;;;;;;sCAID,6PAAC;4BACC,WAAU;4BACV,aAAY;4BACZ,OAAO,KAAK,QAAQ;4BACpB,UAAU,CAAC,IAAM,WAAW,OAAO,YAAY,EAAE,MAAM,CAAC,KAAK;;;;;;sCAG/D,6PAAC;4BACC,WAAU;4BACV,aAAY;4BACZ,OAAO,KAAK,MAAM;4BAClB,UAAU,CAAC,IAAM,WAAW,OAAO,UAAU,EAAE,MAAM,CAAC,KAAK;;;;;;;mBArBxD;;;;;0BA0BT,6PAAC;gBACC,WAAU;gBACV,SAAS;0BACV;;;;;;;;;;;;AAKP"}},
    {"offset": {"line": 981, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/editors/TestimonialEditor.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\ntype Testimonial = {\r\n  name: string;\r\n  quote: string;\r\n  avatar?: string;\r\n};\r\n\r\ntype Props = {\r\n  testimonials: Testimonial[];\r\n  onChange: (items: Testimonial[]) => void;\r\n};\r\n\r\nexport function TestimonialEditor({ testimonials, onChange }: Props) {\r\n  function updateItem(index: number, key: keyof Testimonial, value: string) {\r\n    const updated = [...testimonials];\r\n    updated[index] = { ...updated[index], [key]: value };\r\n    onChange(updated);\r\n  }\r\n\r\n  function addItem() {\r\n    onChange([...testimonials, { name: \"\", quote: \"\", avatar: \"\" }]);\r\n  }\r\n\r\n  function removeItem(index: number) {\r\n    onChange(testimonials.filter((_, i) => i !== index));\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <h3 className=\"text-xs font-semibold text-slate-600\">Testimonials</h3>\r\n\r\n      {testimonials.map((item, index) => (\r\n        <div\r\n          key={index}\r\n          className=\"border rounded p-3 bg-slate-50 space-y-2 relative\"\r\n        >\r\n          <button\r\n            className=\"absolute top-2 right-2 text-red-500 text-xs\"\r\n            onClick={() => removeItem(index)}\r\n          >\r\n            ✕\r\n          </button>\r\n\r\n          <input\r\n            className=\"w-full border rounded px-2 py-1 text-xs\"\r\n            placeholder=\"Name\"\r\n            value={item.name}\r\n            onChange={(e) => updateItem(index, \"name\", e.target.value)}\r\n          />\r\n\r\n          <textarea\r\n            className=\"w-full border rounded px-2 py-1 text-xs\"\r\n            placeholder=\"Quote\"\r\n            value={item.quote}\r\n            onChange={(e) => updateItem(index, \"quote\", e.target.value)}\r\n          />\r\n\r\n          <input\r\n            className=\"w-full border rounded px-2 py-1 text-xs\"\r\n            placeholder=\"Avatar URL\"\r\n            value={item.avatar}\r\n            onChange={(e) => updateItem(index, \"avatar\", e.target.value)}\r\n          />\r\n        </div>\r\n      ))}\r\n\r\n      <button\r\n        className=\"px-2 py-1 text-xs bg-slate-200 rounded hover:bg-slate-300\"\r\n        onClick={addItem}\r\n      >\r\n        + Add Testimonial\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AAeO,SAAS,kBAAkB,EAAE,YAAY,EAAE,QAAQ,EAAS;IACjE,SAAS,WAAW,KAAa,EAAE,GAAsB,EAAE,KAAa;QACtE,MAAM,UAAU;eAAI;SAAa;QACjC,OAAO,CAAC,MAAM,GAAG;YAAE,GAAG,OAAO,CAAC,MAAM;YAAE,CAAC,IAAI,EAAE;QAAM;QACnD,SAAS;IACX;IAEA,SAAS;QACP,SAAS;eAAI;YAAc;gBAAE,MAAM;gBAAI,OAAO;gBAAI,QAAQ;YAAG;SAAE;IACjE;IAEA,SAAS,WAAW,KAAa;QAC/B,SAAS,aAAa,MAAM,CAAC,CAAC,GAAG,IAAM,MAAM;IAC/C;IAEA,qBACE,6PAAC;QAAI,WAAU;;0BACb,6PAAC;gBAAG,WAAU;0BAAuC;;;;;;YAEpD,aAAa,GAAG,CAAC,CAAC,MAAM,sBACvB,6PAAC;oBAEC,WAAU;;sCAEV,6PAAC;4BACC,WAAU;4BACV,SAAS,IAAM,WAAW;sCAC3B;;;;;;sCAID,6PAAC;4BACC,WAAU;4BACV,aAAY;4BACZ,OAAO,KAAK,IAAI;4BAChB,UAAU,CAAC,IAAM,WAAW,OAAO,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;sCAG3D,6PAAC;4BACC,WAAU;4BACV,aAAY;4BACZ,OAAO,KAAK,KAAK;4BACjB,UAAU,CAAC,IAAM,WAAW,OAAO,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;sCAG5D,6PAAC;4BACC,WAAU;4BACV,aAAY;4BACZ,OAAO,KAAK,MAAM;4BAClB,UAAU,CAAC,IAAM,WAAW,OAAO,UAAU,EAAE,MAAM,CAAC,KAAK;;;;;;;mBA5BxD;;;;;0BAiCT,6PAAC;gBACC,WAAU;gBACV,SAAS;0BACV;;;;;;;;;;;;AAKP"}},
    {"offset": {"line": 1091, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/editors/ToneSelector.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React from \"react\";\r\n\r\ntype Props = {\r\n  value?: string;\r\n  onChange: (value: string) => void;\r\n};\r\n\r\nexport function ToneSelector({ value, onChange }: Props) {\r\n  const tones = [\"professional\", \"friendly\", \"bold\", \"playful\", \"luxury\"];\r\n\r\n  return (\r\n    <div className=\"space-y-1\">\r\n      <label className=\"block text-xs font-medium text-slate-600\">\r\n        Tone / Style\r\n      </label>\r\n\r\n      <select\r\n        className=\"w-full border rounded px-2 py-1 text-sm\"\r\n        value={value ?? \"\"}\r\n        onChange={(e) => onChange(e.target.value)}\r\n      >\r\n        <option value=\"\">Default</option>\r\n        {tones.map((tone) => (\r\n          <option key={tone} value={tone}>\r\n            {tone}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAAA;;AASO,SAAS,aAAa,EAAE,KAAK,EAAE,QAAQ,EAAS;IACrD,MAAM,QAAQ;QAAC;QAAgB;QAAY;QAAQ;QAAW;KAAS;IAEvE,qBACE,6PAAC;QAAI,WAAU;;0BACb,6PAAC;gBAAM,WAAU;0BAA2C;;;;;;0BAI5D,6PAAC;gBACC,WAAU;gBACV,OAAO,SAAS;gBAChB,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;;kCAExC,6PAAC;wBAAO,OAAM;kCAAG;;;;;;oBAChB,MAAM,GAAG,CAAC,CAAC,qBACV,6PAAC;4BAAkB,OAAO;sCACvB;2BADU;;;;;;;;;;;;;;;;;AAOvB"}},
    {"offset": {"line": 1155, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/editors/AIRewriteButton.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\n\r\ntype Props = {\r\n  text?: string;\r\n  onRewrite: (value: string) => void;\r\n};\r\n\r\nexport function AIRewriteButton({ text, onRewrite }: Props) {\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  async function handleRewrite() {\r\n    if (!text) return;\r\n    setLoading(true);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/ai/content\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ slot: \"rewrite\", context: { text } }),\r\n      });\r\n\r\n      const json = await res.json();\r\n      if (json?.text) onRewrite(json.text);\r\n    } catch (err) {\r\n      console.error(\"[AI_REWRITE_ERROR]\", err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <button\r\n      onClick={handleRewrite}\r\n      disabled={loading}\r\n      className=\"text-xs px-2 py-1 bg-slate-200 rounded hover:bg-slate-300\"\r\n    >\r\n      {loading ? \"Rewriting…\" : \"Rewrite with AI\"}\r\n    </button>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AASO,SAAS,gBAAgB,EAAE,IAAI,EAAE,SAAS,EAAS;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,gOAAQ,EAAC;IAEvC,eAAe;QACb,IAAI,CAAC,MAAM;QACX,WAAW;QAEX,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,mBAAmB;gBACzC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,MAAM;oBAAW,SAAS;wBAAE;oBAAK;gBAAE;YAC5D;YAEA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,IAAI,MAAM,MAAM,UAAU,KAAK,IAAI;QACrC,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,sBAAsB;QACtC,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,6PAAC;QACC,SAAS;QACT,UAAU;QACV,WAAU;kBAET,UAAU,eAAe;;;;;;AAGhC"}},
    {"offset": {"line": 1205, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/components/builder/BlockEditorSidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport type { BuilderBlock } from \"@/types/builder\";\r\nimport { ImageField } from \"./editors/ImageField\";\r\nimport { TextField } from \"./editors/TextField\";\r\nimport { FeatureListEditor } from \"./editors/FeatureListEditor\";\r\nimport { FAQEditor } from \"./editors/FAQEditor\";\r\nimport { TestimonialEditor } from \"./editors/TestimonialEditor\";\r\nimport { ToneSelector } from \"./editors/ToneSelector\";\r\nimport { AIRewriteButton } from \"./editors/AIRewriteButton\";\r\n\r\ntype Props = {\r\n  block: BuilderBlock | null;\r\n  onChange: (data: Record<string, any>) => void;\r\n  onRegenerate: () => void;\r\n  onMoveUp: () => void;\r\n  onMoveDown: () => void;\r\n  onDelete: () => void;\r\n};\r\n\r\nexport default function BlockEditorSidebar({\r\n  block,\r\n  onChange,\r\n  onRegenerate,\r\n  onMoveUp,\r\n  onMoveDown,\r\n  onDelete,\r\n}: Props) {\r\n  if (!block) {\r\n    return (\r\n      <aside className=\"w-96 border-l bg-slate-50 p-6 text-sm text-slate-500\">\r\n        Select a section to edit its content.\r\n      </aside>\r\n    );\r\n  }\r\n\r\n  const [localData, setLocalData] = useState(block.data ?? {});\r\n\r\n  function updateField(key: string, value: any) {\r\n    const updated = { ...localData, [key]: value };\r\n    setLocalData(updated);\r\n    onChange(updated);\r\n  }\r\n\r\n  function renderFields() {\r\n    if (!block) return null;\r\n    switch (block.type) {\r\n      case \"hero\":\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            <TextField\r\n              label=\"Heading\"\r\n              value={localData.heading}\r\n              onChange={(v) => updateField(\"heading\", v)}\r\n            />\r\n            <AIRewriteButton\r\n              text={localData.heading}\r\n              onRewrite={(v) => updateField(\"heading\", v)}\r\n            />\r\n\r\n            <TextField\r\n              label=\"Subheading\"\r\n              value={localData.subheading}\r\n              onChange={(v) => updateField(\"subheading\", v)}\r\n            />\r\n            <AIRewriteButton\r\n              text={localData.subheading}\r\n              onRewrite={(v) => updateField(\"subheading\", v)}\r\n            />\r\n\r\n            <TextField\r\n              label=\"Primary CTA\"\r\n              value={localData.primaryCta}\r\n              onChange={(v) => updateField(\"primaryCta\", v)}\r\n            />\r\n\r\n            <TextField\r\n              label=\"Secondary CTA\"\r\n              value={localData.secondaryCta}\r\n              onChange={(v) => updateField(\"secondaryCta\", v)}\r\n            />\r\n\r\n            <ImageField\r\n              label=\"Hero Image\"\r\n              value={localData.image}\r\n              onChange={(v) => updateField(\"image\", v)}\r\n            />\r\n          </div>\r\n        );\r\n\r\n      case \"features\":\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            <TextField\r\n              label=\"Title\"\r\n              value={localData.title}\r\n              onChange={(v) => updateField(\"title\", v)}\r\n            />\r\n            <AIRewriteButton\r\n              text={localData.title}\r\n              onRewrite={(v) => updateField(\"title\", v)}\r\n            />\r\n\r\n            <TextField\r\n              label=\"Subtitle\"\r\n              value={localData.subtitle}\r\n              onChange={(v) => updateField(\"subtitle\", v)}\r\n            />\r\n            <AIRewriteButton\r\n              text={localData.subtitle}\r\n              onRewrite={(v) => updateField(\"subtitle\", v)}\r\n            />\r\n\r\n            <FeatureListEditor\r\n              items={localData.items ?? []}\r\n              onChange={(v) => updateField(\"items\", v)}\r\n            />\r\n          </div>\r\n        );\r\n\r\n      case \"faq\":\r\n        return (\r\n          <FAQEditor\r\n            items={localData.items ?? []}\r\n            onChange={(v) => updateField(\"items\", v)}\r\n          />\r\n        );\r\n\r\n      case \"testimonials\":\r\n        return (\r\n          <TestimonialEditor\r\n            testimonials={localData.testimonials ?? []}\r\n            onChange={(v) => updateField(\"testimonials\", v)}\r\n          />\r\n        );\r\n\r\n      case \"cta\":\r\n        return (\r\n          <div className=\"space-y-4\">\r\n            <TextField\r\n              label=\"Heading\"\r\n              value={localData.heading}\r\n              onChange={(v) => updateField(\"heading\", v)}\r\n            />\r\n            <AIRewriteButton\r\n              text={localData.heading}\r\n              onRewrite={(v) => updateField(\"heading\", v)}\r\n            />\r\n\r\n            <TextField\r\n              label=\"Subheading\"\r\n              value={localData.subheading}\r\n              onChange={(v) => updateField(\"subheading\", v)}\r\n            />\r\n            <AIRewriteButton\r\n              text={localData.subheading}\r\n              onRewrite={(v) => updateField(\"subheading\", v)}\r\n            />\r\n\r\n            <TextField\r\n              label=\"Primary CTA\"\r\n              value={localData.primaryCta}\r\n              onChange={(v) => updateField(\"primaryCta\", v)}\r\n            />\r\n\r\n            <TextField\r\n              label=\"Secondary CTA\"\r\n              value={localData.secondaryCta}\r\n              onChange={(v) => updateField(\"secondaryCta\", v)}\r\n            />\r\n          </div>\r\n        );\r\n\r\n      default:\r\n        return (\r\n          <p className=\"text-xs text-slate-500\">\r\n            No editor available for block type: {block.type}\r\n          </p>\r\n        );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <aside className=\"w-96 border-l bg-white p-6 overflow-y-auto\">\r\n      <h2 className=\"text-lg font-semibold mb-4\">Edit Section</h2>\r\n\r\n      <div className=\"space-y-6\">{renderFields()}</div>\r\n\r\n      <div className=\"mt-8 space-y-4\">\r\n        <ToneSelector\r\n          value={localData.tone}\r\n          onChange={(v) => updateField(\"tone\", v)}\r\n        />\r\n\r\n        <button\r\n          onClick={async () => {\r\n            try {\r\n              const res = await fetch(\"/api/ai/section/generate\", {\r\n                method: \"POST\",\r\n                headers: { \"Content-Type\": \"application/json\" },\r\n                body: JSON.stringify({\r\n                  section: {\r\n                    id: block.id,\r\n                    type: block.type,\r\n                    data: localData,\r\n                  },\r\n                  context: {\r\n                    tone: localData.tone,\r\n                  },\r\n                }),\r\n              });\r\n\r\n              const json = await res.json();\r\n\r\n              if (json?.section?.data) {\r\n                // Merge AI output with existing data (preserve user edits)\r\n                const merged = {\r\n                  ...localData,\r\n                  ...json.section.data,\r\n                };\r\n                setLocalData(merged);\r\n                onChange(merged);\r\n              }\r\n            } catch (err) {\r\n              console.error(\"[AI_REGENERATE_ERROR]\", err);\r\n            }\r\n          }}\r\n          className=\"w-full px-4 py-2 rounded bg-slate-900 text-white text-sm\"\r\n        >\r\n          Regenerate with AI\r\n        </button>\r\n\r\n        <div className=\"flex items-center justify-between text-xs text-slate-600\">\r\n          <button onClick={onMoveUp} className=\"hover:text-slate-900\">\r\n            ↑ Move Up\r\n          </button>\r\n          <button onClick={onMoveDown} className=\"hover:text-slate-900\">\r\n            ↓ Move Down\r\n          </button>\r\n          <button\r\n            onClick={() => {\r\n              // Duplicate block by cloning localData\r\n              const clone = { ...localData };\r\n              onChange({ __duplicate__: true, ...clone });\r\n            }}\r\n            className=\"hover:text-slate-900\"\r\n          >\r\n            Duplicate\r\n          </button>\r\n          <button onClick={onDelete} className=\"text-red-500 hover:text-red-700\">\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </aside>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1609, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/lib/kv.ts"],"sourcesContent":["// Thin Vercel KV adapter. If @vercel/kv is not installed or KV is not configured,\r\n// these functions fail gracefully and return null / noop. A conservative\r\n// no-write fallback is implemented so we can avoid attempting writes when the\r\n// deployment only provides a read-only token.\r\nlet kvClient: any = null\r\n// Flags will be computed after env mapping so they reflect mapped UPSTASH vars\r\nlet WRITE_ENABLED = false\r\nlet READ_ONLY_ONLY = false\r\nlet NO_WRITE_FALLBACK = false\r\n\r\ntry {\r\n  // If the project already has UPSTASH_REDIS_REST_URL / UPSTASH_REDIS_REST_TOKEN\r\n  // or custom WRITE/READ env names set, map them to the names expected by\r\n  // `@vercel/kv` at runtime so the package can pick them up without changing\r\n  // Vercel project env names. Do NOT log values or expose secrets.\r\n  if (!process.env.KV_REST_API_URL) {\r\n    process.env.KV_REST_API_URL = process.env.UPSTASH_REDIS_REST_URL || process.env.KV_REST_API_URL\r\n  }\r\n  if (!process.env.KV_REST_API_TOKEN) {\r\n    process.env.KV_REST_API_TOKEN = process.env.KV_REST_API_WRITE_TOKEN || process.env.UPSTASH_REDIS_REST_TOKEN || process.env.KV_REST_API_READ_ONLY_TOKEN || process.env.KV_REST_API_TOKEN\r\n  }\r\n\r\n  // Compute write/read flags after any env mapping above so they reflect\r\n  // the effective environment variables (e.g. UPSTASH -> KV mapping).\r\n  WRITE_ENABLED = !!(process.env.KV_REST_API_WRITE_TOKEN || process.env.KV_REST_API_TOKEN)\r\n  READ_ONLY_ONLY = !!process.env.KV_REST_API_READ_ONLY_TOKEN && !WRITE_ENABLED\r\n  NO_WRITE_FALLBACK = process.env.NO_WRITE_FALLBACK === 'true' || READ_ONLY_ONLY\r\n\r\n  // If explicit Upstash REST envs are present prefer a thin REST wrapper so\r\n  // local scripts and child processes use the same predictable code-path.\r\n  const earlyUpstashUrl = process.env.UPSTASH_REDIS_REST_URL\r\n  const earlyUpstashToken = process.env.UPSTASH_REDIS_REST_TOKEN\r\n  if (earlyUpstashUrl && earlyUpstashToken) {\r\n    const base = earlyUpstashUrl.replace(/\\/$/, '')\r\n    kvClient = {\r\n      async get(key: string) {\r\n        try {\r\n          const res = await fetch(`${base}/get/${encodeURIComponent(key)}`, {\r\n            headers: { Authorization: `Bearer ${earlyUpstashToken}` },\r\n          })\r\n          if (!res.ok) return null\r\n          const j = await res.json()\r\n          return j.result ?? null\r\n        } catch (err) {\r\n          console.error(\"[KV] early REST get() failed:\", err)\r\n          return null\r\n        }\r\n      },\r\n      async set(key: string, value: any) {\r\n        if (NO_WRITE_FALLBACK) return { skippedReadOnly: true }\r\n        try {\r\n          await fetch(`${base}/set/${encodeURIComponent(key)}`, {\r\n            method: 'POST',\r\n            headers: {\r\n              Authorization: `Bearer ${earlyUpstashToken}`,\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ value: typeof value === 'string' ? value : JSON.stringify(value) }),\r\n          })\r\n          return true\r\n        } catch (err) {\r\n          console.error(\"[KV] early REST set() failed:\", err)\r\n          return null\r\n        }\r\n      },\r\n      async expire(key: string, ttl: number) {\r\n        if (NO_WRITE_FALLBACK) return null\r\n        try {\r\n          await fetch(`${base}/expire/${encodeURIComponent(key)}`, {\r\n            method: 'POST',\r\n            headers: {\r\n              Authorization: `Bearer ${earlyUpstashToken}`,\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ ttl }),\r\n          })\r\n          return true\r\n        } catch (err) {\r\n          console.error(\"[KV] early REST expire() failed:\", err)\r\n          return null\r\n        }\r\n      },\r\n    }\r\n  }\r\n\r\n  // Construct the module name so static analyzers can't find the literal\r\n  const moduleName = '@' + 'vercel' + '/kv'\r\n  // Use eval to call require at runtime; this avoids bundlers resolving the import\r\n  // eslint-disable-next-line @typescript-eslint/no-implied-eval\r\n  // @ts-ignore\r\n  const kvModule = eval('require')(moduleName)\r\n\r\n  // Pick a candidate client from common export shapes\r\n  let candidate: any = kvModule?.kv ?? kvModule?.default ?? kvModule\r\n\r\n  // If the module exports a factory function, attempt to call it with env\r\n  if (typeof candidate === 'function') {\r\n    // Wrap factory in a lazy initializer so child processes or scripts that\r\n    // load env files after module import still work. The lazy wrapper will\r\n    // call the factory on first use with the current env values.\r\n    const factory = candidate\r\n    const makeLazy = (factoryFn: any) => {\r\n      let realClient: any = null\r\n      let initAttempted = false\r\n      const ensure = async () => {\r\n        if (realClient) return realClient\r\n        if (initAttempted) return realClient\r\n        initAttempted = true\r\n        try {\r\n          const url = process.env.KV_REST_API_URL || process.env.UPSTASH_REDIS_REST_URL\r\n          const token = process.env.KV_REST_API_TOKEN || process.env.UPSTASH_REDIS_REST_TOKEN\r\n          realClient = await factoryFn({ url, token })\r\n          if (!(realClient && typeof realClient.get === 'function' && typeof realClient.set === 'function')) {\r\n            realClient = null\r\n          }\r\n        } catch (err) {\r\n          realClient = null\r\n        }\r\n        return realClient\r\n      }\r\n      return {\r\n        async get(k: string) {\r\n          const c = await ensure()\r\n          if (!c) throw new Error('kv_not_initialized')\r\n          return c.get(k)\r\n        },\r\n        async set(k: string, v: any) {\r\n          const c = await ensure()\r\n          if (!c) throw new Error('kv_not_initialized')\r\n          return c.set(k, v)\r\n        },\r\n        async expire(k: string, t: number) {\r\n          const c = await ensure()\r\n          if (!c) throw new Error('kv_not_initialized')\r\n          if (typeof c.expire === 'function') return c.expire(k, t)\r\n          return null\r\n        },\r\n      }\r\n    }\r\n\r\n    try {\r\n      candidate = makeLazy(factory)\r\n    } catch (err) {\r\n      // ignore and validate below\r\n    }\r\n  }\r\n\r\n  // Validate that candidate exposes get/set\r\n  if (candidate && typeof candidate.get === 'function' && typeof candidate.set === 'function') {\r\n    kvClient = candidate\r\n  } else {\r\n    // Diagnostic + force fallback to Upstash REST in the catch block below\r\n    console.warn('[KV] Falling back to Upstash REST wrapper: invalid client shape', Object.keys(kvModule || {}))\r\n    throw new Error('invalid_kv_client_shape')\r\n  }\r\n} catch (e) {\r\n  // package not installed or not available in this environment; try an\r\n  // Upstash REST fallback if UPSTASH_REDIS_REST_URL/TOKEN are available.\r\n  const upstashUrl = process.env.UPSTASH_REDIS_REST_URL\r\n  const upstashToken = process.env.UPSTASH_REDIS_REST_TOKEN\r\n  if (upstashUrl && upstashToken) {\r\n    const base = upstashUrl.replace(/\\/$/, '')\r\n    kvClient = {\r\n      async get(key: string) {\r\n        try {\r\n          const res = await fetch(`${base}/get/${encodeURIComponent(key)}`, {\r\n            headers: { Authorization: `Bearer ${upstashToken}` },\r\n          })\r\n          if (!res.ok) return null\r\n          const j = await res.json()\r\n          return j.result ?? null\r\n        } catch (err) {\r\n          console.error(\"[KV] get() failed:\", err)\r\n          return null\r\n        }\r\n      },\r\n      async set(key: string, value: any) {\r\n        if (NO_WRITE_FALLBACK) return { skippedReadOnly: true }\r\n        try {\r\n          // Upstash expects simple JSON with `value` field for the set endpoint\r\n          await fetch(`${base}/set/${encodeURIComponent(key)}`, {\r\n            method: 'POST',\r\n            headers: {\r\n              Authorization: `Bearer ${upstashToken}`,\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ value: typeof value === 'string' ? value : JSON.stringify(value) }),\r\n          })\r\n          return true\r\n        } catch (err) {\r\n          console.error(\"[KV] set() failed:\", err)\r\n          return null\r\n        }\r\n      },\r\n      async expire(key: string, ttl: number) {\r\n        if (NO_WRITE_FALLBACK) return null\r\n        try {\r\n          await fetch(`${base}/expire/${encodeURIComponent(key)}`, {\r\n            method: 'POST',\r\n            headers: {\r\n              Authorization: `Bearer ${upstashToken}`,\r\n              'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({ ttl }),\r\n          })\r\n          return true\r\n        } catch (err) {\r\n          console.error(\"[KV] expire() failed:\", err)\r\n          return null\r\n        }\r\n      },\r\n    }\r\n  } else {\r\n    kvClient = null\r\n  }\r\n}\r\n\r\nconst RDAP_TTL_SECONDS = 300\r\n\r\nexport async function kvGetRdap(domain: string) {\r\n  if (!kvClient) return null\r\n  try {\r\n    const key = `rdap:${domain.toLowerCase()}`\r\n    const value = await kvClient.get(key)\r\n    return value ?? null\r\n  } catch (e) {\r\n    return null\r\n  }\r\n}\r\n\r\nexport async function kvSetRdap(domain: string, value: any) {\r\n  if (!kvClient) return null\r\n  if (NO_WRITE_FALLBACK) return { skippedReadOnly: true }\r\n  try {\r\n    const key = `rdap:${domain.toLowerCase()}`\r\n    // @vercel/kv supports expire via .set with options in newer versions; use simple set\r\n    const setResult = await kvClient.set(key, value)\r\n    // If the client supports expiration, set TTL separately (best-effort)\r\n    try {\r\n      if (typeof kvClient.expire === 'function') await kvClient.expire(key, RDAP_TTL_SECONDS)\r\n    } catch (_) {\r\n      // ignore\r\n    }\r\n    return setResult\r\n  } catch (e) {\r\n    // fail silently\r\n    return null\r\n  }\r\n}\r\n\r\n// Lightweight generic KV helper (non-breaking addition).\r\n// Provides `kv.get(key)` and `kv.set(key, value, { ex })` to support debug routes.\r\nexport const kv = {\r\n  async get(key: string) {\r\n    if (!kvClient) return null\r\n    try {\r\n      const v = await kvClient.get(key)\r\n      // Normalize multiple possible shapes returned by different clients\r\n      //  - raw primitive (number/string)\r\n      //  - JSON string (\"{...}\")\r\n      //  - wrapped object like { value: \"...\" }\r\n      if (v === null || v === undefined) return null\r\n\r\n      let parsed: any = v\r\n      if (typeof v === 'string') {\r\n        try {\r\n          parsed = JSON.parse(v)\r\n        } catch (_) {\r\n          parsed = v\r\n        }\r\n      }\r\n\r\n      // If the stored value is wrapped as { value: \"...\" }, unwrap it.\r\n      if (parsed && typeof parsed === 'object' && 'value' in parsed) {\r\n        const inner = parsed.value\r\n        if (typeof inner === 'string') {\r\n          try {\r\n            return JSON.parse(inner)\r\n          } catch (_) {\r\n            return inner\r\n          }\r\n        }\r\n        return inner\r\n      }\r\n\r\n      return parsed\r\n    } catch (err) {\r\n      console.error(\"[KV] get() failed:\", err)\r\n      // If the underlying client failed due to an invalid/missing base URL,\r\n      // attempt a best-effort direct Upstash REST fallback using environment\r\n      // variables. This helps in child-process/test runtimes where the\r\n      // installed client was initialized with undefined env values.\r\n      try {\r\n        if (process.env.UPSTASH_REDIS_REST_URL && process.env.UPSTASH_REDIS_REST_TOKEN) {\r\n          const base = (process.env.UPSTASH_REDIS_REST_URL || '').replace(/\\/$/, '')\r\n          const upstashToken = process.env.UPSTASH_REDIS_REST_TOKEN\r\n          const url = `${base}/get/${encodeURIComponent(key)}`\r\n          console.log('[KV] attempting Upstash REST fallback GET', url)\r\n          const res = await fetch(url, {\r\n            headers: { Authorization: `Bearer ${upstashToken}` },\r\n          })\r\n          console.log('[KV] upstash REST fallback status', res.status)\r\n          if (!res.ok) return null\r\n          const j = await res.json()\r\n          console.log('[KV] upstash REST fallback body keys', Object.keys(j || {}))\r\n          return j.result ?? null\r\n        }\r\n      } catch (fallbackErr) {\r\n        console.error('[KV] upstash REST fallback failed:', fallbackErr)\r\n      }\r\n      return null\r\n    }\r\n  },\r\n  async set(key: string, value: any, opts?: { ex?: number }) {\r\n    if (!kvClient) return null\r\n    if (NO_WRITE_FALLBACK) return { skippedReadOnly: true }\r\n    try {\r\n      // Avoid double-encoding: pass raw values to the underlying client and\r\n      // let that client (or our Upstash REST wrapper) handle any required\r\n      // encoding. This prevents nested JSON like \"{\\\"value\\\":\\\"1\\\"}\".\r\n      const setResult = await kvClient.set(key, value)\r\n      if (opts?.ex && typeof kvClient.expire === 'function') {\r\n        try {\r\n          await kvClient.expire(key, Math.ceil(opts.ex))\r\n        } catch (_) {\r\n          // ignore\r\n        }\r\n      }\r\n      return setResult\r\n    } catch (err) {\r\n      console.error(\"[KV] set() failed:\", err)\r\n      return null\r\n    }\r\n  },\r\n}\r\n\r\nexport default { kvGetRdap, kvSetRdap }\r\n\r\nexport function getKvStatus() {\r\n  return {\r\n    writeEnabled: WRITE_ENABLED,\r\n    readOnlyOnly: READ_ONLY_ONLY,\r\n    noWriteFallback: NO_WRITE_FALLBACK,\r\n    kvClientPresent: !!kvClient,\r\n    kvUrl: process.env.KV_REST_API_URL || process.env.UPSTASH_REDIS_REST_URL || null,\r\n  }\r\n}\r\n\r\n// Temporary debug helper — writes and reads a test key and logs results.\r\nexport async function debugKvRoundTrip() {\r\n  const key = \"debug:kv:test\"\r\n  const value = { ok: true, ts: Date.now() }\r\n  console.log(\"[KV] Writing test key:\", key)\r\n  const writeResult = await kv.set(key, JSON.stringify(value))\r\n  console.log(\"[KV] Write result:\", writeResult)\r\n  const readResult = await kv.get(key)\r\n  console.log(\"[KV] Read result:\", readResult)\r\n  return { writeResult, readResult }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1999, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/lib/builder/load.ts"],"sourcesContent":["import { kv } from \"@/lib/kv\";\r\nimport type { BuilderState } from \"@/types/builder\";\r\n\r\nconst KEY_PREFIX = \"buildwithai:site:\";\r\n\r\nexport async function loadSiteState(\r\n  siteId: string\r\n): Promise<BuilderState | null> {\r\n  const key = `${KEY_PREFIX}${siteId}`;\r\n  const raw = await kv.get(key);\r\n  if (!raw) return null;\r\n\r\n  // `kv.get` may return a parsed object or a JSON string depending on the\r\n  // underlying client. Normalize to an object safely.\r\n  let parsed: any = raw;\r\n  if (typeof raw === \"string\") {\r\n    try {\r\n      parsed = JSON.parse(raw);\r\n    } catch {\r\n      // If parsing fails, treat as missing/invalid\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Validate minimal schema\r\n  if (!parsed || typeof parsed !== \"object\") return null;\r\n  if (!parsed.metadata || !parsed.pages) return null;\r\n\r\n  // Ensure metadata fields exist\r\n  parsed.metadata = {\r\n    id: parsed.metadata.id ?? siteId,\r\n    name: parsed.metadata.name ?? \"\",\r\n    description: parsed.metadata.description ?? \"\",\r\n    createdAt: parsed.metadata.createdAt ?? Date.now(),\r\n    updatedAt: parsed.metadata.updatedAt ?? Date.now(),\r\n    version: parsed.metadata.version ?? 1,\r\n  };\r\n\r\n  // Ensure pages array exists\r\n  if (!Array.isArray(parsed.pages)) parsed.pages = [];\r\n\r\n  return parsed as BuilderState;\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAGA,MAAM,aAAa;AAEZ,eAAe,cACpB,MAAc;IAEd,MAAM,MAAM,GAAG,aAAa,QAAQ;IACpC,MAAM,MAAM,MAAM,qIAAE,CAAC,GAAG,CAAC;IACzB,IAAI,CAAC,KAAK,OAAO;IAEjB,wEAAwE;IACxE,oDAAoD;IACpD,IAAI,SAAc;IAClB,IAAI,OAAO,QAAQ,UAAU;QAC3B,IAAI;YACF,SAAS,KAAK,KAAK,CAAC;QACtB,EAAE,OAAM;YACN,6CAA6C;YAC7C,OAAO;QACT;IACF;IAEA,0BAA0B;IAC1B,IAAI,CAAC,UAAU,OAAO,WAAW,UAAU,OAAO;IAClD,IAAI,CAAC,OAAO,QAAQ,IAAI,CAAC,OAAO,KAAK,EAAE,OAAO;IAE9C,+BAA+B;IAC/B,OAAO,QAAQ,GAAG;QAChB,IAAI,OAAO,QAAQ,CAAC,EAAE,IAAI;QAC1B,MAAM,OAAO,QAAQ,CAAC,IAAI,IAAI;QAC9B,aAAa,OAAO,QAAQ,CAAC,WAAW,IAAI;QAC5C,WAAW,OAAO,QAAQ,CAAC,SAAS,IAAI,KAAK,GAAG;QAChD,WAAW,OAAO,QAAQ,CAAC,SAAS,IAAI,KAAK,GAAG;QAChD,SAAS,OAAO,QAAQ,CAAC,OAAO,IAAI;IACtC;IAEA,4BAA4B;IAC5B,IAAI,CAAC,MAAM,OAAO,CAAC,OAAO,KAAK,GAAG,OAAO,KAAK,GAAG,EAAE;IAEnD,OAAO;AACT"}},
    {"offset": {"line": 2041, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/lib/builder/save.ts"],"sourcesContent":["import { kv } from \"@/lib/kv\";\r\nimport type { BuilderState } from \"@/types/builder\";\r\n\r\nconst KEY_PREFIX = \"buildwithai:site:\";\r\n\r\nexport async function saveSiteState(\r\n  siteId: string,\r\n  state: BuilderState\r\n): Promise<void> {\r\n  const key = `${KEY_PREFIX}${siteId}`;\r\n  // Ensure metadata exists\r\n  const metadata = state.metadata ?? {\r\n    id: siteId,\r\n    createdAt: Date.now(),\r\n    updatedAt: Date.now(),\r\n    version: 1,\r\n  };\r\n\r\n  // Increment version + update timestamp\r\n  const nextMetadata = {\r\n    ...metadata,\r\n    updatedAt: Date.now(),\r\n    version: (metadata.version ?? 0) + 1,\r\n  };\r\n\r\n  const payload = JSON.stringify({\r\n    ...state,\r\n    metadata: nextMetadata,\r\n  });\r\n\r\n  await kv.set(key, payload);\r\n}\r\n\r\n// Backwards-compatible adapter expected by templates create route\r\nexport async function saveSite(siteId: string, state: BuilderState) {\r\n  return saveSiteState(siteId, state);\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AAGA,MAAM,aAAa;AAEZ,eAAe,cACpB,MAAc,EACd,KAAmB;IAEnB,MAAM,MAAM,GAAG,aAAa,QAAQ;IACpC,yBAAyB;IACzB,MAAM,WAAW,MAAM,QAAQ,IAAI;QACjC,IAAI;QACJ,WAAW,KAAK,GAAG;QACnB,WAAW,KAAK,GAAG;QACnB,SAAS;IACX;IAEA,uCAAuC;IACvC,MAAM,eAAe;QACnB,GAAG,QAAQ;QACX,WAAW,KAAK,GAAG;QACnB,SAAS,CAAC,SAAS,OAAO,IAAI,CAAC,IAAI;IACrC;IAEA,MAAM,UAAU,KAAK,SAAS,CAAC;QAC7B,GAAG,KAAK;QACR,UAAU;IACZ;IAEA,MAAM,qIAAE,CAAC,GAAG,CAAC,KAAK;AACpB;AAGO,eAAe,SAAS,MAAc,EAAE,KAAmB;IAChE,OAAO,cAAc,QAAQ;AAC/B"}},
    {"offset": {"line": 2078, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/lib/sites/registry.ts"],"sourcesContent":["import { kv } from \"@/lib/kv\";\r\n\r\nconst SITE_REGISTRY_PREFIX = \"buildwithai:sites\";\r\nconst SITE_REGISTRY_INDEX = \"buildwithai:sites:index\";\r\n\r\nexport type SiteRegistryEntry = {\r\n  id: string;\r\n  name: string;\r\n  createdAt: number;\r\n  updatedAt: number;\r\n};\r\n\r\nexport async function registerSite(id: string, name: string) {\r\n  const key = `${SITE_REGISTRY_PREFIX}:${id}`;\r\n  const existing = await kv.get(key);\r\n\r\n  if (existing) return existing;\r\n\r\n  const entry: SiteRegistryEntry = {\r\n    id,\r\n    name,\r\n    createdAt: Date.now(),\r\n    updatedAt: Date.now(),\r\n  };\r\n\r\n  await kv.set(key, entry);\r\n  // Add to index of sites\r\n  try {\r\n    const idx = (await kv.get(SITE_REGISTRY_INDEX)) as string[] | null;\r\n    const nextIdx = Array.isArray(idx) ? Array.from(new Set([...idx, id])) : [id];\r\n    await kv.set(SITE_REGISTRY_INDEX, nextIdx);\r\n  } catch (e) {\r\n    // ignore index update failures\r\n  }\r\n  return entry;\r\n}\r\n\r\nexport async function updateSiteTimestamp(id: string) {\r\n  const key = `${SITE_REGISTRY_PREFIX}:${id}`;\r\n  const entry = (await kv.get(key)) as SiteRegistryEntry | null;\r\n\r\n  if (!entry) return;\r\n\r\n  entry.updatedAt = Date.now();\r\n  await kv.set(key, entry);\r\n}\r\n\r\nexport async function listSites(): Promise<SiteRegistryEntry[]> {\r\n  const idx = (await kv.get(SITE_REGISTRY_INDEX)) as string[] | null;\r\n  const entries: SiteRegistryEntry[] = [];\r\n\r\n  if (!Array.isArray(idx) || idx.length === 0) return entries;\r\n\r\n  for (const id of idx) {\r\n    const key = `${SITE_REGISTRY_PREFIX}:${id}`;\r\n    const entry = await kv.get(key);\r\n    if (entry) entries.push(entry as SiteRegistryEntry);\r\n  }\r\n\r\n  return entries.sort((a, b) => b.updatedAt - a.updatedAt);\r\n}\r\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,uBAAuB;AAC7B,MAAM,sBAAsB;AASrB,eAAe,aAAa,EAAU,EAAE,IAAY;IACzD,MAAM,MAAM,GAAG,qBAAqB,CAAC,EAAE,IAAI;IAC3C,MAAM,WAAW,MAAM,qIAAE,CAAC,GAAG,CAAC;IAE9B,IAAI,UAAU,OAAO;IAErB,MAAM,QAA2B;QAC/B;QACA;QACA,WAAW,KAAK,GAAG;QACnB,WAAW,KAAK,GAAG;IACrB;IAEA,MAAM,qIAAE,CAAC,GAAG,CAAC,KAAK;IAClB,wBAAwB;IACxB,IAAI;QACF,MAAM,MAAO,MAAM,qIAAE,CAAC,GAAG,CAAC;QAC1B,MAAM,UAAU,MAAM,OAAO,CAAC,OAAO,MAAM,IAAI,CAAC,IAAI,IAAI;eAAI;YAAK;SAAG,KAAK;YAAC;SAAG;QAC7E,MAAM,qIAAE,CAAC,GAAG,CAAC,qBAAqB;IACpC,EAAE,OAAO,GAAG;IACV,+BAA+B;IACjC;IACA,OAAO;AACT;AAEO,eAAe,oBAAoB,EAAU;IAClD,MAAM,MAAM,GAAG,qBAAqB,CAAC,EAAE,IAAI;IAC3C,MAAM,QAAS,MAAM,qIAAE,CAAC,GAAG,CAAC;IAE5B,IAAI,CAAC,OAAO;IAEZ,MAAM,SAAS,GAAG,KAAK,GAAG;IAC1B,MAAM,qIAAE,CAAC,GAAG,CAAC,KAAK;AACpB;AAEO,eAAe;IACpB,MAAM,MAAO,MAAM,qIAAE,CAAC,GAAG,CAAC;IAC1B,MAAM,UAA+B,EAAE;IAEvC,IAAI,CAAC,MAAM,OAAO,CAAC,QAAQ,IAAI,MAAM,KAAK,GAAG,OAAO;IAEpD,KAAK,MAAM,MAAM,IAAK;QACpB,MAAM,MAAM,GAAG,qBAAqB,CAAC,EAAE,IAAI;QAC3C,MAAM,QAAQ,MAAM,qIAAE,CAAC,GAAG,CAAC;QAC3B,IAAI,OAAO,QAAQ,IAAI,CAAC;IAC1B;IAEA,OAAO,QAAQ,IAAI,CAAC,CAAC,GAAG,IAAM,EAAE,SAAS,GAAG,EAAE,SAAS;AACzD"}},
    {"offset": {"line": 2138, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/lib/sites/getSite.ts"],"sourcesContent":["import { loadSiteState } from \"@/lib/builder/load\";\r\n\r\nexport async function getSite(siteId: string) {\r\n  const state = await loadSiteState(siteId);\r\n  if (!state) return null;\r\n\r\n  return {\r\n    id: siteId,\r\n    name: state.metadata?.name ?? \"Untitled\",\r\n    createdAt: state.metadata?.createdAt ?? Date.now(),\r\n    updatedAt: state.metadata?.updatedAt ?? Date.now(),\r\n  };\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,QAAQ,MAAc;IAC1C,MAAM,QAAQ,MAAM,IAAA,6JAAa,EAAC;IAClC,IAAI,CAAC,OAAO,OAAO;IAEnB,OAAO;QACL,IAAI;QACJ,MAAM,MAAM,QAAQ,EAAE,QAAQ;QAC9B,WAAW,MAAM,QAAQ,EAAE,aAAa,KAAK,GAAG;QAChD,WAAW,MAAM,QAAQ,EAAE,aAAa,KAAK,GAAG;IAClD;AACF"}},
    {"offset": {"line": 2158, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/AjaySidal/buildwithai/src/app/builder/site/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"next/navigation\";\r\nimport Canvas from \"@/components/builder/Canvas\";\r\nimport { Sidebar } from \"@/components/builder/Sidebar\";\r\nimport BlockEditorSidebar from \"@/components/builder/BlockEditorSidebar\";\r\nimport { loadSiteState } from \"@/lib/builder/load\";\r\nimport { saveSiteState } from \"../../../../lib/builder/save\";\r\nimport { registerSite, updateSiteTimestamp } from \"@/lib/sites/registry\";\r\nimport { getSite } from \"../../../../lib/sites/getSite\";\r\nimport type { PublishMetadata } from \"@/types/publish\";\r\nimport type { PublishHistoryEntry, PublishHistory } from \"@/types/publish\";\r\nimport type { BuilderState } from \"@/types/builder\";\r\n\r\ntype Props = { params: { id: string } };\r\n\r\nexport default function BuilderCanvas({ params }: Props) {\r\n  const siteId = params.id;\r\n\r\n  const [state, setState] = useState<BuilderState | null>(null);\r\n  const [selectedBlockId, setSelectedBlockId] = useState<string | null>(null);\r\n  const [isPublishing, setIsPublishing] = useState(false);\r\n  const [publishMetadata, setPublishMetadata] =\r\n    useState<PublishMetadata | null>(null);\r\n  const [publishError, setPublishError] = useState<string | null>(null);\r\n  const [publishHistory, setPublishHistory] = useState<\r\n    PublishHistoryEntry[] | null\r\n  >(null);\r\n  const [showHistory, setShowHistory] = useState(false);\r\n  const [isRestoring, setIsRestoring] = useState(false);\r\n  const [restoreError, setRestoreError] = useState<string | null>(null);\r\n  const [isPreviewing, setIsPreviewing] = useState(false);\r\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\r\n  const [isStaging, setIsStaging] = useState(false);\r\n  const [stagingUrl, setStagingUrl] = useState<string | null>(null);\r\n  const [stagingError, setStagingError] = useState<string | null>(null);\r\n  const [promoting, setPromoting] = useState(false);\r\n  const [site, setSite] = useState<{ id: string; name: string; createdAt: number; updatedAt: number } | null>(null);\r\n  const [expandedChangelogVersion, setExpandedChangelogVersion] = useState<\r\n    number | null\r\n  >(null);\r\n  const [changelogContent, setChangelogContent] = useState<\r\n    Record<number, string | null>\r\n  >({});\r\n  const [expandedReleaseNotesVersion, setExpandedReleaseNotesVersion] = useState<number | null>(null);\r\n  const [releaseNotesContent, setReleaseNotesContent] = useState<Record<number, string | null>>({});\r\n\r\n  useEffect(() => {\r\n    async function init() {\r\n      const kvState = await loadSiteState(siteId);\r\n      if (kvState) {\r\n        setState(kvState);\r\n        return;\r\n      }\r\n\r\n      const raw = localStorage.getItem(`buildwithai:site:${siteId}`);\r\n      if (raw) {\r\n        try {\r\n          const parsed = JSON.parse(raw);\r\n          const initial: BuilderState = {\r\n            metadata: {\r\n              id: siteId,\r\n              name: parsed?.metadata?.name ?? \"Untitled\",\r\n              createdAt: parsed?.metadata?.createdAt ?? Date.now(),\r\n              updatedAt: parsed?.metadata?.updatedAt ?? Date.now(),\r\n              version: parsed?.metadata?.version ?? 1,\r\n            },\r\n            pages:\r\n              parsed.pages ?? [{ id: \"page-1\", title: \"Home\", slug: \"/\", blocks: [] }],\r\n            activePageId: parsed.activePageId ?? \"page-1\",\r\n          };\r\n\r\n          setState(initial);\r\n\r\n          // Save to KV immediately\r\n          await saveSiteState(siteId, initial);\r\n        } catch (e) {\r\n          // ignore\r\n        }\r\n      }\r\n    }\r\n\r\n    init();\r\n  }, [siteId]);\r\n\r\n  useEffect(() => {\r\n    async function load() {\r\n      const data = await getSite(siteId);\r\n      setSite(data);\r\n\r\n      // Auto-register site in dashboard registry\r\n      if (data?.name) {\r\n        await registerSite(siteId, data.name);\r\n        await updateSiteTimestamp(siteId);\r\n      }\r\n    }\r\n    load();\r\n  }, [siteId]);\r\n\r\n  // AUTOSAVE (debounced)\r\n  useEffect(() => {\r\n    if (!state?.metadata) return;\r\n\r\n    const timeout = setTimeout(() => {\r\n      saveSiteState(siteId, state);\r\n    }, 500);\r\n\r\n    return () => clearTimeout(timeout);\r\n  }, [state, siteId]);\r\n\r\n  async function handlePublish() {\r\n    if (!state) return;\r\n    setIsPublishing(true);\r\n    setPublishError(null);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/publish\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ siteId }),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const data = await res.json().catch(() => ({}));\r\n        setPublishError(\r\n          data?.error ?? `Publish failed with status ${res.status}`\r\n        );\r\n        setIsPublishing(false);\r\n        return;\r\n      }\r\n\r\n      const data = await res.json();\r\n      if (data?.publish) {\r\n        setPublishMetadata(data.publish as PublishMetadata);\r\n      }\r\n\r\n      if (data?.history) {\r\n        setPublishHistory(data.history);\r\n      }\r\n    } catch (error: any) {\r\n      setPublishError(error?.message ?? \"Unexpected error during publish\");\r\n    } finally {\r\n      setIsPublishing(false);\r\n    }\r\n  }\r\n\r\n  async function handlePreview() {\r\n    setIsPreviewing(true);\r\n    setPreviewUrl(null);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/publish/preview\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ siteId }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (data?.previewUrl) {\r\n        setPreviewUrl(data.previewUrl);\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Preview error\", error);\r\n    } finally {\r\n      setIsPreviewing(false);\r\n    }\r\n  }\r\n\r\n  async function handleStaging() {\r\n    setIsStaging(true);\r\n    setStagingUrl(null);\r\n    setStagingError(null);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/publish/staging\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ siteId }),\r\n      });\r\n\r\n      const data = await res.json();\r\n\r\n      if (!res.ok) {\r\n        setStagingError(data?.error ?? \"Staging deploy failed\");\r\n        setIsStaging(false);\r\n        return;\r\n      }\r\n\r\n      if (data?.stagingUrl) {\r\n        setStagingUrl(data.stagingUrl);\r\n      }\r\n    } catch (error: any) {\r\n      setStagingError(error?.message ?? \"Unexpected staging error\");\r\n    } finally {\r\n      setIsStaging(false);\r\n    }\r\n  }\r\n\r\n  async function loadHistory() {\r\n    const res = await fetch(`/api/publish/history?siteId=${siteId}`);\r\n    if (!res.ok) return;\r\n    const data = await res.json();\r\n    if (data?.history) setPublishHistory(data.history);\r\n  }\r\n\r\n  async function handleRestore(version: number) {\r\n    setIsRestoring(true);\r\n    setRestoreError(null);\r\n\r\n    try {\r\n      const res = await fetch(\"/api/publish/rollback\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ siteId, version }),\r\n      });\r\n\r\n      if (!res.ok) {\r\n        const data = await res.json().catch(() => ({}));\r\n        setRestoreError(\r\n          data?.error ?? `Restore failed with status ${res.status}`\r\n        );\r\n        setIsRestoring(false);\r\n        return;\r\n      }\r\n\r\n      // Reload page to reflect restored state\r\n      window.location.reload();\r\n    } catch (error: any) {\r\n      setRestoreError(error?.message ?? \"Unexpected restore error\");\r\n    } finally {\r\n      setIsRestoring(false);\r\n    }\r\n  }\r\n\r\n  async function loadChangelog(version: number) {\r\n    // Return cached if present\r\n    if (changelogContent[version] !== undefined) return;\r\n\r\n    const res = await fetch(\r\n      `/api/publish/changelog?siteId=${siteId}&version=${version}`\r\n    );\r\n    if (!res.ok) {\r\n      setChangelogContent((prev) => ({\r\n        ...prev,\r\n        [version]: null,\r\n      }));\r\n      return;\r\n    }\r\n    const data = await res.json();\r\n    setChangelogContent((prev) => ({\r\n      ...prev,\r\n      [version]: data?.changelog ?? null,\r\n    }));\r\n  }\r\n\r\n  async function loadReleaseNotes(version: number) {\r\n    if (releaseNotesContent[version] !== undefined) return;\r\n\r\n    const res = await fetch(\r\n      `/api/publish/release-notes?siteId=${siteId}&version=${version}`\r\n    );\r\n\r\n    if (!res.ok) {\r\n      setReleaseNotesContent((prev) => ({\r\n        ...prev,\r\n        [version]: null,\r\n      }));\r\n      return;\r\n    }\r\n\r\n    const data = await res.json();\r\n    setReleaseNotesContent((prev) => ({\r\n      ...prev,\r\n      [version]: data?.releaseNotes ?? null,\r\n    }));\r\n  }\r\n\r\n  const activePage = state?.pages.find((p) => p.id === state.activePageId) ?? state?.pages[0];\r\n\r\n  const blocks = activePage?.blocks ?? [];\r\n\r\n  function addBlock(type: string) {\r\n    if (!activePage) return\r\n    setState((prev: any) => ({\r\n      ...prev,\r\n      pages: prev.pages.map((p: any) =>\r\n        p.id === activePage.id\r\n          ? { ...p, blocks: [...p.blocks, { id: crypto.randomUUID(), type, data: {} }] }\r\n          : p\r\n      ),\r\n    }))\r\n  }\r\n\r\n  function updateBlockData(pageId: string, blockId: string, data: any) {\r\n    setState((prev: any) => ({\r\n      ...prev,\r\n      pages: prev.pages.map((p: any) =>\r\n        p.id === pageId\r\n          ? { ...p, blocks: p.blocks.map((b: any) => (b.id === blockId ? { ...b, data } : b)) }\r\n          : p\r\n      ),\r\n    }))\r\n  }\r\n\r\n  function removeBlock(id: string) {\r\n    if (!activePage) return\r\n    setState((prev: any) => ({\r\n      ...prev,\r\n      pages: prev.pages.map((p: any) =>\r\n        p.id === activePage.id ? { ...p, blocks: p.blocks.filter((b: any) => b.id !== id) } : p\r\n      ),\r\n    }))\r\n    if (selectedBlockId === id) setSelectedBlockId(null)\r\n  }\r\n\r\n  function moveBlock(pageId: string, blockId: string, direction: \"up\" | \"down\") {\r\n    setState((prev: any) => {\r\n      const pages = prev.pages.map((p: any) => {\r\n        if (p.id !== pageId) return p\r\n\r\n        const index = p.blocks.findIndex((b: any) => b.id === blockId)\r\n        if (index === -1) return p\r\n\r\n        const newBlocks = [...p.blocks]\r\n\r\n        if (direction === \"up\" && index > 0) {\r\n          const temp = newBlocks[index - 1]\r\n          newBlocks[index - 1] = newBlocks[index]\r\n          newBlocks[index] = temp\r\n        }\r\n\r\n        if (direction === \"down\" && index < newBlocks.length - 1) {\r\n          const temp = newBlocks[index + 1]\r\n          newBlocks[index + 1] = newBlocks[index]\r\n          newBlocks[index] = temp\r\n        }\r\n\r\n        return { ...p, blocks: newBlocks }\r\n      })\r\n\r\n      return { ...prev, pages }\r\n    })\r\n  }\r\n\r\n  function duplicateBlock(pageId: string, block: any) {\r\n    setState((prev: any) => {\r\n      const pages = prev.pages.map((p: any) => {\r\n        if (p.id !== pageId) return p\r\n\r\n        const newBlock = { ...block, id: crypto.randomUUID() }\r\n\r\n        return { ...p, blocks: [...p.blocks, newBlock] }\r\n      })\r\n\r\n      return { ...prev, pages }\r\n    })\r\n  }\r\n\r\n  function deleteBlock(pageId: string, blockId: string) {\r\n    setState((prev: any) => {\r\n      const pages = prev.pages.map((p: any) =>\r\n        p.id === pageId ? { ...p, blocks: p.blocks.filter((b: any) => b.id !== blockId) } : p\r\n      )\r\n      return { ...prev, pages }\r\n    })\r\n    if (selectedBlockId === blockId) setSelectedBlockId(null)\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex h-screen\">\r\n      <Sidebar blocks={blocks} selectedBlockId={selectedBlockId} onAddBlock={addBlock} onRemoveBlock={removeBlock} onSelectBlock={(id) => setSelectedBlockId(id)} />\r\n\r\n      <div className=\"flex-1 p-6 overflow-auto flex flex-col gap-4\">\r\n        <div className=\"flex items-center justify-between gap-4\">\r\n          <div className=\"min-w-0\">\r\n            <h1 className=\"text-xl font-semibold truncate\">\r\n              Editing: {activePage?.title ?? \"Untitled page\"}\r\n            </h1>\r\n            {publishMetadata?.lastPublishedAt && (\r\n              <p className=\"text-xs text-slate-500 mt-1\">\r\n                Last published: {\" \"}\r\n                {new Date(publishMetadata.lastPublishedAt).toLocaleString()}\r\n                {publishMetadata.lastPublishedVersion\r\n                  ? ` • Version ${publishMetadata.lastPublishedVersion}`\r\n                  : \"\"}\r\n              </p>\r\n            )}\r\n          </div>\r\n          <div className=\"flex flex-col items-end gap-1\">\r\n            <button\r\n              type=\"button\"\r\n              className=\"px-3 py-1 text-xs rounded bg-purple-700 hover:bg-purple-600 disabled:opacity-50\"\r\n              disabled={isStaging}\r\n              onClick={handleStaging}\r\n            >\r\n              {isStaging ? \"Staging…\" : \"Staging\"}\r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"px-3 py-1 text-xs rounded bg-slate-700 hover:bg-slate-600 disabled:opacity-50\"\r\n              disabled={isPreviewing}\r\n              onClick={handlePreview}\r\n            >\r\n              {isPreviewing ? \"Previewing…\" : \"Preview\"}\r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"inline-flex items-center rounded-full bg-slate-900 text-white text-xs px-4 py-1.5 disabled:opacity-60\"\r\n              onClick={handlePublish}\r\n              disabled={isPublishing || !state}\r\n            >\r\n              {isPublishing ? \"Publishing…\" : \"Publish\"}\r\n            </button>\r\n\r\n        <a\r\n          href={`/site/${siteId}/changelog`}\r\n          className=\"text-xs underline text-blue-300\"\r\n        >\r\n          View Changelog\r\n        </a>\r\n\r\n        <a\r\n          href={`/site/${siteId}/settings`}\r\n          className=\"text-xs underline text-purple-300\"\r\n        >\r\n          Settings\r\n        </a>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"text-[10px] text-slate-400 underline\"\r\n              onClick={() => {\r\n                setShowHistory(!showHistory);\r\n                if (!publishHistory) loadHistory();\r\n              }}\r\n            >\r\n              {showHistory ? \"Hide history\" : \"View history\"}\r\n            </button>\r\n\r\n            {publishError && (\r\n              <p className=\"text-[10px] text-red-500 max-w-xs text-right\">\r\n                {publishError}\r\n              </p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {previewUrl && (\r\n          <div className=\"mt-2 text-xs text-slate-300\">\r\n            Preview ready: {\" \"}\r\n            <a\r\n              href={previewUrl}\r\n              target=\"_blank\"\r\n              className=\"underline text-slate-200\"\r\n            >\r\n              {previewUrl}\r\n            </a>\r\n          </div>\r\n        )}\r\n\r\n        {stagingUrl && (\r\n          <div className=\"mt-2 text-xs text-purple-300\">\r\n            Staging ready: {\" \"}\r\n            <a\r\n              href={stagingUrl}\r\n              target=\"_blank\"\r\n              className=\"underline text-purple-200\"\r\n            >\r\n              {stagingUrl}\r\n            </a>\r\n          </div>\r\n        )}\r\n\r\n        {stagingError && (\r\n          <div className=\"mt-2 text-xs text-red-400\">\r\n            {stagingError}\r\n          </div>\r\n        )}\r\n\r\n        {showHistory && publishHistory && (\r\n          <div className=\"mt-4 border border-slate-800 rounded-lg p-3 bg-slate-900/40\">\r\n            <h2 className=\"text-sm font-semibold mb-2\">Publish History</h2>\r\n            <ul className=\"space-y-2 text-xs\">\r\n              {publishHistory.map((entry, i) => (\r\n                <li key={i} className=\"border-b border-slate-800 pb-1\">\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <span>\r\n                      Version {entry.version} — {\" \"}\r\n                      {new Date(entry.timestamp).toLocaleString()}\r\n                      {entry.rollback ? \" (rollback)\" : \"\"}\r\n                    </span>\r\n                    <div className=\"flex items-center gap-3\">\r\n                      {entry.url && (\r\n                        <a\r\n                          href={entry.url}\r\n                          target=\"_blank\"\r\n                          className=\"text-slate-400 underline\"\r\n                        >\r\n                          View\r\n                        </a>\r\n                      )}\r\n\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"text-slate-300 underline disabled:opacity-50\"\r\n                        disabled={isRestoring}\r\n                        onClick={() => handleRestore(entry.version)}\r\n                      >\r\n                        Restore\r\n                      </button>\r\n\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"text-slate-400 text-[10px] underline\"\r\n                        onClick={() => {\r\n                          const next =\r\n                            expandedChangelogVersion === entry.version\r\n                              ? null\r\n                              : entry.version;\r\n                          setExpandedChangelogVersion(next);\r\n                          if (next !== null) loadChangelog(next);\r\n                        }}\r\n                      >\r\n                        {expandedChangelogVersion === entry.version\r\n                          ? \"Hide changelog\"\r\n                          : \"View changelog\"}\r\n                      </button>\r\n\r\n                      <button\r\n                        type=\"button\"\r\n                        className=\"text-slate-400 text-[10px] underline\"\r\n                        onClick={() => {\r\n                          const next =\r\n                            expandedReleaseNotesVersion === entry.version\r\n                              ? null\r\n                              : entry.version;\r\n                          setExpandedReleaseNotesVersion(next);\r\n                          if (next !== null) loadReleaseNotes(next);\r\n                        }}\r\n                      >\r\n                        {expandedReleaseNotesVersion === entry.version\r\n                          ? \"Hide release notes\"\r\n                          : \"View release notes\"}\r\n                      </button>\r\n                    </div>\r\n                  </div>\r\n\r\n                  {expandedChangelogVersion === entry.version && (\r\n                    <div className=\"mt-1 text-[11px] text-slate-300 whitespace-pre-line\">\r\n                      {changelogContent[entry.version] === undefined && (\r\n                        <span className=\"text-slate-500\">Loading changelog…</span>\r\n                      )}\r\n                      {changelogContent[entry.version] === null && (\r\n                        <span className=\"text-slate-500\">No changelog available for this version.</span>\r\n                      )}\r\n                      {changelogContent[entry.version] && changelogContent[entry.version]}\r\n                    </div>\r\n                  )}\r\n\r\n                  {expandedReleaseNotesVersion === entry.version && (\r\n                    <div className=\"mt-1 text-[11px] text-slate-300 whitespace-pre-line\">\r\n                      {releaseNotesContent[entry.version] === undefined && (\r\n                        <span className=\"text-slate-500\">Loading release notes…</span>\r\n                      )}\r\n                      {releaseNotesContent[entry.version] === null && (\r\n                        <span className=\"text-slate-500\">No release notes available for this version.</span>\r\n                      )}\r\n                      {releaseNotesContent[entry.version] && releaseNotesContent[entry.version]}\r\n                    </div>\r\n                  )}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          </div>\r\n        )}\r\n\r\n        <Canvas blocks={blocks} selectedBlockId={selectedBlockId} onSelectBlock={(id) => setSelectedBlockId(id)} />\r\n      </div>\r\n\r\n      <BlockEditorSidebar\r\n        block={blocks.find((b: any) => b.id === selectedBlockId) ?? null}\r\n        onChange={(data: any) => {\r\n          if (!selectedBlockId || !activePage) return\r\n\r\n          // Duplicate request\r\n          if ((data as any).__duplicate__) {\r\n            const original = blocks.find((b: any) => b.id === selectedBlockId)\r\n            if (original) duplicateBlock(activePage.id, original)\r\n            return\r\n          }\r\n\r\n          updateBlockData(activePage.id, selectedBlockId, data)\r\n        }}\r\n        onRegenerate={() => {\r\n          /* handled in Step 3 */\r\n        }}\r\n        onMoveUp={() => {\r\n          if (!selectedBlockId || !activePage) return\r\n          moveBlock(activePage.id, selectedBlockId, \"up\")\r\n        }}\r\n        onMoveDown={() => {\r\n          if (!selectedBlockId || !activePage) return\r\n          moveBlock(activePage.id, selectedBlockId, \"down\")\r\n        }}\r\n        onDelete={() => {\r\n          if (!selectedBlockId || !activePage) return\r\n          deleteBlock(activePage.id, selectedBlockId)\r\n        }}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}